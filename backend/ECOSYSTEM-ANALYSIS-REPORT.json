{
  "date": "2025-11-27",
  "sections": [
    {
      "title": "Arquitectura de M√≥dulos",
      "modulesByCategory": {
        "CORE": [
          {
            "key": "authentication",
            "name": "Autenticaci√≥n y Autorizaci√≥n",
            "category": "CORE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "features": {
              "jwtAuth": {
                "done": true,
                "tested": true
              },
              "roleBasedAccess": {
                "done": true,
                "tested": true
              },
              "multiTenantIsolation": {
                "done": true,
                "tested": true
              },
              "staffLogin": {
                "done": true,
                "tested": true
              },
              "companyLogin": {
                "done": true,
                "tested": true
              },
              "partnerLogin": {
                "done": true,
                "tested": true
              }
            },
            "files": [
              "src/middleware/auth.js",
              "src/routes/auth.js",
              "public/js/modules/aponnt-login.js"
            ],
            "tables": [
              "aponnt_staff",
              "users (company employees)",
              "partners"
            ],
            "apiEndpoints": [
              "POST /api/v1/auth/aponnt/staff/login",
              "POST /api/v1/auth/aponnt/partner/login",
              "POST /api/v1/auth/login (company employees)",
              "POST /api/v1/auth/refresh",
              "POST /api/v1/auth/logout"
            ],
            "knownIssues": [],
            "lastUpdated": "2025-01-15",
            "documentation": {
              "status": "pending",
              "file": "docs/modules/AUTHENTICATION-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "AUTHENTICATION-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "AUTHENTICATION-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "AUTHENTICATION-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "AUTHENTICATION-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "AUTHENTICATION-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "AUTHENTICATION-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "AUTHENTICATION-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "AUTHENTICATION-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "AUTHENTICATION-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.122Z",
              "detectedCount": 7
            }
          },
          {
            "key": "companies",
            "name": "Gesti√≥n de Empresas (Multi-Tenant Core)",
            "category": "CORE",
            "status": "IN_MIGRATION",
            "progress": 80,
            "phase": "DEVELOPMENT",
            "features": {
              "crud": {
                "done": true,
                "tested": true
              },
              "modulesConfiguration": {
                "done": true,
                "tested": true
              },
              "pricingCalculation": {
                "done": true,
                "tested": true
              },
              "licenseTypes": {
                "done": true,
                "tested": true
              },
              "vendorAssignment": {
                "done": true,
                "tested": false
              },
              "commissionCalculation": {
                "done": false,
                "inProgress": true
              },
              "multiBranchSupport": {
                "done": false,
                "planned": true,
                "priority": "MEDIUM",
                "documentReference": "docs/ARCHITECTURE-MULTI-BRANCH-STRATEGY.md"
              }
            },
            "plannedFeatures": {
              "multiBranch": {
                "name": "Sistema Multi-Sucursal No-Invasivo",
                "status": "IN_PROGRESS",
                "startDate": "2025-11-26",
                "priority": "MEDIUM",
                "description": "Sistema de sucursales con branch_id=NULL significa GLOBAL. Feature flag por empresa. Retrocompatibilidad 100%.",
                "architectureDocument": "backend/docs/ARCHITECTURE-MULTI-BRANCH-STRATEGY.md",
                "implementationGuide": "backend/docs/MULTI-BRANCH-IMPLEMENTATION-GUIDE.md",
                "principioFundamental": "NULL = GLOBAL (branch_id IS NULL aplica a toda la empresa)",
                "currentState": {
                  "tablesWithBranchId": [
                    "users",
                    "departments",
                    "shifts",
                    "company_branches"
                  ],
                  "tablesWithoutBranchId": [
                    "kiosks",
                    "attendances"
                  ],
                  "usersWithBranch": "0/141",
                  "departmentsWithBranch": "0/6",
                  "shiftsWithBranch": "0/7",
                  "companiesWithMultiBranchEnabled": "0/9"
                },
                "criticalConstraints": [
                  "NO modificar authorized_departments en kiosks (es m√°s flexible que branch_id)",
                  "NO cambiar queries de marcado de asistencia",
                  "NULL = GLOBAL (retrocompatibilidad total)",
                  "Feature flag: multi_branch_enabled por empresa",
                  "Triggers multi-tenant ya protegen la integridad"
                ],
                "databaseChanges": {
                  "companies": {
                    "newColumn": "multi_branch_enabled",
                    "type": "BOOLEAN",
                    "default": "false",
                    "migrationFile": "migrations/20251126_add_multi_branch_enabled.sql",
                    "status": "COMPLETED"
                  },
                  "users": {
                    "newColumn": "branch_scope",
                    "type": "JSONB",
                    "default": "NULL",
                    "indexGIN": "idx_users_branch_scope",
                    "migrationFile": "migrations/20251126_add_branch_scope_to_users.sql",
                    "status": "COMPLETED"
                  }
                },
                "modelChanges": {
                  "Company.js": {
                    "field": "multiBranchEnabled",
                    "status": "COMPLETED"
                  },
                  "User-postgresql.js": {
                    "field": "branchScope",
                    "status": "COMPLETED"
                  }
                },
                "phases": [
                  {
                    "id": "MB-1",
                    "name": "Agregar multi_branch_enabled a companies",
                    "done": true,
                    "completedDate": "2025-11-26",
                    "risk": "ZERO",
                    "description": "Feature flag booleano en tabla companies. Default: false. Controla visibilidad de opciones de sucursal en UI.",
                    "files": [
                      "src/models/Company.js",
                      "migrations/20251126_add_multi_branch_enabled.sql"
                    ],
                    "verification": "SELECT column_name FROM information_schema.columns WHERE table_name='companies' AND column_name='multi_branch_enabled'"
                  },
                  {
                    "id": "MB-2",
                    "name": "Agregar branch_scope a users",
                    "done": true,
                    "completedDate": "2025-11-26",
                    "risk": "LOW",
                    "description": "Campo JSONB para definir acceso a sucursales espec√≠ficas. NULL = acceso global (gerente general).",
                    "files": [
                      "src/models/User-postgresql.js",
                      "migrations/20251126_add_branch_scope_to_users.sql"
                    ],
                    "verification": "SELECT column_name FROM information_schema.columns WHERE table_name='users' AND column_name='branch_scope'"
                  },
                  {
                    "id": "MB-3",
                    "name": "UI condicional",
                    "done": false,
                    "risk": "LOW",
                    "description": "Mostrar/ocultar selector de sucursales seg√∫n multi_branch_enabled de la empresa.",
                    "files": [
                      "public/panel-empresa.html",
                      "public/js/components/branch-selector.js"
                    ],
                    "implementation": "Si company.multi_branch_enabled = false, ocultar todo lo relacionado con sucursales"
                  },
                  {
                    "id": "MB-4",
                    "name": "Queries inteligentes",
                    "done": false,
                    "risk": "MEDIUM",
                    "description": "Modificar queries para filtrar por branch: AND (branch_id IS NULL OR branch_id = :currentBranch)",
                    "files": [
                      "src/utils/branchFilter.js",
                      "src/routes/departmentRoutes.js",
                      "src/routes/shiftRoutes.js"
                    ],
                    "implementation": "Crear helper getBranchFilter() que genera condici√≥n SQL"
                  },
                  {
                    "id": "MB-5",
                    "name": "Wizard de clonaci√≥n",
                    "done": false,
                    "risk": "LOW",
                    "description": "Al crear sucursal, ofrecer clonar departamentos/turnos de otra sucursal o de globales.",
                    "files": [
                      "src/routes/branchRoutes.js"
                    ],
                    "implementation": "POST /api/v1/branches/:id/clone con opciones de clonado"
                  },
                  {
                    "id": "MB-6",
                    "name": "Dashboard consolidado",
                    "done": false,
                    "risk": "LOW",
                    "description": "Vista agregada para gerentes que ven todas las sucursales con stats consolidadas.",
                    "files": [
                      "src/routes/dashboardRoutes.js"
                    ],
                    "implementation": "GET /api/v1/dashboard/consolidated con filtro por branch_scope del usuario"
                  }
                ],
                "supportedCompanyTypes": [
                  {
                    "type": "A",
                    "name": "Multi-sucursal Homog√©nea",
                    "description": "Misma ciudad/rubro. Departamentos clonados por sucursal.",
                    "example": "ISI Argentina con sucursales C√≥rdoba, Mendoza, Rosario"
                  },
                  {
                    "type": "B",
                    "name": "Multi-pa√≠s/Multi-rubro",
                    "description": "Departamentos totalmente independientes por sucursal.",
                    "example": "Holding con ISI Argentina (tech), ISI Chile (tech), ACME M√©xico (retail)"
                  },
                  {
                    "type": "C",
                    "name": "H√≠brida",
                    "description": "Departamentos globales (branch_id=NULL) + espec√≠ficos por sucursal.",
                    "example": "RRHH Corporativo (global) + Producci√≥n Norte (branch 1) + Producci√≥n Sur (branch 2)"
                  }
                ],
                "scripts": [
                  {
                    "name": "analyze-branch-system.js",
                    "purpose": "Analizar estado actual del sistema de branches"
                  },
                  {
                    "name": "analyze-impact-branches.js",
                    "purpose": "Analizar impacto antes de cambios"
                  },
                  {
                    "name": "run-multibranch-migration.js",
                    "purpose": "Ejecutar migraciones MB-1 y MB-2"
                  },
                  {
                    "name": "add-multibranch-to-company-model.js",
                    "purpose": "Agregar campo a modelo Company"
                  },
                  {
                    "name": "add-branchscope-to-user-model.js",
                    "purpose": "Agregar campo a modelo User"
                  }
                ],
                "nextStepsForClaude": [
                  "1. Leer docs/MULTI-BRANCH-IMPLEMENTATION-GUIDE.md para contexto completo",
                  "2. Verificar estado de fases en engineering-metadata.js ‚Üí plannedFeatures.multiBranch.phases",
                  "3. Continuar con fase MB-3 (UI condicional) cuando usuario lo solicite",
                  "4. NUNCA modificar authorized_departments en kiosks",
                  "5. Siempre usar principio NULL=GLOBAL en queries",
                  "6. Actualizar engineering-metadata.js al completar cada fase"
                ]
              }
            },
            "pendingMigrations": [
              "ADD multi_branch_enabled BOOLEAN DEFAULT false",
              "ADD assigned_vendor_id UUID ‚Üí aponnt_staff(id)",
              "ADD support_vendor_id UUID ‚Üí aponnt_staff(id)",
              "ADD sales_commission_usd DECIMAL(12,2)",
              "ADD support_commission_usd DECIMAL(12,2)",
              "ADD created_by_staff_id UUID ‚Üí aponnt_staff(id)"
            ],
            "files": [
              "src/models/Company.js",
              "src/routes/aponntDashboard.js"
            ],
            "tables": [
              "companies"
            ],
            "apiEndpoints": [
              "GET /api/aponnt/dashboard/companies",
              "POST /api/aponnt/dashboard/companies",
              "PUT /api/aponnt/dashboard/companies/:id",
              "DELETE /api/aponnt/dashboard/companies/:id"
            ],
            "dependencies": [
              "aponnt_staff",
              "vendor_statistics"
            ],
            "knownIssues": [
              "Multi-Branch: Fases MB-1 y MB-2 completadas. Ver plannedFeatures.multiBranch para continuar.",
              "Campos de comisi√≥n USD calculados en frontend pero no persistidos a√∫n",
              "Falta filtrado por rol jer√°rquico en GET /companies"
            ],
            "currentTask": "Migrar campos de comisiones y vendedores (ver PARA-BACKEND-IMPLEMENTACION-COMPLETA.md)",
            "lastUpdated": "2025-01-19",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/Company.js",
                  "lines": "1-300",
                  "description": "Modelo Sequelize de empresas"
                },
                {
                  "file": "src/routes/aponntDashboard.js",
                  "lines": "150-450",
                  "description": "CRUD de empresas (admin)"
                },
                {
                  "file": "src/services/PricingService.js",
                  "lines": "1-200",
                  "description": "C√°lculo de precios por m√≥dulos"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-administrativo.html",
                  "lines": "500-1200",
                  "description": "UI gesti√≥n de empresas"
                },
                {
                  "file": "public/js/modules/companies.js",
                  "lines": "1-800",
                  "description": "L√≥gica CRUD empresas"
                }
              ]
            },
            "documentation": {
              "status": "pending",
              "file": "docs/modules/COMPANIES-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "COMPANIES-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "COMPANIES-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "COMPANIES-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "COMPANIES-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "COMPANIES-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "COMPANIES-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "COMPANIES-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "COMPANIES-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "COMPANIES-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.126Z",
              "detectedCount": 7
            }
          },
          {
            "key": "users",
            "name": "Gesti√≥n de Usuarios (Empleados de Empresas)",
            "category": "CORE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "features": {
              "crud": {
                "done": true,
                "tested": true
              },
              "bulkImport": {
                "done": true,
                "tested": true
              },
              "photoManagement": {
                "done": true,
                "tested": true
              },
              "biometricEnrollment": {
                "done": true,
                "tested": true
              },
              "departmentAssignment": {
                "done": true,
                "tested": true
              },
              "shiftAssignment": {
                "done": true,
                "tested": true
              },
              "visualCalendar": {
                "done": true,
                "tested": false
              }
            },
            "files": [
              "src/models/User-postgresql.js",
              "src/routes/userRoutes.js",
              "src/routes/user-calendar-routes.js",
              "public/js/modules/users.js",
              "public/js/modules/user-calendar-tab.js"
            ],
            "tables": [
              "users"
            ],
            "apiEndpoints": [
              "GET /api/users",
              "POST /api/users",
              "PUT /api/users/:id",
              "DELETE /api/users/:id",
              "POST /api/users/bulk-import",
              "GET /api/v1/users/:userId/calendar",
              "GET /api/v1/users/:userId/calendar/summary"
            ],
            "dependencies": [
              "companies",
              "shifts"
            ],
            "knownIssues": [
              "Calendario requiere limpieza de cache del navegador para ver cambios en UI"
            ],
            "lastUpdated": "2025-11-22",
            "documentation": {
              "status": "pending",
              "file": "docs/modules/USERS-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "USERS-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "USERS-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "USERS-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "USERS-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "USERS-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "USERS-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "USERS-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "USERS-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "USERS-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [
                {
                  "name": "Azure Face API",
                  "description": "Reconocimiento facial con IA de Microsoft Azure",
                  "icon": "ü§ñ"
                }
              ],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **AI/ML**: Azure Face API | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Reconocimiento facial de nivel empresarial. Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.137Z",
              "detectedCount": 9
            }
          },
          {
            "key": "attendance",
            "name": "M√≥dulo de Asistencias + Sistema de Analytics Predictivo con IA",
            "category": "CORE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "features": {
              "biometricCheckin": {
                "done": true,
                "tested": true
              },
              "gpsValidation": {
                "done": true,
                "tested": true
              },
              "lateArrivalAuthorization": {
                "done": true,
                "tested": true
              },
              "realtimeView": {
                "done": true,
                "tested": true
              },
              "reports": {
                "done": true,
                "tested": true
              },
              "analyticsScoring": {
                "name": "Sistema de Analytics Predictivo y Scoring",
                "done": true,
                "inProgress": false,
                "startDate": "2025-11-21",
                "completionDate": "2025-11-21",
                "progress": 100,
                "subfeatures": {
                  "scoringDeterministic": {
                    "name": "Scoring Determin√≠stico de Asistencia",
                    "done": true,
                    "priority": "HIGH",
                    "estimatedEffort": "20-24 horas",
                    "actualEffort": "18 horas",
                    "description": "C√°lculo de scoring 0-100 basado en reglas + SQL agregadas",
                    "components": {
                      "punctualityScore": {
                        "weight": 40,
                        "formula": "% llegadas a tiempo √∫ltimos 90 d√≠as",
                        "description": "40% del scoring total"
                      },
                      "absenceScore": {
                        "weight": 30,
                        "formula": "100 - (ausencias_injustificadas / d√≠as_laborables * 100)",
                        "description": "30% del scoring total"
                      },
                      "lateArrivalScore": {
                        "weight": 20,
                        "formula": "Penalizaci√≥n por llegadas tarde (0.5 puntos c/u)",
                        "description": "20% del scoring total"
                      },
                      "earlyDepartureScore": {
                        "weight": 10,
                        "formula": "Penalizaci√≥n por salidas anticipadas (0.3 puntos c/u)",
                        "description": "10% del scoring total"
                      }
                    },
                    "outputTable": "attendance_profiles (scoring_total, scoring_components)"
                  },
                  "patternDetection": {
                    "name": "Detecci√≥n de Patrones Avanzada (SQL)",
                    "done": true,
                    "priority": "HIGH",
                    "estimatedEffort": "16-20 horas",
                    "actualEffort": "22 horas",
                    "description": "Detecci√≥n de 15+ patrones de comportamiento",
                    "patterns": [
                      {
                        "id": "last_in_first_out",
                        "name": "√öltimo en entrar, primero en salir",
                        "sql": "ROW_NUMBER() OVER (PARTITION BY work_date, department_id ORDER BY check_in DESC)",
                        "threshold": "Top 5 en 60% de d√≠as √∫ltimos 30 d√≠as",
                        "impact": "scoring -5 puntos"
                      },
                      {
                        "id": "tolerance_abuser",
                        "name": "Abusa de tolerancia constantemente",
                        "sql": "COUNT(*) WHERE (check_in - shift_start_time) BETWEEN tolerance_min AND tolerance_max",
                        "threshold": ">75% de d√≠as con tolerancia usada",
                        "impact": "scoring -8 puntos"
                      },
                      {
                        "id": "friday_absentee",
                        "name": "Ausencias recurrentes d√≠as espec√≠ficos",
                        "sql": "COUNT(*) WHERE EXTRACT(DOW FROM work_date) = X AND status = 'absent'",
                        "threshold": ">40% ausencias en mismo d√≠a semana",
                        "impact": "scoring -10 puntos, alerta supervisor"
                      },
                      {
                        "id": "night_shift_problems",
                        "name": "Problemas en turno nocturno",
                        "sql": "Comparativa ausencias/llegadas tarde turno noche vs otros",
                        "threshold": "+50% m√°s problemas en noche",
                        "impact": "scoring -7 puntos, considerar cambio turno"
                      },
                      {
                        "id": "pre_post_weekend",
                        "name": "Ausencias pre/post fin de semana",
                        "sql": "COUNT(*) WHERE work_date IN (viernes, lunes) AND status = 'absent'",
                        "threshold": ">30% ausencias viernes/lunes",
                        "impact": "scoring -12 puntos, patr√≥n sospechoso"
                      },
                      {
                        "id": "consistent_excellence",
                        "name": "Empleado ejemplar consistente",
                        "sql": "puntualidad > 95% AND ausencias = 0 AND llegadas_tarde < 2",
                        "threshold": "√öltimos 180 d√≠as",
                        "impact": "scoring +15 puntos, bonus recomendado"
                      },
                      {
                        "id": "improving_trend",
                        "name": "Tendencia de mejora sostenida",
                        "sql": "Linear regression de scoring √∫ltimos 6 meses",
                        "threshold": "Pendiente > +2 puntos/mes",
                        "impact": "scoring +5 puntos, reconocimiento positivo"
                      },
                      {
                        "id": "declining_performance",
                        "name": "Deterioro progresivo",
                        "sql": "Linear regression de scoring √∫ltimos 3 meses",
                        "threshold": "Pendiente < -3 puntos/mes",
                        "impact": "scoring -8 puntos, intervenci√≥n RRHH"
                      },
                      {
                        "id": "seasonal_pattern",
                        "name": "Patrones estacionales (verano/invierno)",
                        "sql": "Comparativa ausencias por season (GROUP BY EXTRACT(QUARTER))",
                        "threshold": "Variaci√≥n >40% entre temporadas",
                        "impact": "Ajustar evaluaci√≥n por contexto"
                      },
                      {
                        "id": "location_outlier",
                        "name": "Check-in desde ubicaciones an√≥malas",
                        "sql": "ST_Distance(clock_in_location, expected_location) > threshold",
                        "threshold": ">5km de distancia esperada en >20% registros",
                        "impact": "scoring -6 puntos, auditor√≠a GPS"
                      },
                      {
                        "id": "method_inconsistency",
                        "name": "Inconsistencia en m√©todo de registro",
                        "sql": "Variabilidad en checkInMethod (biometric vs manual)",
                        "threshold": ">30% manual cuando deber√≠a ser biom√©trico",
                        "impact": "scoring -4 puntos, verificar fraude"
                      },
                      {
                        "id": "break_time_abuse",
                        "name": "Exceso en tiempo de descanso",
                        "sql": "AVG(break_time) WHERE break_time > policy_break_time + 15min",
                        "threshold": ">60% d√≠as con exceso de break",
                        "impact": "scoring -7 puntos"
                      },
                      {
                        "id": "overtime_hero",
                        "name": "Horas extra consistentes (positivo)",
                        "sql": "AVG(overtime_hours) WHERE overtime_hours > 0",
                        "threshold": ">2 horas extra promedio/semana",
                        "impact": "scoring +8 puntos, compensaci√≥n extra"
                      },
                      {
                        "id": "peer_comparison_bottom",
                        "name": "Consistentemente bajo vs pares",
                        "sql": "PERCENT_RANK() OVER (PARTITION BY department_id, shift_id)",
                        "threshold": "Bottom 10% en 3 meses consecutivos",
                        "impact": "scoring -10 puntos, plan de mejora"
                      },
                      {
                        "id": "department_dragging",
                        "name": "Impacta negativamente al departamento",
                        "sql": "Correlaci√≥n entre ausencias individuales y productividad dept",
                        "threshold": "Correlaci√≥n < -0.6",
                        "impact": "scoring -15 puntos, consideraci√≥n de reubicaci√≥n"
                      }
                    ],
                    "outputTable": "attendance_patterns (pattern_id, user_id, detected_at, severity)"
                  },
                  "comparativeCube": {
                    "name": "Cubo OLAP Comparativo Multi-dimensional",
                    "done": true,
                    "priority": "HIGH",
                    "estimatedEffort": "24-28 horas",
                    "actualEffort": "20 horas",
                    "description": "An√°lisis comparativo por m√∫ltiples dimensiones con drill-down",
                    "dimensions": {
                      "tiempo": [
                        "d√≠a",
                        "semana",
                        "mes",
                        "trimestre",
                        "a√±o"
                      ],
                      "geografia": [
                        "sucursal",
                        "ciudad",
                        "provincia",
                        "pa√≠s"
                      ],
                      "organizacion": [
                        "departamento",
                        "subdepartamento",
                        "equipo"
                      ],
                      "turno": [
                        "ma√±ana",
                        "tarde",
                        "noche",
                        "rotativo"
                      ],
                      "rol": [
                        "operario",
                        "supervisor",
                        "jefe_departamento",
                        "gerente"
                      ],
                      "empleado": [
                        "individual",
                        "grupo_edad",
                        "antiguedad"
                      ]
                    },
                    "measures": [
                      "ausencias_promedio",
                      "puntualidad_score",
                      "llegadas_tarde_count",
                      "horas_trabajadas_promedio",
                      "overtime_promedio",
                      "scoring_attendance_promedio"
                    ],
                    "comparisons": [
                      {
                        "name": "Turno Noche vs Ma√±ana - Departamento Producci√≥n",
                        "query": "Compare ausencias turno_noche vs turno_manana WHERE dept = 'Produccion'",
                        "insight": "Detectar si turno noche tiene +45% m√°s ausencias"
                      },
                      {
                        "name": "Sucursal A vs Sucursal B - Mismo rol",
                        "query": "Compare scoring_attendance GROUP BY branch WHERE role = 'Operario'",
                        "insight": "Identificar sucursales con bajo rendimiento"
                      },
                      {
                        "name": "Antes vs Despu√©s implementaci√≥n pol√≠tica",
                        "query": "Compare m√©tricas [fecha_inicio - 90 d√≠as] vs [fecha_inicio + 90 d√≠as]",
                        "insight": "Evaluar impacto de cambios organizacionales"
                      },
                      {
                        "name": "Top 10% vs Bottom 10% empleados",
                        "query": "Percentiles scoring_attendance, comparar caracter√≠sticas comunes",
                        "insight": "Identificar factores de √©xito replicables"
                      }
                    ],
                    "outputTable": "comparative_analytics (precomputed cubes for fast UI)"
                  },
                  "rankingSystem": {
                    "name": "Sistema de Rankings Din√°micos",
                    "done": true,
                    "priority": "MEDIUM",
                    "estimatedEffort": "12-16 horas",
                    "actualEffort": "10 horas",
                    "description": "Rankings por m√∫ltiples categor√≠as con gamificaci√≥n",
                    "rankings": [
                      {
                        "category": "global_company",
                        "scope": "Toda la empresa",
                        "refresh": "diario"
                      },
                      {
                        "category": "by_department",
                        "scope": "Por departamento",
                        "refresh": "diario"
                      },
                      {
                        "category": "by_shift",
                        "scope": "Por turno",
                        "refresh": "diario"
                      },
                      {
                        "category": "by_branch",
                        "scope": "Por sucursal",
                        "refresh": "semanal"
                      },
                      {
                        "category": "by_role",
                        "scope": "Por rol",
                        "refresh": "semanal"
                      },
                      {
                        "category": "monthly_improvement",
                        "scope": "Mayor mejora del mes",
                        "refresh": "mensual"
                      },
                      {
                        "category": "quarterly_consistency",
                        "scope": "M√°s consistente del trimestre",
                        "refresh": "trimestral"
                      }
                    ],
                    "outputTable": "attendance_rankings (materialized view)"
                  },
                  "predictiveModels": {
                    "name": "Modelos Predictivos con Machine Learning",
                    "done": false,
                    "inProgress": false,
                    "priority": "LOW",
                    "estimatedEffort": "60-80 horas",
                    "requiresInstall": [
                      "Python 3.10+",
                      "scikit-learn",
                      "pandas",
                      "Flask"
                    ],
                    "description": "Clustering + predicci√≥n usando modelos ML",
                    "models": [
                      {
                        "name": "K-means Clustering (Perfiles autom√°ticos)",
                        "library": "scikit-learn",
                        "features": [
                          "avg_late_arrivals",
                          "tolerance_usage_rate",
                          "absence_rate",
                          "early_departure_rate"
                        ],
                        "output": "5 perfiles: Ejemplar, Problem√°tico Puntualidad, Alto Ausentismo, etc.",
                        "accuracy_target": ">85%"
                      },
                      {
                        "name": "Random Forest (Predicci√≥n ausencias)",
                        "library": "scikit-learn",
                        "features": [
                          "d√≠a_semana",
                          "turno",
                          "historial_30d",
                          "estaci√≥n_a√±o",
                          "dept"
                        ],
                        "output": "Probabilidad de ausencia pr√≥ximos 7 d√≠as",
                        "accuracy_target": ">75%"
                      },
                      {
                        "name": "Time Series ARIMA (Tendencias)",
                        "library": "statsmodels",
                        "features": [
                          "serie_temporal_ausencias_dept"
                        ],
                        "output": "Predicci√≥n ausencias 3/6/12 meses",
                        "accuracy_target": ">70%"
                      }
                    ],
                    "integration": "Microservicio Python + Flask ‚Üí Node.js API"
                  },
                  "aiInsights": {
                    "name": "Insights y Recomendaciones con Ollama (Llama 3.1)",
                    "done": false,
                    "inProgress": false,
                    "priority": "MEDIUM",
                    "estimatedEffort": "40-50 horas",
                    "requiresInstall": [],
                    "description": "An√°lisis cualitativo y recomendaciones personalizadas",
                    "features": [
                      {
                        "name": "Anomaly Detection Qualitativo",
                        "prompt": "Analizar patr√≥n: empleado puntual 95% ‚Üí √∫ltima semana 5 llegadas tarde ‚Üí todas viernes turno noche",
                        "output": "Insight: Posible problema personal/transporte los viernes. Recomendaci√≥n: 1-on-1 con supervisor"
                      },
                      {
                        "name": "Recomendaciones Personalizadas",
                        "prompt": "Empleado Juan: scoring 62, patr√≥n 'tolerance_abuser', dept Producci√≥n",
                        "output": "Sugerencias: cambio turno, capacitaci√≥n gesti√≥n tiempo, mentor asignado"
                      },
                      {
                        "name": "Generaci√≥n de Reports Ejecutivos",
                        "prompt": "Generar resumen ejecutivo del mes: top insights, alertas, recomendaciones",
                        "output": "Report en lenguaje natural con m√©tricas clave y accionables"
                      }
                    ]
                  }
                }
              }
            },
            "files": [
              "src/models/Attendance-postgresql.js",
              "src/routes/attendanceRoutes.js",
              "public/js/modules/attendance.js",
              "src/models/AttendanceProfile.js",
              "src/models/AttendancePattern.js",
              "src/models/ComparativeAnalytics.js",
              "src/models/ScoringHistory.js",
              "src/services/AttendanceAnalyticsService.js",
              "src/services/AttendanceScoringEngine.js",
              "src/services/PatternDetectionService.js",
              "src/routes/attendanceAnalyticsRoutes.js",
              "public/js/modules/attendance-analytics.js"
            ],
            "tables": [
              "attendances",
              "late_arrival_authorizations",
              "attendance_profiles",
              "attendance_patterns",
              "attendance_analytics_cache",
              "comparative_analytics",
              "scoring_history",
              "attendance_rankings"
            ],
            "apiEndpoints": [
              "POST /api/v1/biometric/attendance",
              "GET /api/attendance",
              "POST /api/attendance/authorize-late",
              "GET /api/attendance-analytics/employee/:userId - An√°lisis completo (scoring + patrones + historial)",
              "GET /api/attendance-analytics/employee/:userId/profile - Perfil de asistencia del empleado",
              "GET /api/attendance-analytics/employee/:userId/patterns - Patrones activos del empleado",
              "GET /api/attendance-analytics/employee/:userId/history - Historial de scoring (√∫ltimos 12 meses)",
              "GET /api/attendance-analytics/company/:companyId - An√°lisis completo de la empresa",
              "GET /api/attendance-analytics/company/:companyId/stats - Estad√≠sticas agregadas de la empresa",
              "GET /api/attendance-analytics/company/:companyId/rankings?group_by=department|shift|branch - Rankings din√°micos",
              "GET /api/attendance-analytics/company/:companyId/critical-patterns - Patrones cr√≠ticos activos",
              "POST /api/attendance-analytics/recalculate/:companyId - Recalcular scoring de toda la empresa",
              "POST /api/attendance-analytics/recalculate/employee/:userId - Recalcular scoring de un empleado",
              "POST /api/attendance-analytics/patterns/detect/:userId - Ejecutar detecci√≥n de patrones para un empleado",
              "POST /api/attendance-analytics/patterns/:patternId/resolve - Marcar patr√≥n como resuelto",
              "POST /api/attendance-analytics/patterns/:patternId/ignore - Marcar patr√≥n como ignorado",
              "POST /api/attendance-analytics/olap/generate - Generar cubo OLAP para comparativas",
              "GET /api/attendance-analytics/olap/:cubeId - Obtener datos de cubo OLAP generado",
              "POST /api/attendance-analytics/snapshot/:companyId - Generar snapshot semanal de scoring",
              "DELETE /api/attendance-analytics/cache/:companyId - Invalidar cache de una empresa",
              "GET /api/attendance-analytics/health - Estado del sistema de analytics"
            ],
            "dependencies": [
              "users",
              "departments",
              "shifts",
              "kiosks"
            ],
            "knownIssues": [],
            "lastUpdated": "2025-11-21",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/Attendance.js",
                  "lines": "1-250",
                  "description": "Modelo de asistencias"
                },
                {
                  "file": "src/routes/attendance.js",
                  "lines": "1-1500",
                  "description": "CRUD + scoring + patterns"
                },
                {
                  "file": "src/services/ScoringEngine.js",
                  "lines": "1-400",
                  "description": "Motor de scoring 0-100"
                },
                {
                  "file": "src/services/PatternDetectionService.js",
                  "lines": "1-600",
                  "description": "Detecci√≥n de 15+ patterns"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-empresa.html",
                  "lines": "4500-6000",
                  "description": "UI de asistencias"
                },
                {
                  "file": "public/js/modules/attendance.js",
                  "lines": "1-2500",
                  "description": "L√≥gica frontend asistencias"
                }
              ]
            },
            "documentation": {
              "status": "pending",
              "file": "docs/modules/ATTENDANCE-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "ATTENDANCE-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "ATTENDANCE-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "ATTENDANCE-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "ATTENDANCE-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "ATTENDANCE-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "ATTENDANCE-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "ATTENDANCE-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "ATTENDANCE-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "ATTENDANCE-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "analyticsArchitecture": {
              "description": "Arquitectura completa del sistema de Analytics y Scoring predictivo",
              "newTables": {
                "attendance_profiles": {
                  "description": "Perfil y scoring por empleado (1 registro por user_id + company_id)",
                  "migration": "migrations/20251121_create_attendance_analytics_system.sql",
                  "schema": {
                    "id": "BIGSERIAL PRIMARY KEY",
                    "user_id": "UUID NOT NULL REFERENCES users(user_id)",
                    "company_id": "INTEGER NOT NULL REFERENCES companies(id)",
                    "employee_id": "VARCHAR(50) - Denormalized for fast queries",
                    "department_id": "BIGINT REFERENCES departments(id)",
                    "shift_id": "BIGINT REFERENCES shifts(id)",
                    "branch_id": "BIGINT REFERENCES branches(id)",
                    "scoring_total": "DECIMAL(5,2) DEFAULT 100.00 - Scoring total ponderado",
                    "scoring_punctuality": "DECIMAL(5,2) DEFAULT 100.00 - 40% del total",
                    "scoring_absence": "DECIMAL(5,2) DEFAULT 100.00 - 30% del total",
                    "scoring_late_arrival": "DECIMAL(5,2) DEFAULT 100.00 - 20% del total",
                    "scoring_early_departure": "DECIMAL(5,2) DEFAULT 100.00 - 10% del total",
                    "total_days": "INTEGER DEFAULT 0 - D√≠as laborables √∫ltimos 90d",
                    "present_days": "INTEGER DEFAULT 0",
                    "absent_days": "INTEGER DEFAULT 0",
                    "late_arrivals_count": "INTEGER DEFAULT 0",
                    "early_departures_count": "INTEGER DEFAULT 0",
                    "tolerance_usage_rate": "DECIMAL(5,2) DEFAULT 0.00 - % veces que usa tolerancia",
                    "avg_late_minutes": "INTEGER DEFAULT 0",
                    "overtime_hours_total": "DECIMAL(10,2) DEFAULT 0.00",
                    "active_patterns": "TEXT[] - Array de pattern IDs activos",
                    "positive_patterns": "TEXT[] - Patrones positivos (consistent_excellence, etc.)",
                    "negative_patterns": "TEXT[] - Patrones negativos (tolerance_abuser, etc.)",
                    "last_calculated_at": "TIMESTAMP DEFAULT NOW()",
                    "calculation_period_start": "DATE - Inicio per√≠odo de c√°lculo",
                    "calculation_period_end": "DATE - Fin per√≠odo de c√°lculo",
                    "profile_category": "VARCHAR(50) - Ejemplar, Promedio, Problem√°tico, etc.",
                    "created_at": "TIMESTAMP DEFAULT NOW()",
                    "updated_at": "TIMESTAMP DEFAULT NOW()"
                  },
                  "indexes": [
                    "CREATE UNIQUE INDEX idx_attendance_profiles_user_company ON attendance_profiles(user_id, company_id)",
                    "CREATE INDEX idx_attendance_profiles_scoring ON attendance_profiles(company_id, scoring_total DESC)",
                    "CREATE INDEX idx_attendance_profiles_dept ON attendance_profiles(department_id, scoring_total DESC)",
                    "CREATE INDEX idx_attendance_profiles_category ON attendance_profiles(company_id, profile_category)"
                  ],
                  "notes": [
                    "Se actualiza mediante UPSERT (INSERT ... ON CONFLICT UPDATE)",
                    "Recalculable con stored procedure refresh_attendance_profiles(user_id, company_id)",
                    "Cron job diario: recalcular todos los perfiles activos"
                  ]
                },
                "attendance_patterns": {
                  "description": "Patrones detectados por empleado (m√∫ltiples registros por user)",
                  "migration": "migrations/20251121_create_attendance_analytics_system.sql",
                  "schema": {
                    "id": "BIGSERIAL PRIMARY KEY",
                    "user_id": "UUID NOT NULL REFERENCES users(user_id)",
                    "company_id": "INTEGER NOT NULL REFERENCES companies(id)",
                    "pattern_id": "VARCHAR(50) NOT NULL - last_in_first_out, tolerance_abuser, etc.",
                    "pattern_name": "VARCHAR(255) - Nombre descriptivo",
                    "pattern_category": "VARCHAR(50) - negative, positive, neutral",
                    "detection_date": "DATE NOT NULL - Cu√°ndo se detect√≥",
                    "severity": "VARCHAR(20) - low, medium, high, critical",
                    "confidence_score": "DECIMAL(5,2) DEFAULT 0.00 - Confianza de detecci√≥n (0-100)",
                    "occurrences_count": "INTEGER DEFAULT 1 - Cu√°ntas veces ocurri√≥",
                    "detection_period_start": "DATE",
                    "detection_period_end": "DATE",
                    "threshold_value": "DECIMAL(10,2) - Valor del threshold aplicado",
                    "actual_value": "DECIMAL(10,2) - Valor real que dispar√≥ el patr√≥n",
                    "scoring_impact": "DECIMAL(5,2) DEFAULT 0.00 - +/- puntos al scoring",
                    "requires_action": "BOOLEAN DEFAULT false - Requiere intervenci√≥n RRHH",
                    "action_taken": "TEXT - Acci√≥n tomada (si aplica)",
                    "action_taken_at": "TIMESTAMP",
                    "action_taken_by": "UUID REFERENCES users(user_id)",
                    "status": "VARCHAR(20) DEFAULT 'active' - active, resolved, ignored",
                    "resolved_at": "TIMESTAMP",
                    "notes": "TEXT",
                    "created_at": "TIMESTAMP DEFAULT NOW()",
                    "updated_at": "TIMESTAMP DEFAULT NOW()"
                  },
                  "indexes": [
                    "CREATE INDEX idx_patterns_user ON attendance_patterns(user_id, detection_date DESC)",
                    "CREATE INDEX idx_patterns_company_active ON attendance_patterns(company_id, status) WHERE status = 'active'",
                    "CREATE INDEX idx_patterns_severity ON attendance_patterns(company_id, severity) WHERE requires_action = true",
                    "CREATE INDEX idx_patterns_category ON attendance_patterns(pattern_category, detection_date DESC)"
                  ]
                },
                "attendance_analytics_cache": {
                  "description": "Cache de m√©tricas agregadas pre-calculadas (performance)",
                  "migration": "migrations/20251121_create_attendance_analytics_system.sql",
                  "schema": {
                    "id": "BIGSERIAL PRIMARY KEY",
                    "company_id": "INTEGER NOT NULL REFERENCES companies(id)",
                    "cache_key": "VARCHAR(255) NOT NULL - department_123_shift_2_month_2025_11",
                    "cache_type": "VARCHAR(50) - department_stats, shift_comparison, cube_slice",
                    "dimension_1": "VARCHAR(50) - Ej: department_id",
                    "dimension_1_value": "VARCHAR(255) - Ej: 123",
                    "dimension_2": "VARCHAR(50)",
                    "dimension_2_value": "VARCHAR(255)",
                    "period_start": "DATE",
                    "period_end": "DATE",
                    "cached_data": "JSONB NOT NULL - M√©tricas pre-calculadas",
                    "calculated_at": "TIMESTAMP DEFAULT NOW()",
                    "expires_at": "TIMESTAMP - TTL del cache",
                    "hit_count": "INTEGER DEFAULT 0 - Cu√°ntas veces se us√≥",
                    "last_hit_at": "TIMESTAMP",
                    "created_at": "TIMESTAMP DEFAULT NOW()"
                  },
                  "indexes": [
                    "CREATE UNIQUE INDEX idx_analytics_cache_key ON attendance_analytics_cache(company_id, cache_key)",
                    "CREATE INDEX idx_analytics_cache_expires ON attendance_analytics_cache(expires_at) WHERE expires_at IS NOT NULL",
                    "CREATE INDEX idx_analytics_cache_type ON attendance_analytics_cache(company_id, cache_type)",
                    "CREATE INDEX idx_analytics_cache_jsonb ON attendance_analytics_cache USING GIN(cached_data)"
                  ],
                  "notes": [
                    "TTL: 24 horas para stats diarias, 7 d√≠as para agregaciones semanales",
                    "Cron job: limpieza de cache expirado cada 6 horas"
                  ]
                },
                "comparative_analytics": {
                  "description": "Cubos OLAP pre-calculados para comparaciones multi-dimensionales",
                  "migration": "migrations/20251121_create_attendance_analytics_system.sql",
                  "schema": {
                    "id": "BIGSERIAL PRIMARY KEY",
                    "company_id": "INTEGER NOT NULL REFERENCES companies(id)",
                    "cube_id": "VARCHAR(100) NOT NULL - shift_vs_department_2025_11",
                    "dimension_time": "VARCHAR(50) - day, week, month, quarter, year",
                    "dimension_time_value": "VARCHAR(50) - 2025-11, Q4-2025, etc.",
                    "dimension_org": "VARCHAR(50) - department, shift, branch, role",
                    "dimension_org_value": "VARCHAR(255)",
                    "dimension_geo": "VARCHAR(50) - branch, city, province",
                    "dimension_geo_value": "VARCHAR(255)",
                    "measure_name": "VARCHAR(50) - absences_avg, punctuality_score, etc.",
                    "measure_value": "DECIMAL(15,4)",
                    "measure_unit": "VARCHAR(20) - %, count, hours, score",
                    "comparison_baseline_value": "DECIMAL(15,4) - Valor baseline para comparar",
                    "comparison_diff_absolute": "DECIMAL(15,4) - Diferencia absoluta",
                    "comparison_diff_percent": "DECIMAL(7,2) - Diferencia porcentual",
                    "sample_size": "INTEGER - N de registros en el cubo",
                    "confidence_level": "DECIMAL(5,2) - Nivel de confianza estad√≠stica",
                    "calculated_at": "TIMESTAMP DEFAULT NOW()",
                    "created_at": "TIMESTAMP DEFAULT NOW()"
                  },
                  "indexes": [
                    "CREATE INDEX idx_comparative_cube ON comparative_analytics(company_id, cube_id)",
                    "CREATE INDEX idx_comparative_dimensions ON comparative_analytics(dimension_org, dimension_org_value, dimension_time_value)",
                    "CREATE INDEX idx_comparative_measure ON comparative_analytics(company_id, measure_name, calculated_at DESC)"
                  ]
                },
                "scoring_history": {
                  "description": "Historial de cambios de scoring (time series para trending)",
                  "migration": "migrations/20251121_create_attendance_analytics_system.sql",
                  "schema": {
                    "id": "BIGSERIAL PRIMARY KEY",
                    "user_id": "UUID NOT NULL REFERENCES users(user_id)",
                    "company_id": "INTEGER NOT NULL REFERENCES companies(id)",
                    "snapshot_date": "DATE NOT NULL",
                    "scoring_total": "DECIMAL(5,2)",
                    "scoring_punctuality": "DECIMAL(5,2)",
                    "scoring_absence": "DECIMAL(5,2)",
                    "scoring_late_arrival": "DECIMAL(5,2)",
                    "scoring_early_departure": "DECIMAL(5,2)",
                    "change_from_previous": "DECIMAL(6,2) - Cambio vs snapshot anterior",
                    "change_reason": "VARCHAR(255) - Mejora sostenida, pico ausencias, etc.",
                    "trend": "VARCHAR(20) - improving, stable, declining",
                    "created_at": "TIMESTAMP DEFAULT NOW()"
                  },
                  "indexes": [
                    "CREATE INDEX idx_scoring_history_user ON scoring_history(user_id, snapshot_date DESC)",
                    "CREATE INDEX idx_scoring_history_trends ON scoring_history(company_id, trend, snapshot_date DESC)"
                  ],
                  "notes": [
                    "Se inserta 1 registro por semana por empleado (snapshot semanal)",
                    "Permite graficar evoluci√≥n temporal del scoring",
                    "Detecci√≥n de trends: regresi√≥n lineal sobre √∫ltimos 12 snapshots"
                  ]
                }
              },
              "materializedViews": {
                "attendance_rankings": {
                  "description": "Rankings pre-calculados (refresh diario)",
                  "definition": "\n              CREATE MATERIALIZED VIEW attendance_rankings AS\n              SELECT\n                company_id,\n                user_id,\n                scoring_total,\n                RANK() OVER (PARTITION BY company_id ORDER BY scoring_total DESC) as rank_global,\n                RANK() OVER (PARTITION BY company_id, department_id ORDER BY scoring_total DESC) as rank_department,\n                RANK() OVER (PARTITION BY company_id, shift_id ORDER BY scoring_total DESC) as rank_shift,\n                profile_category,\n                last_calculated_at\n              FROM attendance_profiles\n              WHERE scoring_total IS NOT NULL\n              ORDER BY company_id, scoring_total DESC;\n            ",
                  "refresh": "REFRESH MATERIALIZED VIEW CONCURRENTLY attendance_rankings",
                  "schedule": "Cron diario 02:00 AM"
                }
              },
              "storedProcedures": {
                "refresh_attendance_profiles": {
                  "purpose": "Recalcular scoring y m√©tricas de un empleado",
                  "params": [
                    "p_user_id UUID",
                    "p_company_id INTEGER",
                    "p_period_days INTEGER DEFAULT 90"
                  ],
                  "returns": "VOID",
                  "notes": [
                    "Calcula scoring basado en attendances de √∫ltimos p_period_days",
                    "Hace UPSERT en attendance_profiles",
                    "Detecta patrones y los inserta en attendance_patterns",
                    "Inserta snapshot en scoring_history (si es diferente al anterior)"
                  ]
                },
                "detect_attendance_patterns": {
                  "purpose": "Detectar patrones espec√≠ficos para un empleado",
                  "params": [
                    "p_user_id UUID",
                    "p_company_id INTEGER",
                    "p_pattern_ids TEXT[] DEFAULT NULL"
                  ],
                  "returns": "TABLE (pattern_id VARCHAR, detected BOOLEAN, severity VARCHAR, details JSONB)",
                  "notes": [
                    "Si p_pattern_ids es NULL, detecta todos los 15+ patrones",
                    "Retorna tabla con resultados de detecci√≥n",
                    "Inserta/actualiza en attendance_patterns seg√∫n resultados"
                  ]
                },
                "calculate_comparative_cube": {
                  "purpose": "Pre-calcular cubo OLAP espec√≠fico",
                  "params": [
                    "p_company_id INTEGER",
                    "p_dimension_org VARCHAR",
                    "p_dimension_time VARCHAR",
                    "p_period_start DATE",
                    "p_period_end DATE"
                  ],
                  "returns": "INTEGER - Cantidad de registros insertados",
                  "notes": [
                    "Genera cube slices para todas las combinaciones de dimensiones",
                    "Inserta en comparative_analytics",
                    "Usado por endpoints de comparaci√≥n"
                  ]
                },
                "get_employee_insights": {
                  "purpose": "Generar insights personalizados para un empleado",
                  "params": [
                    "p_user_id UUID",
                    "p_company_id INTEGER"
                  ],
                  "returns": "JSONB - {scoring, patterns, recommendations, alerts}",
                  "notes": [
                    "Combina scoring + patrones + comparativas vs peers",
                    "Genera recomendaciones autom√°ticas",
                    "Detecta alertas (deterioro, patrones cr√≠ticos, etc.)"
                  ]
                }
              },
              "automatedJobs": {
                "daily_scoring_refresh": {
                  "schedule": "00 02 * * * - Diario 02:00 AM",
                  "task": "Recalcular scoring de TODOS los empleados activos",
                  "implementation": "node-cron ‚Üí AttendanceScoringEngine.refreshAllProfiles()",
                  "estimatedDuration": "30-60 minutos para 5,000 empleados"
                },
                "hourly_cache_cleanup": {
                  "schedule": "0 */6 * * * - Cada 6 horas",
                  "task": "Limpiar cache expirado de attendance_analytics_cache",
                  "implementation": "DELETE FROM attendance_analytics_cache WHERE expires_at < NOW()"
                },
                "weekly_pattern_detection": {
                  "schedule": "0 03 * * 1 - Lunes 03:00 AM",
                  "task": "Ejecutar detecci√≥n de patrones para empleados con cambios significativos",
                  "implementation": "PatternDetectionService.detectAllPatterns()"
                },
                "monthly_cube_recalculation": {
                  "schedule": "0 04 1 * * - D√≠a 1 del mes 04:00 AM",
                  "task": "Pre-calcular cubos OLAP del mes anterior completo",
                  "implementation": "ComparativeAnalyticsService.generateMonthCubes()"
                }
              },
              "backwardCompatibility": {
                "guarantee": "100% compatible con c√≥digo existente",
                "reasons": [
                  "NO se modifica tabla attendances existente",
                  "NO se tocan endpoints existentes",
                  "Nuevas tablas son completamente independientes",
                  "Queries existentes NO se ven afectadas",
                  "Nuevos √≠ndices NO afectan performance de writes (tablas separadas)",
                  "Rollback posible: solo DROP nuevas tablas + eliminar rutas analytics"
                ]
              }
            },
            "implementationSummary": {
              "status": "‚úÖ COMPLETADO Y OPERATIVO",
              "completionDate": "2025-11-21",
              "totalLinesOfCode": "2600+",
              "implementedFiles": {
                "migrations": {
                  "migrations/20251121_create_attendance_analytics_system.sql": {
                    "lines": "600+",
                    "contents": [
                      "5 tablas completas (attendance_profiles, attendance_patterns, scoring_history, attendance_analytics_cache, comparative_analytics)",
                      "1 materialized view (attendance_rankings)",
                      "3 stored procedures (refresh_attendance_profiles, detect_tolerance_abuser_pattern, calculate_company_scoring_stats)",
                      "CRITICAL FIX: Foreign keys actualizadas a companies(company_id) en vez de companies(id)"
                    ],
                    "executionStatus": "‚úÖ Ejecutada exitosamente v√≠a run-analytics-migration.js"
                  }
                },
                "models": {
                  "src/models/AttendanceProfile.js": {
                    "lines": "250+",
                    "features": [
                      "Validaciones para scoring 0-100",
                      "Instance method: getScoreBreakdown() - Desglose detallado de scoring",
                      "Class method: getCompanyStats() - Estad√≠sticas agregadas",
                      "Scopes: byCompany, active, topPerformers, needsImprovement",
                      "Asociaciones: belongsTo User/Company/Department/Shift/Branch"
                    ]
                  },
                  "src/models/AttendancePattern.js": {
                    "lines": "200+",
                    "features": [
                      "15 tipos de patrones soportados",
                      "Instance methods: resolve(), ignore() - Gesti√≥n de patrones",
                      "Class method: getCompanyCriticalPatterns() - Alertas cr√≠ticas",
                      "Enum validations: severity (low/medium/high/critical), status (active/resolved/ignored)",
                      "Asociaciones: belongsTo User/Company"
                    ]
                  },
                  "src/models/ScoringHistory.js": {
                    "lines": "100+",
                    "features": [
                      "Time series data para trending",
                      "Class method: getUserTrend() - Detecci√≥n de tendencia (improving/stable/declining)",
                      "Validaciones de scoring components",
                      "Asociaciones: belongsTo User/Company"
                    ]
                  },
                  "src/models/AttendanceAnalyticsCache.js": {
                    "lines": "70+",
                    "features": [
                      "TTL-based caching con expires_at",
                      "Class methods: getCached(), setCached(), invalidate()",
                      "JSONB storage para cached_data",
                      "Hit count tracking para analytics"
                    ]
                  },
                  "src/models/ComparativeAnalytics.js": {
                    "lines": "80+",
                    "features": [
                      "OLAP cube storage",
                      "Multi-dimensional analysis (time, org, geo)",
                      "Comparison calculations (diff_absolute, diff_percent)",
                      "Asociaciones: belongsTo Company"
                    ]
                  }
                },
                "services": {
                  "src/services/AttendanceScoringEngine.js": {
                    "lines": "400+",
                    "implementedMethods": [
                      "calculateUserScoring(userId, companyId) - Scoring completo de empleado",
                      "recalculateCompanyScoring(companyId) - Batch scoring de empresa",
                      "getCompanyScoringStats(companyId) - Estad√≠sticas agregadas",
                      "_calculateBaseMetrics() - M√©tricas de √∫ltimos 90 d√≠as",
                      "_calculatePunctualityScore() - 40% del scoring total",
                      "_calculateAbsenceScore() - 30% del scoring total",
                      "_calculateLateArrivalScore() - 20% del scoring total (penalizaci√≥n 0.5 pts/llegada tarde)",
                      "_calculateEarlyDepartureScore() - 10% del scoring total (penalizaci√≥n 0.3 pts/salida anticipada)",
                      "_calculateTotalScore() - F√≥rmula ponderada: (P√ó0.4 + A√ó0.3 + L√ó0.2 + E√ó0.1)",
                      "_determineProfileCategory() - Ejemplar(90+), Promedio Alto(75+), Promedio(60+), Necesita Mejora(40+), Problem√°tico(<40)",
                      "_calculateWorkingDays() - D√≠as laborables L-V √∫ltimos 90 d√≠as"
                    ],
                    "scoringFormula": {
                      "total": "scoring_total = (punctuality √ó 0.40) + (absence √ó 0.30) + (late_arrival √ó 0.20) + (early_departure √ó 0.10)",
                      "period": "√öltimos 90 d√≠as calendario",
                      "scale": "0-100 para todos los componentes",
                      "categories": {
                        "Ejemplar": "‚â•90 puntos",
                        "Promedio Alto": "75-89 puntos",
                        "Promedio": "60-74 puntos",
                        "Necesita Mejora": "40-59 puntos",
                        "Problem√°tico": "<40 puntos"
                      }
                    }
                  },
                  "src/services/PatternDetectionService.js": {
                    "lines": "650+",
                    "implementedPatterns": [
                      "‚úÖ tolerance_abuser - Abusa de tolerancia >60% d√≠as (severity: medium, impact: -8)",
                      "‚úÖ last_in_first_out - √öltimo en entrar, primero en salir >50% d√≠as (severity: medium, impact: -5)",
                      "‚úÖ friday_absentee - Ausencias viernes >40% (severity: high, impact: -10)",
                      "‚úÖ monday_absentee - Ausencias lunes >40% (severity: high, impact: -10)",
                      "‚úÖ late_arrival_streak - 5+ llegadas tarde consecutivas (severity: high, impact: -12)",
                      "‚úÖ absence_spike - Pico de ausencias 3+ en semana (severity: critical, impact: -15)",
                      "‚úÖ early_departure_habit - Salidas anticipadas >30% d√≠as (severity: medium, impact: -7)",
                      "‚úÖ location_outlier - Check-in desde ubicaciones an√≥malas >20% (severity: high, impact: -6)",
                      "‚úÖ seasonal_pattern - Variaci√≥n >40% ausencias por temporada (severity: low, impact: 0)",
                      "‚úÖ consistent_excellence - Scoring ‚â•95 √∫ltimos 30+ d√≠as (severity: low, impact: +15)",
                      "‚úÖ overtime_hero - Horas extra consistentes >2h/semana (severity: low, impact: +8)",
                      "‚úÖ improving_trend - Mejora sostenida +2 pts/mes (severity: low, impact: +5)",
                      "‚úÖ weekend_overtime - Trabajo fines de semana >50% weekends (severity: low, impact: 0)",
                      "‚úÖ night_shift_stable - Estabilidad en turno nocturno (severity: low, impact: +3)",
                      "‚úÖ flexible_hours - Horarios flexibles consistentes (severity: low, impact: 0)"
                    ],
                    "implementedMethods": [
                      "detectUserPatterns(userId, companyId) - Detecta todos los 15 patrones",
                      "detectCompanyPatterns(companyId) - Batch detection para empresa",
                      "_detectToleranceAbuser() - Patr√≥n espec√≠fico",
                      "_detectLastInFirstOut() - Patr√≥n espec√≠fico",
                      "_detectFridayAbsentee() - Patr√≥n espec√≠fico",
                      "... (15 m√©todos _detect* en total)"
                    ],
                    "patternCategories": {
                      "negative": 9,
                      "positive": 3,
                      "neutral": 3
                    }
                  },
                  "src/services/AttendanceAnalyticsService.js": {
                    "lines": "500+",
                    "implementedMethods": [
                      "analyzeEmployee(userId, companyId) - An√°lisis completo (scoring + patrones + historial)",
                      "analyzeCompany(companyId) - An√°lisis agregado de empresa",
                      "generateOLAPCube(companyId, dimensions) - Generaci√≥n de cubos OLAP",
                      "generateWeeklySnapshot(companyId) - Snapshot semanal para trending",
                      "getRankings(companyId, groupBy) - Rankings din√°micos por dept/shift/branch",
                      "invalidateCache(companyId) - Limpieza de cache"
                    ],
                    "caching": {
                      "strategy": "TTL-based con attendance_analytics_cache",
                      "ttl": "24 horas para stats diarias, 7 d√≠as para semanales",
                      "hitTracking": "Contador de hit_count para analytics de cache"
                    }
                  }
                },
                "routes": {
                  "src/routes/attendanceAnalyticsRoutes.js": {
                    "lines": "500+",
                    "baseUrl": "/api/attendance-analytics",
                    "endpoints": 18,
                    "categories": [
                      "An√°lisis de Empleado (4 endpoints)",
                      "An√°lisis de Empresa (4 endpoints)",
                      "Operaciones de Recalculaci√≥n (2 endpoints)",
                      "Detecci√≥n de Patrones (3 endpoints)",
                      "Cubos OLAP (2 endpoints)",
                      "Snapshots Hist√≥ricos (1 endpoint)",
                      "Gesti√≥n de Cache (1 endpoint)",
                      "Health Check (1 endpoint)"
                    ],
                    "registeredIn": "backend/server.js l√≠neas 2032-2034"
                  }
                },
                "configuration": {
                  "src/config/database.js": {
                    "changes": [
                      "‚úÖ Imports de 5 nuevos modelos (l√≠neas 165-170)",
                      "‚úÖ 40+ asociaciones registradas (l√≠neas 817-860)",
                      "‚úÖ Exports de 5 modelos en module.exports (l√≠neas 967-972)"
                    ]
                  },
                  "backend/server.js": {
                    "changes": [
                      "‚úÖ Import de attendanceAnalyticsRoutes (l√≠nea 2032)",
                      "‚úÖ app.use('/api/attendance-analytics', attendanceAnalyticsRoutes) (l√≠nea 2034)"
                    ]
                  }
                },
                "scripts": {
                  "scripts/run-analytics-migration.js": {
                    "purpose": "Ejecutar migraci√≥n Analytics usando Node.js (psql no disponible en Windows)",
                    "status": "‚úÖ Ejecutado exitosamente - Todas las tablas creadas"
                  }
                }
              },
              "verifiedFunctionality": {
                "healthCheck": {
                  "endpoint": "GET /api/attendance-analytics/health",
                  "tested": "2025-11-21",
                  "response": {
                    "success": true,
                    "status": "healthy",
                    "tables": {
                      "attendance_profiles": 0,
                      "attendance_patterns": 0
                    },
                    "services": {
                      "scoring_engine": "active",
                      "pattern_detection": "active",
                      "analytics_service": "active"
                    }
                  }
                },
                "serverStartup": {
                  "status": "‚úÖ Sin errores",
                  "verification": "Server carg√≥ todos los modelos y rutas sin warnings"
                }
              },
              "notImplemented": {
                "predictiveModels": {
                  "reason": "Fase 2 opcional - requiere Python + scikit-learn",
                  "priority": "LOW",
                  "estimatedEffort": "60-80 horas"
                },
                "aiInsights": {
                  "reason": "Fase 3 opcional - Ollama insights cualitativos",
                  "priority": "MEDIUM",
                  "estimatedEffort": "40-50 horas"
                },
                "frontend": {
                  "reason": "Backend-first approach - UI pendiente",
                  "priority": "HIGH",
                  "nextStep": "Crear attendance-analytics.js con charts y dashboards"
                }
              }
            },
            "phase4Testing": {
              "status": "COMPLETE",
              "startDate": "2025-11-21",
              "completedDate": "2025-11-21",
              "basedOn": "users module pattern (CRUD completo)",
              "targetTests": 8,
              "currentTests": 8,
              "successRate": "100%",
              "completedTests": [
                "‚úÖ attendance_crud_create - Modal de agregar funcional",
                "‚úÖ attendance_crud_update - Bot√≥n editar funcional",
                "‚úÖ attendance_crud_delete - Bot√≥n eliminar funcional",
                "‚úÖ attendance_search_real - B√∫squeda por empleado",
                "‚úÖ attendance_filters_real - Filtros por fecha",
                "‚úÖ attendance_pagination_real - Paginaci√≥n verificada",
                "‚úÖ attendance_export_import - Bot√≥n exportar CSV",
                "‚úÖ attendance_stats - Estad√≠sticas funcionales"
              ],
              "changes": [
                "‚úÖ attendance.js v6.0 creado con CRUD completo (siguiendo patr√≥n users.js)",
                "‚úÖ AttendanceModuleCollector actualizado con 8 tests funcionales",
                "‚úÖ Funciones principales: showAddAttendance(), loadAttendances(), showAttendanceStats(), exportAttendances()",
                "‚úÖ Modal #attendanceModal con formulario completo",
                "‚úÖ Tabla #attendances-list con paginaci√≥n",
                "‚úÖ Filtros por empleado (#searchEmployee) y fecha (#searchDate)",
                "‚úÖ Bot√≥n limpiar filtros funcional"
              ],
              "guide": {
                "step1": "Backup UsersModuleCollector (NO TOCAR)",
                "step2": "Copiar estructura completa de usuarios a attendance",
                "step3": "Adaptar selectores y l√≥gica espec√≠fica de asistencias",
                "step4": "Testear cada operaci√≥n CRUD individualmente",
                "step5": "Verificar 100% tests passing antes de commit",
                "step6": "Actualizar engineering-metadata con resultados"
              },
              "estimatedCompletion": "2025-11-21"
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Multer",
                  "description": "Middleware para upload de archivos multipart/form-data",
                  "icon": "üìÅ"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [
                {
                  "name": "Azure Face API",
                  "description": "Reconocimiento facial con IA de Microsoft Azure",
                  "icon": "ü§ñ"
                },
                {
                  "name": "Ollama (Llama 3.1)",
                  "description": "LLM local para asistencia inteligente",
                  "icon": "üß†"
                }
              ],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [
                {
                  "name": "Socket.IO",
                  "description": "Biblioteca para comunicaci√≥n en tiempo real bidireccional",
                  "icon": "‚ö°"
                }
              ],
              "testing": [],
              "technical": "**Backend**: Express.js, Multer, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **AI/ML**: Azure Face API, Ollama (Llama 3.1) | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Reconocimiento facial de nivel empresarial. Asistente IA 100% privado. Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.145Z",
              "detectedCount": 12
            }
          },
          {
            "key": "departments",
            "name": "Gesti√≥n de Departamentos",
            "category": "CORE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "features": {
              "crud": {
                "done": true,
                "tested": true
              },
              "companySegmentation": {
                "done": true,
                "tested": true
              }
            },
            "files": [
              "src/models/Department.js",
              "src/routes/departmentRoutes.js",
              "public/js/modules/departments.js"
            ],
            "tables": [
              "departments"
            ],
            "apiEndpoints": [
              "GET /api/departments",
              "POST /api/departments",
              "PUT /api/departments/:id",
              "DELETE /api/departments/:id"
            ],
            "dependencies": [
              "companies"
            ],
            "knownIssues": [],
            "lastUpdated": "2025-11-21",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/Department.js",
                  "lines": "1-150",
                  "description": "Modelo de departamentos"
                },
                {
                  "file": "src/routes/departments.js",
                  "lines": "1-400",
                  "description": "CRUD departamentos"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-empresa.html",
                  "lines": "1500-2000",
                  "description": "UI departamentos"
                },
                {
                  "file": "public/js/modules/departments.js",
                  "lines": "1-600",
                  "description": "L√≥gica frontend departamentos"
                }
              ]
            },
            "documentation": {
              "status": "pending",
              "file": "docs/modules/DEPARTMENTS-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "DEPARTMENTS-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "DEPARTMENTS-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "DEPARTMENTS-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "DEPARTMENTS-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "DEPARTMENTS-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "DEPARTMENTS-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "DEPARTMENTS-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "DEPARTMENTS-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "DEPARTMENTS-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.149Z",
              "detectedCount": 7
            }
          },
          {
            "key": "shifts",
            "name": "Gesti√≥n de Turnos",
            "category": "CORE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "features": {
              "crud": {
                "done": true,
                "tested": true
              },
              "scheduleConfiguration": {
                "done": true,
                "tested": true
              },
              "toleranceSettings": {
                "done": true,
                "tested": true
              },
              "rotativeShifts": {
                "done": true,
                "tested": true
              },
              "visualCalendar": {
                "done": true,
                "tested": false
              }
            },
            "files": [
              "src/models/Shift.js",
              "src/routes/shiftRoutes.js",
              "src/routes/shift-calendar-routes.js",
              "src/services/ShiftCalculatorService.js",
              "public/js/modules/shifts.js",
              "public/js/modules/shift-calendar-view.js"
            ],
            "tables": [
              "shifts",
              "user_shift_assignments"
            ],
            "apiEndpoints": [
              "GET /api/shifts",
              "POST /api/shifts",
              "PUT /api/shifts/:id",
              "DELETE /api/shifts/:id",
              "GET /api/v1/shifts/:id/calendar"
            ],
            "dependencies": [
              "companies",
              "users"
            ],
            "knownIssues": [
              "Calendario requiere ShiftCalculatorService activo",
              "Calendario requiere limpieza de cache del navegador para ver cambios en UI"
            ],
            "lastUpdated": "2025-11-22",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/Shift.js",
                  "lines": "1-200",
                  "description": "Modelo de turnos"
                },
                {
                  "file": "src/routes/shifts.js",
                  "lines": "1-600",
                  "description": "CRUD + rotaci√≥n de turnos"
                },
                {
                  "file": "src/services/ShiftRotationService.js",
                  "lines": "1-300",
                  "description": "L√≥gica de rotaci√≥n"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-empresa.html",
                  "lines": "3000-4000",
                  "description": "UI turnos + calendario"
                },
                {
                  "file": "public/js/modules/shift-calendar-view.js",
                  "lines": "1-1200",
                  "description": "Calendario visual de turnos"
                }
              ]
            },
            "documentation": {
              "status": "pending",
              "file": "docs/modules/SHIFTS-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "SHIFTS-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "SHIFTS-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "SHIFTS-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "SHIFTS-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "SHIFTS-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "SHIFTS-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "SHIFTS-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "SHIFTS-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "SHIFTS-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [
                {
                  "name": "Ollama (Llama 3.1)",
                  "description": "LLM local para asistencia inteligente",
                  "icon": "üß†"
                }
              ],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: PostgreSQL | **AI/ML**: Ollama (Llama 3.1) | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Asistente IA 100% privado. Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.152Z",
              "detectedCount": 8
            }
          },
          {
            "key": "holidays",
            "name": "Gesti√≥n de Feriados Internacionales",
            "category": "CORE",
            "status": "PENDING",
            "progress": 30,
            "phase": "DEVELOPMENT",
            "features": {
              "holidaysCRUD": {
                "done": false,
                "inProgress": true
              },
              "countriesManagement": {
                "done": false,
                "inProgress": false
              },
              "provinceStatesManagement": {
                "done": false,
                "inProgress": false
              },
              "bulkImport": {
                "done": false,
                "inProgress": false
              },
              "shiftIntegration": {
                "done": false,
                "inProgress": false
              }
            },
            "pendingMigrations": [
              "‚úÖ CREATE TABLE holidays (id, country, state_province, date, name, is_national, is_provincial, year)",
              "‚úÖ ALTER TABLE branches ADD (country, state_province, city, postal_code, timezone)",
              "‚úÖ ALTER TABLE users ADD branch_id",
              "‚úÖ ALTER TABLE shifts ADD (branch_id, respect_national_holidays, respect_provincial_holidays, custom_non_working_days)"
            ],
            "files": [
              "src/models/Holiday.js",
              "src/routes/holidays-routes.js",
              "migrations/20250122_add_holidays_system.sql",
              "scripts/run-holidays-migration.js",
              "public/js/modules/holidays-management.js"
            ],
            "tables": [
              "holidays"
            ],
            "apiEndpoints": [
              "GET /api/v1/holidays",
              "POST /api/v1/holidays",
              "PUT /api/v1/holidays/:id",
              "DELETE /api/v1/holidays/:id",
              "GET /api/v1/holidays/country/:country",
              "GET /api/v1/holidays/country/:country/province/:province",
              "POST /api/v1/holidays/bulk-import",
              "GET /api/v1/holidays/year/:year"
            ],
            "dependencies": [
              "branches",
              "shifts"
            ],
            "description": "Sistema centralizado de gesti√≥n de feriados por pa√≠s/provincia. Permite a Aponnt Staff configurar calendarios de feriados para cada pa√≠s donde se comercializa el software. Los m√≥dulos de turnos consultan estos feriados autom√°ticamente seg√∫n la sucursal seleccionada para excluir d√≠as no laborables del calendario rotativo.",
            "knownIssues": [
              "UI de gesti√≥n de feriados pendiente en panel-administrativo.html",
              "Falta ruta API REST para CRUD de feriados",
              "Falta integraci√≥n con shift-calendar-routes.js para excluir feriados",
              "Falta UI en shifts.js para seleccionar sucursal y checkboxes de feriados"
            ],
            "currentTask": "Crear UI de gesti√≥n de feriados en Engineering panel (asignado a otra sesi√≥n Claude)",
            "lastUpdated": "2025-01-22",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/Holiday.js",
                  "lines": "1-170",
                  "description": "Modelo Sequelize con m√©todos getHolidaysForLocation, isHoliday, seedHolidays"
                },
                {
                  "file": "src/config/database.js",
                  "lines": "77, 894",
                  "description": "Registro del modelo Holiday"
                },
                {
                  "file": "migrations/20250122_add_holidays_system.sql",
                  "lines": "1-131",
                  "description": "Migraci√≥n completa: tabla holidays + funciones SQL"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-administrativo.html",
                  "lines": "TBD",
                  "description": "UI gesti√≥n de feriados (PENDIENTE)"
                },
                {
                  "file": "public/js/modules/holidays-management.js",
                  "lines": "TBD",
                  "description": "CRUD de feriados (PENDIENTE)"
                }
              ]
            },
            "documentation": {
              "status": "pending",
              "file": "docs/modules/HOLIDAYS-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "HOLIDAYS-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "HOLIDAYS-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "HOLIDAYS-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "HOLIDAYS-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "HOLIDAYS-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "HOLIDAYS-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "HOLIDAYS-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "HOLIDAYS-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "HOLIDAYS-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.154Z",
              "detectedCount": 8
            }
          },
          {
            "key": "kiosks",
            "name": "Gesti√≥n de Kioscos",
            "category": "CORE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "features": {
              "crud": {
                "done": true,
                "tested": true
              },
              "gpsConfiguration": {
                "done": true,
                "tested": true
              },
              "offlineSync": {
                "done": true,
                "tested": true
              }
            },
            "files": [
              "src/models/Kiosk.js",
              "src/routes/kioskRoutes.js"
            ],
            "tables": [
              "kiosks"
            ],
            "apiEndpoints": [
              "GET /api/kiosks",
              "POST /api/kiosks",
              "PUT /api/kiosks/:id",
              "DELETE /api/kiosks/:id"
            ],
            "dependencies": [
              "companies",
              "users"
            ],
            "knownIssues": [],
            "lastUpdated": "2025-11-21",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/Kiosk.js",
                  "lines": "1-150",
                  "description": "Modelo de kioscos"
                },
                {
                  "file": "src/routes/kiosks.js",
                  "lines": "1-400",
                  "description": "CRUD kioscos + GPS"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-empresa.html",
                  "lines": "7000-7500",
                  "description": "UI gesti√≥n kioscos"
                },
                {
                  "file": "public/js/modules/kiosks.js",
                  "lines": "1-500",
                  "description": "L√≥gica frontend kioscos"
                }
              ]
            },
            "documentation": {
              "status": "pending",
              "file": "docs/modules/KIOSKS-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "KIOSKS-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "KIOSKS-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "KIOSKS-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "KIOSKS-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "KIOSKS-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "KIOSKS-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "KIOSKS-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "KIOSKS-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "KIOSKS-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [
                {
                  "name": "Ollama (Llama 3.1)",
                  "description": "LLM local para asistencia inteligente",
                  "icon": "üß†"
                }
              ],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                },
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **AI/ML**: Ollama (Llama 3.1) | **Security**: JWT (JSON Web Tokens), bcrypt",
              "marketing": "Asistente IA 100% privado. Autenticaci√≥n segura sin comprometer velocidad. Seguridad bancaria para sus datos.",
              "detectedAt": "2025-11-24T17:16:21.158Z",
              "detectedCount": 9
            }
          },
          {
            "key": "internationalization",
            "name": "Sistema de Internacionalizaci√≥n (i18n)",
            "category": "CORE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "version": "4.1.0",
            "description": "Sistema de traducci√≥n multiidioma profesional con soporte HTML interno para index.html y paneles",
            "features": {
              "multiLanguageSupport": {
                "done": true,
                "tested": true,
                "description": "6 idiomas soportados: ES, EN, PT, DE, IT, FR"
              },
              "htmlPreservation": {
                "done": true,
                "tested": true,
                "description": "SMART FIX: innerHTML para preservar tags HTML (<strong>, <span>, etc.)"
              },
              "autoTranslation": {
                "done": true,
                "tested": true,
                "description": "Google Translate API gratuita para traducci√≥n autom√°tica"
              },
              "fullCoverage": {
                "done": true,
                "tested": true,
                "description": "1,719 traducciones √ó 6 idiomas = 10,314 traducciones totales"
              },
              "dataTranslateAttributes": {
                "done": true,
                "tested": true,
                "description": "453 elementos HTML con data-translate en index.html"
              }
            },
            "files": [
              "public/js/translation-system-v4.js",
              "public/index.html",
              "public/locales/es.json",
              "public/locales/en.json",
              "public/locales/pt.json",
              "public/locales/de.json",
              "public/locales/it.json",
              "public/locales/fr.json",
              "scripts/auto-translate-google.js",
              "scripts/create-mixed-paragraphs-translations.js",
              "scripts/fix-translation-system.js"
            ],
            "tables": [],
            "apiEndpoints": [],
            "technologies": [
              "JavaScript ES6+",
              "Google Translate API (free)",
              "JSON",
              "i18n pattern",
              "data-translate attributes"
            ],
            "keyFeatures": [
              "üåç 6 idiomas completos",
              "üí∞ $0/mes (Google Translate gratis)",
              "üîß SMART FIX: innerHTML para HTML interno",
              "üìä 100% cobertura de traducciones",
              "üöÄ Auto-traducci√≥n batch con scripts",
              "‚úÖ Preserva tags <strong>, <span>, etc."
            ],
            "problemSolved": {
              "before": "textContent eliminaba tags HTML ‚Üí mezcla de idiomas (ES + EN en mismo p√°rrafo)",
              "after": "innerHTML detecta y preserva HTML ‚Üí 100% traducido correctamente",
              "impact": "Traducci√≥n profesional lista para producci√≥n en 6 idiomas"
            },
            "knownIssues": [],
            "lastUpdated": "2025-01-27",
            "commit": "6fcdbd9",
            "documentation": {
              "status": "pending",
              "file": "docs/modules/INTERNATIONALIZATION-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": []
            }
          }
        ],
        "ENTERPRISE": [
          {
            "key": "notifications",
            "name": "Sistema de Notificaciones Enterprise",
            "category": "ENTERPRISE",
            "status": "PRODUCTION",
            "progress": 95,
            "phase": "PRODUCTION",
            "features": {
              "workflows": {
                "done": true,
                "tested": true
              },
              "multiChannel": {
                "done": true,
                "tested": false
              },
              "escalation": {
                "done": true,
                "tested": true
              },
              "deadlines": {
                "done": true,
                "tested": true
              },
              "reminders": {
                "done": true,
                "tested": true
              }
            },
            "files": [
              "src/models/Notification.js",
              "src/models/NotificationWorkflow.js",
              "src/services/NotificationEnterpriseService.js",
              "src/services/AponntNotificationService.js",
              "public/js/modules/notifications-enterprise.js"
            ],
            "tables": [
              "notifications",
              "notification_workflows",
              "notification_templates"
            ],
            "apiEndpoints": [
              "GET /api/notifications",
              "POST /api/notifications",
              "PUT /api/notifications/:id/mark-read",
              "POST /api/notifications/:id/action"
            ],
            "knownIssues": [
              "Multi-canal (WhatsApp, SMS) implementado pero no testeado end-to-end"
            ],
            "lastUpdated": "2025-01-15",
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Nodemailer",
                  "description": "Env√≠o de emails desde Node.js",
                  "icon": "üìß"
                },
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                },
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                }
              ],
              "realtime": [
                {
                  "name": "Socket.IO",
                  "description": "Biblioteca para comunicaci√≥n en tiempo real bidireccional",
                  "icon": "‚ö°"
                }
              ],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **Security**: JWT (JSON Web Tokens), bcrypt",
              "marketing": "Autenticaci√≥n segura sin comprometer velocidad. Seguridad bancaria para sus datos. Actualizaciones en tiempo real sin recargar.",
              "detectedAt": "2025-11-24T17:16:21.164Z",
              "detectedCount": 10
            }
          },
          {
            "key": "medical",
            "name": "M√≥dulo M√©dico",
            "category": "ENTERPRISE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "features": {
              "exams": {
                "done": true,
                "tested": true
              },
              "certificates": {
                "done": true,
                "tested": true
              },
              "expirations": {
                "done": true,
                "tested": true
              },
              "partnerIntegration": {
                "done": true,
                "tested": true
              }
            },
            "files": [
              "src/models/MedicalExam.js",
              "src/routes/medicalRoutes.js",
              "public/js/modules/medical-dashboard.js"
            ],
            "tables": [
              "medical_exams",
              "medical_certificates"
            ],
            "knownIssues": [],
            "lastUpdated": "2025-01-10",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/MedicalLeave.js",
                  "lines": "1-150",
                  "description": "Modelo de licencias m√©dicas"
                },
                {
                  "file": "src/routes/medical.js",
                  "lines": "1-400",
                  "description": "CRUD licencias m√©dicas"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-empresa.html",
                  "lines": "8000-8500",
                  "description": "UI licencias m√©dicas"
                }
              ]
            },
            "documentation": {
              "status": "pending",
              "file": "docs/modules/MEDICAL-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "MEDICAL-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "MEDICAL-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "MEDICAL-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "MEDICAL-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "MEDICAL-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "MEDICAL-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "MEDICAL-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "MEDICAL-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "MEDICAL-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Multer",
                  "description": "Middleware para upload de archivos multipart/form-data",
                  "icon": "üìÅ"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                },
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Multer, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **Security**: JWT (JSON Web Tokens), bcrypt",
              "marketing": "Autenticaci√≥n segura sin comprometer velocidad. Seguridad bancaria para sus datos.",
              "detectedAt": "2025-11-24T17:16:21.209Z",
              "detectedCount": 9
            }
          },
          {
            "key": "legal",
            "name": "M√≥dulo Legal",
            "category": "ENTERPRISE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "files": [
              "src/models/LegalIssue.js",
              "src/routes/legalRoutes.js",
              "public/js/modules/legal-dashboard.js"
            ],
            "tables": [
              "legal_issues",
              "union_affiliations"
            ],
            "knownIssues": [],
            "lastUpdated": "2025-01-10",
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                },
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **Security**: JWT (JSON Web Tokens), bcrypt",
              "marketing": "Autenticaci√≥n segura sin comprometer velocidad. Seguridad bancaria para sus datos.",
              "detectedAt": "2025-11-24T17:16:21.215Z",
              "detectedCount": 8
            }
          },
          {
            "key": "vacation",
            "name": "M√≥dulo de Vacaciones",
            "category": "ENTERPRISE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "files": [
              "src/models/Vacation.js",
              "src/routes/vacationRoutes.js",
              "public/js/modules/vacation-management.js"
            ],
            "tables": [
              "vacations"
            ],
            "knownIssues": [],
            "lastUpdated": "2025-01-10",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/Vacation.js",
                  "lines": "1-200",
                  "description": "Modelo de vacaciones"
                },
                {
                  "file": "src/routes/vacation.js",
                  "lines": "1-500",
                  "description": "CRUD + aprobaciones vacaciones"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-empresa.html",
                  "lines": "9000-9500",
                  "description": "UI solicitudes vacaciones"
                }
              ]
            },
            "documentation": {
              "status": "pending",
              "file": "docs/modules/VACATION-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "VACATION-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "VACATION-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "VACATION-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "VACATION-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "VACATION-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "VACATION-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "VACATION-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "VACATION-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "VACATION-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.221Z",
              "detectedCount": 8
            }
          },
          {
            "key": "partners",
            "name": "Sistema de Asociados (Partners)",
            "category": "ENTERPRISE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "description": "M√©dicos, abogados, ingenieros, etc. que proveen servicios a empresas",
            "features": {
              "crud": {
                "done": true,
                "tested": true
              },
              "scoring": {
                "done": true,
                "tested": true
              },
              "invoicing": {
                "done": true,
                "tested": true
              },
              "notifications": {
                "done": true,
                "tested": true
              }
            },
            "files": [
              "src/models/Partner.js",
              "src/routes/partnerRoutes.js",
              "public/js/modules/partners-admin.js"
            ],
            "tables": [
              "partners",
              "partner_notifications",
              "partner_invoices"
            ],
            "knownIssues": [],
            "lastUpdated": "2025-01-10",
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.230Z",
              "detectedCount": 8
            }
          },
          {
            "key": "aiAssistant",
            "name": "Asistente IA con Ollama + Llama 3.1",
            "category": "ENTERPRISE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "description": "Chat flotante con RAG, auto-diagn√≥stico y knowledge base global",
            "features": {
              "ragSearch": {
                "done": true,
                "tested": true
              },
              "contextAware": {
                "done": true,
                "tested": true
              },
              "autoDiagnosis": {
                "done": true,
                "tested": true
              },
              "feedbackLoop": {
                "done": true,
                "tested": true
              },
              "globalKnowledgeBase": {
                "done": true,
                "tested": true
              },
              "multiTenantHistory": {
                "done": true,
                "tested": true
              }
            },
            "files": [
              "src/services/AssistantService.js",
              "src/routes/assistantRoutes.js",
              "public/js/modules/ai-assistant-chat.js"
            ],
            "tables": [
              "assistant_knowledge_base",
              "assistant_conversations"
            ],
            "technology": "Ollama + Llama 3.1 (8B) - Local LLM",
            "knownIssues": [
              "Ollama debe estar instalado y corriendo (localhost:11434)"
            ],
            "lastUpdated": "2025-01-19",
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.232Z",
              "detectedCount": 7
            }
          },
          {
            "key": "auditor",
            "name": "Sistema de Auditor√≠a y Auto-Diagn√≥stico Phase4",
            "category": "ENTERPRISE",
            "status": "PRODUCTION",
            "progress": 100,
            "phase": "PRODUCTION",
            "description": "Sistema completo de testing E2E automatizado con Playwright, auto-repair con Ollama, learning engine y orchestrator inteligente",
            "architecture": {
              "name": "Phase4 Testing System - Complete E2E Testing Framework",
              "version": "4.0.0",
              "description": "Sistema profesional de testing automatizado con capacidades de auto-reparaci√≥n, aprendizaje y coordinaci√≥n multi-m√≥dulo",
              "components": {
                "orchestrator": {
                  "name": "Phase4TestOrchestrator",
                  "file": "src/auditor/core/Phase4TestOrchestrator.js",
                  "description": "Orchestrator principal que coordina Playwright + PostgreSQL + WebSocket + Ollama",
                  "responsibilities": [
                    "Gesti√≥n del ciclo de vida completo (INIT ‚Üí TEST ‚Üí ANALYZE ‚Üí REPAIR ‚Üí COMPLETE)",
                    "Coordinaci√≥n de navegador, BD, IA y comunicaci√≥n con Claude Code",
                    "State machine con 5 fases y logging detallado",
                    "Manejo de errores y cleanup autom√°tico"
                  ],
                  "technologies": [
                    "Playwright (Chromium)",
                    "PostgreSQL",
                    "WebSocket (ws://localhost:8765)",
                    "Ollama"
                  ],
                  "status": "PRODUCTION"
                },
                "intelligentOrchestrator": {
                  "name": "IntelligentTestingOrchestrator",
                  "file": "src/auditor/core/IntelligentTestingOrchestrator.js",
                  "description": "Sistema de auto-registro de collectors y ejecuci√≥n inteligente de tests",
                  "responsibilities": [
                    "Auto-descubrimiento de collectors en src/auditor/collectors/",
                    "Registro din√°mico de m√≥dulos de testing",
                    "Ejecuci√≥n de tests por categor√≠a con manejo de errores",
                    "Integraci√≥n con Learning Engine"
                  ],
                  "collectors": [
                    "UsersModuleCollector - 15 tests (100% ‚úÖ)",
                    "AttendanceModuleCollector - 8 tests (100% ‚úÖ)",
                    "EmployeeProfileCollector",
                    "ReportsCollector",
                    "DepartmentsCollector",
                    "ShiftsCollector",
                    "BiometricDevicesCollector",
                    "MedicalDashboardCollector",
                    "KiosksCollector"
                  ],
                  "status": "PRODUCTION"
                },
                "collectors": {
                  "name": "Module-Specific Test Collectors",
                  "directory": "src/auditor/collectors/",
                  "description": "Collectors especializados por m√≥dulo, cada uno con tests E2E completos",
                  "baseClass": {
                    "name": "BaseModuleCollector",
                    "file": "src/auditor/collectors/BaseModuleCollector.js",
                    "provides": [
                      "clickElement() - Click seguro con retry",
                      "typeInInput() - Input typing con validaci√≥n",
                      "selectOption() - Select con verificaci√≥n",
                      "elementExists() - Detecci√≥n de elementos",
                      "createTestLog() - Logging a BD (audit_logs)"
                    ]
                  },
                  "implementations": {
                    "users": {
                      "file": "UsersModuleCollector.js",
                      "tests": 15,
                      "successRate": "100%",
                      "categories": [
                        "user_crud_create - Agregar usuario con modal completo",
                        "user_crud_update - Editar usuario existente",
                        "user_crud_delete - Eliminar usuario",
                        "user_search_real - B√∫squeda por DNI/nombre",
                        "user_filters_real - Filtros avanzados",
                        "user_pagination_real - Paginaci√≥n completa",
                        "user_export_import - Exportar CSV",
                        "user_shift_assignment - Asignar turnos",
                        "user_password_reset - Reset de password",
                        "user_permissions_roles - Gesti√≥n de roles",
                        "user_list_filters_legacy - Filtros legacy",
                        "user_permissions_legacy - Permisos legacy",
                        "user_search_legacy - B√∫squeda legacy",
                        "user_stats - Estad√≠sticas de usuarios",
                        "user_view_modal_tabs - Tabs del modal de ver usuario"
                      ],
                      "status": "COMPLETE"
                    },
                    "attendance": {
                      "file": "AttendanceModuleCollector.js",
                      "tests": 8,
                      "successRate": "100%",
                      "categories": [
                        "attendance_crud_create - Agregar asistencia manual",
                        "attendance_crud_update - Editar asistencia",
                        "attendance_crud_delete - Eliminar asistencia",
                        "attendance_search_real - B√∫squeda por empleado/fecha",
                        "attendance_filters_real - Filtros avanzados",
                        "attendance_pagination_real - Paginaci√≥n",
                        "attendance_export_import - Exportar CSV",
                        "attendance_stats - Estad√≠sticas de asistencia"
                      ],
                      "status": "COMPLETE",
                      "completedDate": "2025-11-21",
                      "changes": [
                        "‚úÖ attendance.js v6.0 creado con CRUD completo (pattern: users.js)",
                        "‚úÖ Modal #attendanceModal con formulario completo",
                        "‚úÖ Tabla #attendances-list con paginaci√≥n",
                        "‚úÖ Filtros #searchEmployee y #searchDate funcionales",
                        "‚úÖ Funciones: showAddAttendance(), loadAttendances(), exportAttendances()",
                        "‚úÖ 8/8 tests pasando (100% success rate)"
                      ]
                    }
                  }
                },
                "learningEngine": {
                  "name": "Learning Engine with Pattern Recognition",
                  "file": "src/auditor/core/LearningEngine.js",
                  "description": "Sistema de aprendizaje que captura patrones de error y soluciones exitosas",
                  "responsibilities": [
                    "An√°lisis de errores de console, page, network",
                    "Detecci√≥n de patrones recurrentes",
                    "Medici√≥n de performance (CPU, memoria, tiempos de respuesta)",
                    "Generaci√≥n de insights autom√°ticos",
                    "Almacenamiento en assistant_knowledge_base"
                  ],
                  "metrics": [
                    "errors_analyzed - Total de errores procesados",
                    "patterns_discovered - Patrones √∫nicos encontrados",
                    "edge_cases_found - Casos edge detectados",
                    "performance_insights - Optimizaciones sugeridas",
                    "repair_strategies_evaluated - Estrategias probadas"
                  ],
                  "status": "PRODUCTION"
                },
                "autonomousRepair": {
                  "name": "Autonomous Repair Agent with Ollama",
                  "file": "src/services/AutonomousRepairAgent.js",
                  "description": "Agente que usa Ollama (Llama 3.1) para analizar errores y generar tickets de reparaci√≥n",
                  "responsibilities": [
                    "An√°lisis profundo de errores con IA local",
                    "Generaci√≥n de tickets en formato Markdown",
                    "Comunicaci√≥n con Claude Code via WebSocket",
                    "Sugerencias de fixes basadas en UnifiedKnowledge",
                    "Evaluaci√≥n de confidence score (0-1)"
                  ],
                  "technologies": [
                    "Ollama",
                    "Llama 3.1 (8B)",
                    "UnifiedKnowledge",
                    "WebSocket"
                  ],
                  "ticketFormat": {
                    "directory": ".claude-repairs/",
                    "naming": "YYYYMMDD_HHMMSS_module_error.md",
                    "sections": [
                      "Error Summary",
                      "Root Cause",
                      "Suggested Fix",
                      "Related Code",
                      "Test Steps"
                    ]
                  },
                  "status": "PRODUCTION"
                },
                "technicalReporter": {
                  "name": "Technical Report Generator",
                  "file": "src/auditor/reporting/TechnicalReportGenerator.js",
                  "description": "Generador de reportes t√©cnicos profesionales en Markdown",
                  "responsibilities": [
                    "Compilaci√≥n de resultados de ejecuci√≥n",
                    "Generaci√≥n de reportes con gr√°ficos ASCII",
                    "Exportaci√≥n a Markdown y PDF",
                    "Historial de ejecuciones"
                  ],
                  "reportSections": [
                    "Executive Summary",
                    "Test Results by Module",
                    "Performance Metrics",
                    "Error Analysis",
                    "Recommendations"
                  ],
                  "status": "PRODUCTION"
                },
                "websocketBridge": {
                  "name": "Claude Code WebSocket Bridge",
                  "file": "src/services/ClaudeCodeWebSocketBridge.js",
                  "description": "Puente de comunicaci√≥n bidireccional con Claude Code",
                  "responsibilities": [
                    "Servidor WebSocket en ws://localhost:8765",
                    "Env√≠o de tickets de reparaci√≥n",
                    "Recepci√≥n de confirmaciones de Claude",
                    "File watcher para respuestas (*.response.md)",
                    "Modo simulado para testing sin Claude activo"
                  ],
                  "modes": [
                    "REAL",
                    "SIMULATED"
                  ],
                  "status": "PRODUCTION"
                }
              },
              "workflow": {
                "description": "Flujo completo de ejecuci√≥n de tests con auto-repair",
                "phases": [
                  {
                    "phase": "INIT",
                    "icon": "üöÄ",
                    "description": "Inicializaci√≥n del sistema",
                    "steps": [
                      "Conectar PostgreSQL",
                      "Iniciar Playwright (Chromium)",
                      "Conectar WebSocket Server",
                      "Verificar Ollama disponible",
                      "Cargar SystemRegistry y UnifiedKnowledge"
                    ]
                  },
                  {
                    "phase": "TEST",
                    "icon": "üß™",
                    "description": "Ejecuci√≥n de tests",
                    "steps": [
                      "Login en panel-empresa.html",
                      "Navegaci√≥n al m√≥dulo",
                      "Auto-registro de collectors",
                      "Ejecuci√≥n de tests por categor√≠a",
                      "Logging a audit_logs"
                    ]
                  },
                  {
                    "phase": "ANALYZE",
                    "icon": "üß†",
                    "description": "An√°lisis de errores con Ollama",
                    "steps": [
                      "Recolecci√≥n de errores (console, page, network)",
                      "An√°lisis con Ollama (Llama 3.1)",
                      "Clasificaci√≥n por severidad",
                      "Generaci√≥n de tickets Markdown"
                    ]
                  },
                  {
                    "phase": "REPAIR",
                    "icon": "üîß",
                    "description": "Auto-reparaci√≥n",
                    "steps": [
                      "Env√≠o de ticket via WebSocket",
                      "Claude Code aplica fix",
                      "Confirmaci√≥n de reparaci√≥n",
                      "Re-ejecuci√≥n de test (opcional)"
                    ]
                  },
                  {
                    "phase": "COMPLETE",
                    "icon": "üéâ",
                    "description": "Finalizaci√≥n y cleanup",
                    "steps": [
                      "Cerrar navegador",
                      "Desconectar BD",
                      "Cerrar WebSocket",
                      "Exportar logs a JSON",
                      "Generar reporte t√©cnico"
                    ]
                  }
                ]
              },
              "testingPattern": {
                "description": "Patr√≥n est√°ndar para testing de m√≥dulos",
                "basePattern": "UsersModuleCollector (15 tests - REFERENCE)",
                "steps": [
                  "1. Crear attendance.js v6.0 con CRUD completo (pattern: users.js)",
                  "2. Funciones principales: showAdd(), load(), export(), stats()",
                  "3. Modal con formulario completo",
                  "4. Tabla con paginaci√≥n y filtros",
                  "5. Tests: CREATE, UPDATE, DELETE, SEARCH, FILTERS, PAGINATION, EXPORT, STATS"
                ],
                "coverage": [
                  "CRUD completo (Create, Read, Update, Delete)",
                  "B√∫squeda y filtros avanzados",
                  "Paginaci√≥n funcional",
                  "Exportaci√≥n de datos",
                  "Estad√≠sticas en tiempo real"
                ]
              }
            },
            "technologyStack": {
              "description": "Stack tecnol√≥gico completo usado por Phase4 Testing System",
              "version": "1.0.0",
              "lastUpdated": "2025-11-22",
              "technologies": {
                "playwright": {
                  "name": "Playwright",
                  "version": "^1.40.0",
                  "type": "Browser Automation & E2E Testing",
                  "website": "https://playwright.dev",
                  "license": "Apache 2.0",
                  "description": "Framework de Microsoft para automatizaci√≥n y testing E2E de aplicaciones web. Proporciona control completo del navegador a trav√©s de CDP (Chrome DevTools Protocol).",
                  "usedFor": [
                    "Automatizaci√≥n de navegador (Chromium, Firefox, WebKit)",
                    "Testing E2E real de m√≥dulos del panel-empresa",
                    "Captura de screenshots y videos de ejecuciones",
                    "Interceptaci√≥n de network requests",
                    "Console logs y error tracking",
                    "Manipulaci√≥n del DOM para testing"
                  ],
                  "keyFeatures": [
                    "Auto-waiting: Espera autom√°tica de elementos antes de interactuar",
                    "Headless mode: Ejecuci√≥n sin GUI para CI/CD",
                    "Multi-browser: Soporta Chromium, Firefox, WebKit",
                    "Network interception: Mockear APIs y analizar requests",
                    "Selectors resilientes: xpath, css, text, data-testid",
                    "Parallel execution: Tests en paralelo para velocidad",
                    "Debugging tools: Inspector visual, trace viewer",
                    "Emulaci√≥n de dispositivos: Mobile, tablet, desktop"
                  ],
                  "integration": {
                    "entryPoint": "Phase4TestOrchestrator.js (l√≠nea 45)",
                    "initialization": "await playwright.chromium.launch({ headless: false })",
                    "configuration": {
                      "headless": false,
                      "slowMo": 100,
                      "viewport": {
                        "width": 1920,
                        "height": 1080
                      },
                      "timeout": 30000
                    },
                    "collectors": [
                      "UsersModuleCollector - 15 tests",
                      "AttendanceModuleCollector - 8 tests",
                      "Todos los collectors heredan de BaseModuleCollector"
                    ]
                  },
                  "whyChosen": [
                    "‚úÖ M√°s moderno que Selenium (2020 vs 2004)",
                    "‚úÖ Auto-waiting elimina flakiness de tests",
                    "‚úÖ Multi-browser nativo (no drivers externos)",
                    "‚úÖ Excelente performance (Chrome DevTools Protocol directo)",
                    "‚úÖ Trace viewer integrado para debugging",
                    "‚úÖ Activamente mantenido por Microsoft"
                  ],
                  "examples": [
                    "await page.goto('http://localhost:9997/panel-empresa.html')",
                    "await page.click('#users')",
                    "await page.fill('#name', 'Juan P√©rez')",
                    "await page.waitForSelector('#users-list')",
                    "await page.screenshot({ path: 'screenshot.png' })"
                  ],
                  "documentation": "https://playwright.dev/docs/intro",
                  "status": "PRODUCTION"
                },
                "ollama": {
                  "name": "Ollama + Llama 3.1 (8B)",
                  "version": "Ollama v0.1.17 + Llama 3.1 8B",
                  "type": "Local AI / Large Language Model",
                  "website": "https://ollama.com",
                  "license": "MIT (Ollama) / Meta License (Llama 3.1)",
                  "description": "Plataforma para ejecutar LLMs localmente sin internet. Usamos Llama 3.1 (8B par√°metros) de Meta para an√°lisis inteligente de errores y generaci√≥n de tickets de reparaci√≥n.",
                  "usedFor": [
                    "An√°lisis inteligente de errores de testing",
                    "Clasificaci√≥n autom√°tica por severidad (critical, high, medium, low)",
                    "Generaci√≥n de tickets de reparaci√≥n en Markdown",
                    "Sugerencias de c√≥digo para fixes",
                    "An√°lisis de patrones de error recurrentes",
                    "Evaluaci√≥n de confidence score (qu√© tan seguro est√° el fix)"
                  ],
                  "keyFeatures": [
                    "100% local: No env√≠a datos a la nube, cero costo mensual",
                    "Privacidad total: C√≥digo y errores nunca salen del servidor",
                    "Latencia baja: ~2-5 segundos por an√°lisis (8B model)",
                    "Context window: 8K tokens (suficiente para errores + stack traces)",
                    "Streaming: Respuestas en tiempo real token por token",
                    "Multi-modal: Texto + c√≥digo (no im√°genes en 8B)",
                    "Fine-tuning ready: Puede entrenarse con errores espec√≠ficos del proyecto"
                  ],
                  "integration": {
                    "entryPoint": "AutonomousRepairAgent.js (l√≠nea 28)",
                    "endpoint": "http://localhost:11434/api/generate",
                    "model": "llama3.1:8b",
                    "configuration": {
                      "temperature": 0.7,
                      "maxTokens": 500,
                      "timeout": 30000,
                      "stream": false
                    },
                    "workflow": [
                      "1. LearningEngine captura error + context",
                      "2. AutonomousRepairAgent construye prompt",
                      "3. Ollama analiza y genera ticket Markdown",
                      "4. Ticket se env√≠a a Claude Code via WebSocket",
                      "5. Claude Code aplica fix sugerido"
                    ]
                  },
                  "promptEngineering": {
                    "systemPrompt": "Eres un experto en debugging de aplicaciones Node.js + PostgreSQL + JavaScript vanilla. Analiza errores y sugiere fixes concretos.",
                    "userPromptTemplate": [
                      "## Error Detected:",
                      "Type: {errorType}",
                      "Message: {errorMessage}",
                      "Stack: {errorStack}",
                      "",
                      "## Module Context:",
                      "Module: {moduleName}",
                      "Test: {testName}",
                      "",
                      "## Generate:",
                      "1. Root cause analysis",
                      "2. Suggested fix with code example",
                      "3. Test steps to verify fix"
                    ]
                  },
                  "whyChosen": [
                    "‚úÖ $0/mes (vs OpenAI GPT-4: $20-200/mes)",
                    "‚úÖ 100% privado (c√≥digo sensible no sale del servidor)",
                    "‚úÖ Sin rate limits (OpenAI: 10-60 req/min)",
                    "‚úÖ Funciona offline (sin internet)",
                    "‚úÖ Llama 3.1 8B suficiente para an√°lisis de c√≥digo",
                    "‚úÖ F√°cil instalaci√≥n (1 comando: ollama pull llama3.1:8b)"
                  ],
                  "modelComparison": {
                    "llama3.1:8b": {
                      "parameters": "8 billion",
                      "size": "4.7 GB",
                      "ram": "8 GB m√≠nimo",
                      "speed": "~40 tokens/s en CPU i7",
                      "quality": "Excelente para c√≥digo y debugging",
                      "recommended": true
                    },
                    "llama3.1:70b": {
                      "parameters": "70 billion",
                      "size": "40 GB",
                      "ram": "64 GB m√≠nimo",
                      "speed": "~5 tokens/s en CPU",
                      "quality": "Superior, pero overkill para este caso",
                      "recommended": false
                    }
                  },
                  "examples": [
                    "curl http://localhost:11434/api/generate -d '{\"model\":\"llama3.1:8b\",\"prompt\":\"Analiza este error...\",\"stream\":false}'",
                    "const response = await axios.post('http://localhost:11434/api/generate', { model: 'llama3.1:8b', prompt, stream: false })"
                  ],
                  "installation": [
                    "1. Descargar OllamaSetup.exe desde ollama.com",
                    "2. Instalar (requiere admin)",
                    "3. ollama pull llama3.1:8b (descarga ~4.7 GB)",
                    "4. ollama run llama3.1:8b para probar",
                    "5. Verificar: curl http://localhost:11434/api/tags"
                  ],
                  "documentation": "https://ollama.com/library/llama3.1",
                  "status": "PRODUCTION"
                },
                "websocket": {
                  "name": "WebSocket Bridge (ws library)",
                  "version": "^8.13.0",
                  "type": "Real-time Bidirectional Communication",
                  "website": "https://github.com/websockets/ws",
                  "license": "MIT",
                  "description": "Librer√≠a WebSocket para Node.js que permite comunicaci√≥n bidireccional en tiempo real entre Phase4 Testing System y Claude Code.",
                  "usedFor": [
                    "Env√≠o de tickets de reparaci√≥n a Claude Code",
                    "Recepci√≥n de confirmaciones de fixes aplicados",
                    "Streaming de logs en tiempo real",
                    "File watcher para detectar respuestas (*.response.md)",
                    "Modo simulado para testing sin Claude activo"
                  ],
                  "keyFeatures": [
                    "Full-duplex: Comunicaci√≥n bidireccional simult√°nea",
                    "Low latency: <10ms t√≠pico en localhost",
                    "Persistent connection: No overhead de HTTP headers",
                    "Event-driven: on('message'), on('close'), on('error')",
                    "Binary + Text: Soporta JSON y archivos binarios",
                    "Heartbeat: Ping/pong autom√°tico para detectar conexi√≥n ca√≠da"
                  ],
                  "integration": {
                    "entryPoint": "ClaudeCodeWebSocketBridge.js",
                    "server": "ws://localhost:8765",
                    "configuration": {
                      "port": 8765,
                      "perMessageDeflate": false,
                      "clientTracking": true,
                      "pingInterval": 30000
                    },
                    "messageTypes": [
                      "repair_ticket - Enviar ticket de reparaci√≥n",
                      "repair_confirmation - Confirmar fix aplicado",
                      "log_stream - Streaming de logs",
                      "health_check - Verificar conexi√≥n"
                    ]
                  },
                  "protocol": {
                    "messageFormat": {
                      "type": "repair_ticket",
                      "data": {
                        "ticketId": "20250122_143052_users_error",
                        "severity": "high",
                        "module": "users",
                        "error": "...",
                        "suggestedFix": "...",
                        "confidence": 0.85
                      }
                    },
                    "handshake": [
                      "1. Phase4 inicia servidor WebSocket en :8765",
                      "2. Claude Code conecta como cliente",
                      "3. Handshake HTTP ‚Üí Upgrade a WebSocket",
                      "4. Conexi√≥n persistente establecida"
                    ]
                  },
                  "whyChosen": [
                    "‚úÖ M√°s r√°pido que HTTP polling (no overhead)",
                    "‚úÖ Bidireccional (Claude Code puede preguntar back)",
                    "‚úÖ Real-time (tickets llegan instant√°neamente)",
                    "‚úÖ Librer√≠a ws es la m√°s popular (14M downloads/week)",
                    "‚úÖ Simple y confiable"
                  ],
                  "fileWatcher": {
                    "directory": ".claude-repairs/",
                    "pattern": "*.response.md",
                    "action": "Cuando Claude Code aplica un fix, crea archivo *.response.md confirmando el cambio",
                    "polling": "chokidar library cada 500ms"
                  },
                  "examples": [
                    "const wss = new WebSocketServer({ port: 8765 })",
                    "wss.on('connection', (ws) => { ws.send(JSON.stringify({ type: 'repair_ticket', data })) })",
                    "ws.on('message', (msg) => { const parsed = JSON.parse(msg); console.log(parsed) })"
                  ],
                  "documentation": "https://github.com/websockets/ws",
                  "status": "PRODUCTION"
                },
                "postgresql": {
                  "name": "PostgreSQL",
                  "version": "13.x - 16.x",
                  "type": "Relational Database",
                  "website": "https://www.postgresql.org",
                  "license": "PostgreSQL License (similar a MIT)",
                  "description": "Base de datos relacional avanzada usada para almacenar resultados de tests, logs de auditor√≠a, knowledge base y configuraci√≥n del sistema.",
                  "usedFor": [
                    "Tabla audit_logs: Resultados de tests (passed/failed/warnings)",
                    "Tabla assistant_knowledge_base: Aprendizaje acumulativo de errores",
                    "Tabla assistant_conversations: Historial de interacciones",
                    "Funciones SQL: get_execution_summary(), get_module_health()",
                    "Agregaciones complejas de estad√≠sticas de testing"
                  ],
                  "keyFeatures": [
                    "ACID compliant: Transacciones confiables",
                    "JSON/JSONB: Almacenamiento de metadata flexible",
                    "Full-text search: B√∫squeda de errores similares",
                    "Window functions: C√°lculos de tendencias de tests",
                    "Stored procedures: L√≥gica de an√°lisis en BD",
                    "Multi-tenant: Isolaci√≥n por company_id",
                    "Performance: Indexes en module_name, execution_id, status"
                  ],
                  "integration": {
                    "orm": "Sequelize 6.x",
                    "connection": "postgresql://user:pass@localhost:5432/biometric_db",
                    "models": [
                      "AuditLog - Resultados de tests",
                      "AssistantKnowledgeBase - Patrones aprendidos",
                      "AssistantConversation - Historial"
                    ],
                    "migrations": [
                      "20250119_create_audit_logs.sql",
                      "20250119_create_assistant_knowledge_base.sql",
                      "20250120_make_knowledge_base_global.sql"
                    ]
                  },
                  "schema": {
                    "audit_logs": {
                      "columns": [
                        "id (UUID PK)",
                        "execution_id (UUID) - Agrupa tests de una ejecuci√≥n",
                        "company_id (FK)",
                        "module_name (VARCHAR)",
                        "test_type (endpoint|database|integration|e2e|performance)",
                        "test_name (VARCHAR)",
                        "status (pending|running|passed|failed|warning|fixed)",
                        "error_type, error_message, error_stack (TEXT)",
                        "fix_attempted (BOOLEAN)",
                        "fix_strategy, fix_applied (JSONB)",
                        "performance_metrics (JSONB)",
                        "created_at, updated_at (TIMESTAMP)"
                      ],
                      "indexes": [
                        "idx_audit_logs_execution_id",
                        "idx_audit_logs_module_status",
                        "idx_audit_logs_company_id"
                      ]
                    }
                  },
                  "sqlFunctions": {
                    "get_execution_summary": {
                      "params": "execution_id UUID",
                      "returns": "JSON",
                      "description": "Resumen de tests passed/failed/warnings de una ejecuci√≥n",
                      "example": "SELECT get_execution_summary('uuid-here')"
                    },
                    "get_module_health": {
                      "params": "module_name VARCHAR",
                      "returns": "INTEGER (0-100)",
                      "description": "Health score del m√≥dulo basado en √∫ltimas 100 ejecuciones",
                      "example": "SELECT get_module_health('users')"
                    }
                  },
                  "whyChosen": [
                    "‚úÖ Open source y gratuito",
                    "‚úÖ M√°s potente que MySQL para agregaciones complejas",
                    "‚úÖ JSONB nativo para metadata flexible",
                    "‚úÖ Full-text search para buscar errores similares",
                    "‚úÖ Stored procedures para l√≥gica compleja",
                    "‚úÖ Excelente ecosistema (pgAdmin, DBeaver)"
                  ],
                  "documentation": "https://www.postgresql.org/docs/",
                  "status": "PRODUCTION"
                },
                "sequelize": {
                  "name": "Sequelize ORM",
                  "version": "^6.32.0",
                  "type": "Object-Relational Mapping (ORM)",
                  "website": "https://sequelize.org",
                  "license": "MIT",
                  "description": "ORM moderno para Node.js que facilita interacci√≥n con PostgreSQL usando JavaScript/TypeScript en lugar de SQL crudo.",
                  "usedFor": [
                    "Modelos: AuditLog, AssistantKnowledgeBase, AssistantConversation",
                    "Migrations: Versionado de schema de BD",
                    "Queries: findAll(), findOne(), create(), update(), destroy()",
                    "Relaciones: belongsTo(), hasMany() entre tablas",
                    "Transacciones: Rollback autom√°tico en caso de error",
                    "Validaciones: Email, required, unique, max length"
                  ],
                  "keyFeatures": [
                    "Promise-based: async/await nativo",
                    "Multi-dialect: PostgreSQL, MySQL, SQLite, MSSQL",
                    "Migrations: Schema versioning con rollback",
                    "Associations: 1:1, 1:N, N:M autom√°ticas",
                    "Hooks: beforeCreate, afterUpdate, etc.",
                    "Scopes: Filtros reutilizables (active, byCompany)",
                    "Raw queries: Escape hatch para SQL complejo"
                  ],
                  "integration": {
                    "entryPoint": "src/config/database.js",
                    "initialization": "const sequelize = new Sequelize(DATABASE_URL, { dialect: 'postgres' })",
                    "models": [
                      "src/models/AuditLog.js",
                      "src/models/AssistantKnowledgeBase.js",
                      "src/models/AssistantConversation.js"
                    ]
                  },
                  "examples": [
                    "const log = await AuditLog.create({ module_name: 'users', status: 'passed' })",
                    "const results = await AuditLog.findAll({ where: { execution_id: 'uuid' } })",
                    "await log.update({ status: 'fixed' })",
                    "const summary = await sequelize.query('SELECT get_execution_summary(?)', { replacements: [executionId] })"
                  ],
                  "whyChosen": [
                    "‚úÖ ORM m√°s popular para Node.js (22K stars GitHub)",
                    "‚úÖ Migrations integradas (no Flyway/Liquibase separado)",
                    "‚úÖ TypeScript support nativo",
                    "‚úÖ Excelente documentaci√≥n y comunidad",
                    "‚úÖ Hooks √∫tiles para audit logs autom√°ticos"
                  ],
                  "documentation": "https://sequelize.org/docs/v6/",
                  "status": "PRODUCTION"
                },
                "fakerjs": {
                  "name": "Faker.js (espa√±ol)",
                  "version": "@faker-js/faker ^8.0.0",
                  "type": "Test Data Generation",
                  "website": "https://fakerjs.dev",
                  "license": "MIT",
                  "description": "Librer√≠a para generar datos de prueba realistas (usuarios, emails, tel√©fonos, DNIs, fechas) en espa√±ol para testing.",
                  "usedFor": [
                    "UniversalSeeder: Generar usuarios fake para QA",
                    "AttendanceSeeder: Crear registros de asistencia",
                    "MedicalSeeder: Licencias m√©dicas fake",
                    "VacationSeeder: Vacaciones realistas",
                    "Datos coherentes: emails coinciden con nombres"
                  ],
                  "keyFeatures": [
                    "Localization: faker.locale = 'es' (nombres, ciudades argentinas)",
                    "Deterministic: faker.seed(123) para datos reproducibles",
                    "Rich types: person, internet, date, phone, commerce",
                    "Realistic: DNIs v√°lidos, emails reales, tel√©fonos argentinos",
                    "Relationships: Puede generar datos relacionados coherentemente"
                  ],
                  "integration": {
                    "entryPoint": "src/auditor/seeders/UniversalSeeder.js",
                    "configuration": {
                      "locale": "es",
                      "seed": null
                    },
                    "usage": [
                      "faker.person.fullName() ‚Üí 'Juan P√©rez'",
                      "faker.internet.email() ‚Üí 'juan.perez@example.com'",
                      "faker.phone.number() ‚Üí '+54 11 1234-5678'",
                      "faker.date.past() ‚Üí fecha pasada aleatoria"
                    ]
                  },
                  "examples": [
                    "const name = faker.person.fullName()",
                    "const email = faker.internet.email({ firstName: name.split(' ')[0] })",
                    "const dni = faker.string.numeric(8)",
                    "const birthdate = faker.date.between({ from: '1970-01-01', to: '2000-12-31' })"
                  ],
                  "whyChosen": [
                    "‚úÖ Datos m√°s realistas que 'User 1', 'User 2'",
                    "‚úÖ Localizaci√≥n espa√±ol (nombres argentinos)",
                    "‚úÖ Reproducible con seed (mismo data cada vez)",
                    "‚úÖ 60+ categor√≠as de datos (address, company, finance)",
                    "‚úÖ Activamente mantenido (fork del Faker original)"
                  ],
                  "documentation": "https://fakerjs.dev/guide/",
                  "status": "PRODUCTION"
                },
                "nodejs": {
                  "name": "Node.js",
                  "version": "18.x - 20.x LTS",
                  "type": "JavaScript Runtime",
                  "website": "https://nodejs.org",
                  "license": "MIT",
                  "description": "Runtime de JavaScript basado en V8 de Chrome que permite ejecutar JavaScript en el servidor. Base de todo el backend del sistema.",
                  "usedFor": [
                    "Ejecutar todo el backend (Express.js)",
                    "Orchestrator de Phase4 (event loop as√≠ncrono)",
                    "Scripts de testing (test-phase4-*.js)",
                    "Comunicaci√≥n con Playwright, Ollama, PostgreSQL",
                    "WebSocket server",
                    "File system operations (fs, path)"
                  ],
                  "keyFeatures": [
                    "Event-driven: Non-blocking I/O para alta concurrencia",
                    "Single-threaded: Event loop eficiente",
                    "NPM ecosystem: 2M+ paquetes disponibles",
                    "ES Modules: import/export modernos",
                    "Async/Await: Promises nativas",
                    "Streams: Procesar archivos grandes eficientemente",
                    "Child processes: Ejecutar comandos de sistema"
                  ],
                  "integration": {
                    "entryPoint": "test-phase4-attendance.js",
                    "version": "process.version",
                    "modules": [
                      "fs/promises - File system async",
                      "path - Path manipulation",
                      "child_process - Ejecutar comandos",
                      "os - Info del sistema",
                      "events - EventEmitter"
                    ]
                  },
                  "whyChosen": [
                    "‚úÖ Mismo lenguaje frontend/backend (JavaScript)",
                    "‚úÖ Excelente para I/O intensivo (Playwright, DB, WebSocket)",
                    "‚úÖ NPM tiene todas las librer√≠as necesarias",
                    "‚úÖ Fast (V8 JIT compiler)",
                    "‚úÖ Gran comunidad y soporte"
                  ],
                  "documentation": "https://nodejs.org/docs/latest-v20.x/api/",
                  "status": "PRODUCTION"
                },
                "markdown": {
                  "name": "Markdown + TechnicalReportGenerator",
                  "version": "Custom + marked library",
                  "type": "Documentation & Reporting",
                  "description": "Formato de documentaci√≥n para tickets de reparaci√≥n y reportes t√©cnicos",
                  "usedFor": [
                    "Tickets de reparaci√≥n (.claude-repairs/*.md)",
                    "Reportes t√©cnicos de ejecuciones",
                    "Documentaci√≥n autom√°tica de errores",
                    "ASCII graphs en reportes"
                  ],
                  "features": [
                    "Human-readable: Claude Code puede leer directamente",
                    "Version control friendly: Git diff legible",
                    "Syntax highlighting: Code blocks con lenguaje",
                    "Export to PDF: TechnicalReportGenerator ‚Üí PDF"
                  ],
                  "status": "PRODUCTION"
                }
              },
              "integrationFlow": {
                "description": "C√≥mo todas las tecnolog√≠as trabajan juntas",
                "steps": [
                  {
                    "step": 1,
                    "description": "Node.js ejecuta test-phase4-users.js",
                    "technologies": [
                      "Node.js"
                    ]
                  },
                  {
                    "step": 2,
                    "description": "Phase4TestOrchestrator conecta PostgreSQL + Playwright + WebSocket + Ollama",
                    "technologies": [
                      "Node.js",
                      "Sequelize",
                      "Playwright",
                      "WebSocket",
                      "Ollama"
                    ]
                  },
                  {
                    "step": 3,
                    "description": "Playwright abre navegador y ejecuta tests E2E",
                    "technologies": [
                      "Playwright",
                      "Chromium"
                    ]
                  },
                  {
                    "step": 4,
                    "description": "UsersModuleCollector ejecuta 15 tests con Faker.js data",
                    "technologies": [
                      "Playwright",
                      "Faker.js"
                    ]
                  },
                  {
                    "step": 5,
                    "description": "Resultados se guardan en PostgreSQL via Sequelize",
                    "technologies": [
                      "Sequelize",
                      "PostgreSQL"
                    ]
                  },
                  {
                    "step": 6,
                    "description": "Si hay error, LearningEngine lo analiza",
                    "technologies": [
                      "Node.js",
                      "PostgreSQL"
                    ]
                  },
                  {
                    "step": 7,
                    "description": "AutonomousRepairAgent env√≠a error a Ollama para an√°lisis",
                    "technologies": [
                      "Ollama",
                      "Llama 3.1"
                    ]
                  },
                  {
                    "step": 8,
                    "description": "Ollama genera ticket Markdown con fix sugerido",
                    "technologies": [
                      "Ollama",
                      "Markdown"
                    ]
                  },
                  {
                    "step": 9,
                    "description": "Ticket se env√≠a a Claude Code via WebSocket",
                    "technologies": [
                      "WebSocket"
                    ]
                  },
                  {
                    "step": 10,
                    "description": "Claude Code aplica fix y confirma via *.response.md",
                    "technologies": [
                      "Node.js",
                      "File System"
                    ]
                  },
                  {
                    "step": 11,
                    "description": "TechnicalReportGenerator crea reporte final",
                    "technologies": [
                      "Markdown",
                      "Node.js"
                    ]
                  }
                ]
              },
              "systemRequirements": {
                "minimum": {
                  "os": "Windows 10/11, macOS 12+, Linux (Ubuntu 20.04+)",
                  "cpu": "Intel Core i5 / AMD Ryzen 5 (4 cores)",
                  "ram": "8 GB",
                  "disk": "10 GB free (5 GB Ollama model + 5 GB Chrome)",
                  "node": "18.x LTS",
                  "postgresql": "13.x"
                },
                "recommended": {
                  "os": "Windows 11, macOS 14+, Linux (Ubuntu 22.04+)",
                  "cpu": "Intel Core i7 / AMD Ryzen 7 (8 cores)",
                  "ram": "16 GB",
                  "disk": "20 GB free SSD",
                  "node": "20.x LTS",
                  "postgresql": "15.x"
                },
                "ports": {
                  "backend": 9997,
                  "websocket": 8765,
                  "ollama": 11434,
                  "postgresql": 5432
                }
              },
              "costAnalysis": {
                "totalCost": "$0/mes (100% gratuito)",
                "breakdown": {
                  "playwright": "$0 (MIT license)",
                  "ollama": "$0 (MIT license, modelo local)",
                  "postgresql": "$0 (open source)",
                  "sequelize": "$0 (MIT license)",
                  "fakerjs": "$0 (MIT license)",
                  "websocket": "$0 (MIT license)",
                  "nodejs": "$0 (MIT license)"
                },
                "comparison": {
                  "Phase4 (local)": "$0/mes",
                  "GitHub Copilot": "$10/mes",
                  "OpenAI GPT-4 API": "$20-200/mes",
                  "Cypress Cloud": "$75/mes",
                  "BrowserStack": "$29-299/mes"
                },
                "savings": "~$150-500/mes vs soluciones cloud"
              },
              "installationGuide": {
                "description": "Gu√≠a completa de instalaci√≥n de todas las tecnolog√≠as",
                "estimatedTime": "30-60 minutos",
                "steps": [
                  {
                    "step": 1,
                    "name": "Instalar Node.js",
                    "commands": [
                      "# Descargar de nodejs.org",
                      "# Windows: NodeJS-20.x-x64.msi",
                      "# Verificar: node --version && npm --version"
                    ],
                    "time": "5 min"
                  },
                  {
                    "step": 2,
                    "name": "Instalar PostgreSQL",
                    "commands": [
                      "# Descargar de postgresql.org",
                      "# Windows: postgresql-15.x-windows-x64.exe",
                      "# Configurar password para user 'postgres'",
                      "# Verificar: psql --version"
                    ],
                    "time": "10 min"
                  },
                  {
                    "step": 3,
                    "name": "Clonar repositorio e instalar dependencias",
                    "commands": [
                      "git clone <repo>",
                      "cd backend",
                      "npm install",
                      "# Instala Playwright, Sequelize, ws, Faker, etc."
                    ],
                    "time": "5 min"
                  },
                  {
                    "step": 4,
                    "name": "Instalar browsers de Playwright",
                    "commands": [
                      "npx playwright install chromium",
                      "# Descarga ~400 MB de Chromium"
                    ],
                    "time": "5 min"
                  },
                  {
                    "step": 5,
                    "name": "Instalar Ollama",
                    "commands": [
                      "# Windows: Descargar OllamaSetup.exe de ollama.com",
                      "# Ejecutar instalador (requiere admin)",
                      "# Verificar: ollama --version"
                    ],
                    "time": "2 min"
                  },
                  {
                    "step": 6,
                    "name": "Descargar modelo Llama 3.1",
                    "commands": [
                      "ollama pull llama3.1:8b",
                      "# Descarga ~4.7 GB",
                      "# Verificar: curl http://localhost:11434/api/tags"
                    ],
                    "time": "15-30 min (depende de internet)"
                  },
                  {
                    "step": 7,
                    "name": "Configurar .env",
                    "commands": [
                      "cp .env.example .env",
                      "# Configurar DATABASE_URL, OLLAMA_BASE_URL, etc."
                    ],
                    "time": "2 min"
                  },
                  {
                    "step": 8,
                    "name": "Ejecutar migraciones",
                    "commands": [
                      "node scripts/run-migrations.js",
                      "# Crea tablas audit_logs, assistant_knowledge_base, etc."
                    ],
                    "time": "1 min"
                  },
                  {
                    "step": 9,
                    "name": "Verificar instalaci√≥n",
                    "commands": [
                      "node test-phase4-users.js",
                      "# Si todo OK, ver√°s tests ejecut√°ndose"
                    ],
                    "time": "2-5 min"
                  }
                ]
              }
            },
            "features": {
              "autoTesting": {
                "done": true,
                "tested": true
              },
              "autoHealing": {
                "done": true,
                "tested": true
              },
              "dataSeeding": {
                "done": true,
                "tested": true
              },
              "dependencyAnalysis": {
                "done": true,
                "tested": true
              },
              "moduleRegistry": {
                "done": true,
                "tested": true
              },
              "e2eTesting": {
                "done": true,
                "tested": true
              },
              "playwrightIntegration": {
                "done": true,
                "tested": true
              },
              "ollamaAI": {
                "done": true,
                "tested": true
              },
              "websocketBridge": {
                "done": true,
                "tested": true
              },
              "learningEngine": {
                "done": true,
                "tested": true
              },
              "autonomousRepair": {
                "done": true,
                "tested": true
              }
            },
            "files": [
              "src/auditor/core/AuditorEngine.js",
              "src/auditor/core/Phase4TestOrchestrator.js",
              "src/auditor/core/IntelligentTestingOrchestrator.js",
              "src/auditor/core/LearningEngine.js",
              "src/auditor/collectors/BaseModuleCollector.js",
              "src/auditor/collectors/UsersModuleCollector.js",
              "src/auditor/collectors/AttendanceModuleCollector.js",
              "src/auditor/collectors/EmployeeProfileCollector.js",
              "src/auditor/collectors/ReportsCollector.js",
              "src/auditor/collectors/DepartmentsCollector.js",
              "src/auditor/collectors/ShiftsCollector.js",
              "src/auditor/collectors/BiometricDevicesCollector.js",
              "src/auditor/collectors/MedicalDashboardCollector.js",
              "src/auditor/collectors/KiosksCollector.js",
              "src/auditor/healers/HybridHealer.js",
              "src/auditor/seeders/UniversalSeeder.js",
              "src/auditor/reporting/TechnicalReportGenerator.js",
              "src/services/AutonomousRepairAgent.js",
              "src/services/ClaudeCodeWebSocketBridge.js",
              "public/js/modules/auditor-dashboard.js",
              "test-phase4-attendance.js",
              "test-phase4-users.js"
            ],
            "tables": [
              "audit_logs"
            ],
            "apiEndpoints": [
              "POST /api/phase4/start - Iniciar test integrado",
              "GET /api/phase4/status/:executionId - Estado de ejecuci√≥n",
              "GET /api/phase4/logs/:executionId - Logs en tiempo real",
              "POST /api/phase4/stop/:executionId - Detener test",
              "GET /api/phase4/active - Listar tests activos",
              "GET /api/phase4/health - Health check (Ollama, WebSocket, PostgreSQL)"
            ],
            "usage": {
              "commandLine": "node test-phase4-attendance.js",
              "api": "POST /api/phase4/start",
              "dashboard": "Panel Administrativo ‚Üí Tab Herramientas"
            },
            "knownIssues": [],
            "fixesApplied": [
              {
                "date": "2025-11-22",
                "description": "Fixes cr√≠ticos en Phase4 Testing System para eliminar errores de constraint y undefined",
                "files": [
                  "src/auditor/collectors/BaseModuleCollector.js:191 - Agregado company_id a AuditLog.create()",
                  "src/services/ClaudeCodeWebSocketBridge.js:113-122 - Verificaci√≥n defensiva de ticket.test",
                  "src/auditor/core/OllamaAnalyzer.js:418-423 - Verificaci√≥n defensiva de err.error"
                ],
                "issuesResolved": [
                  "el valor nulo en la columna ¬´company_id¬ª de la relaci√≥n ¬´audit_test_logs¬ª viola la restricci√≥n de no nulo",
                  "Cannot read properties of undefined (reading 'toLowerCase')",
                  "Cannot read properties of undefined (reading 'module')"
                ],
                "testResults": {
                  "executionId": "phase4-1763831469551",
                  "date": "2025-11-22T17:11:09Z",
                  "passed": true,
                  "details": [
                    "‚úÖ AuditLog creado con company_id correctamente (company_id: 11)",
                    "‚úÖ Sin errores de constraint NOT NULL en audit_test_logs",
                    "‚úÖ Sin errores de toLowerCase con undefined",
                    "‚úÖ Sin errores de ticket.test undefined",
                    "‚ö†Ô∏è M√≥dulo users no carga (problema de frontend, no de Phase4)"
                  ]
                }
              }
            ],
            "lastUpdated": "2025-11-21",
            "nextSteps": [
              "Completar collectors para m√≥dulos restantes (Departments, Shifts, etc.)",
              "Implementar re-ejecuci√≥n autom√°tica de tests fallidos",
              "Dashboard visual de ejecuciones en tiempo real",
              "Integraci√≥n con CI/CD (GitHub Actions)"
            ],
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [
                {
                  "name": "Chart.js",
                  "description": "Gr√°ficos interactivos HTML5",
                  "icon": "üìä"
                }
              ],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [
                {
                  "name": "Ollama (Llama 3.1)",
                  "description": "LLM local para asistencia inteligente",
                  "icon": "üß†"
                }
              ],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [
                {
                  "name": "Socket.IO",
                  "description": "Biblioteca para comunicaci√≥n en tiempo real bidireccional",
                  "icon": "‚ö°"
                }
              ],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Frontend**: Chart.js | **Database**: Sequelize ORM, PostgreSQL | **AI/ML**: Ollama (Llama 3.1) | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Asistente IA 100% privado. Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad. Actualizaciones en tiempo real sin recargar.",
              "detectedAt": "2025-11-24T17:16:21.239Z",
              "detectedCount": 11
            }
          }
        ],
        "COMMERCIAL": [
          {
            "key": "vendorsCommissions",
            "name": "Vendedores y Sistema de Comisiones",
            "category": "COMMERCIAL",
            "status": "IN_PROGRESS",
            "progress": 85,
            "phase": "DEVELOPMENT",
            "description": "Jerarqu√≠a de staff, comisiones piramidales, stats",
            "features": {
              "hierarchySetup": {
                "name": "Configuraci√≥n de Jerarqu√≠a",
                "done": true,
                "inProgress": false,
                "tasks": [
                  {
                    "id": "VH-1",
                    "name": "Migraci√≥n DB (26 roles en aponnt_staff_roles)",
                    "done": true,
                    "completedDate": "2025-01-21"
                  },
                  {
                    "id": "VH-2",
                    "name": "Modelos Sequelize (AponntStaff, AponntStaffRole)",
                    "done": true,
                    "completedDate": "2025-01-21"
                  },
                  {
                    "id": "VH-3",
                    "name": "API CRUD /api/aponnt/staff-data",
                    "done": true,
                    "completedDate": "2025-01-21"
                  },
                  {
                    "id": "VH-4",
                    "name": "API Auth /api/aponnt/staff/login (con backdoor)",
                    "done": true,
                    "completedDate": "2025-01-21"
                  },
                  {
                    "id": "VH-5",
                    "name": "Tab Vendedores adaptado a aponnt_staff",
                    "done": true,
                    "completedDate": "2025-01-22"
                  },
                  {
                    "id": "VH-6",
                    "name": "Tab Staff con modal unificado (frontend)",
                    "done": true,
                    "completedDate": "2025-01-22"
                  },
                  {
                    "id": "VH-7",
                    "name": "Tab Roles de Staff con CRUD (frontend)",
                    "done": true,
                    "completedDate": "2025-01-22"
                  },
                  {
                    "id": "VH-8",
                    "name": "Organigrama din√°mico con datos reales",
                    "done": true,
                    "completedDate": "2025-01-22"
                  }
                ]
              },
              "pyramidalCommissions": {
                "name": "Comisiones Piramidales",
                "done": false,
                "inProgress": false,
                "tasks": [
                  {
                    "id": "PC-1",
                    "name": "Funci√≥n PostgreSQL calculate_pyramid_commission",
                    "done": false
                  },
                  {
                    "id": "PC-2",
                    "name": "Triggers autom√°ticos",
                    "done": false
                  },
                  {
                    "id": "PC-3",
                    "name": "API endpoint /staff/:id/commission",
                    "done": false
                  }
                ]
              },
              "statsTracking": {
                "name": "Tracking de Estad√≠sticas",
                "done": false,
                "inProgress": false,
                "tasks": [
                  {
                    "id": "ST-1",
                    "name": "Tabla vendor_statistics",
                    "done": false
                  },
                  {
                    "id": "ST-2",
                    "name": "Trigger auto-update",
                    "done": false
                  },
                  {
                    "id": "ST-3",
                    "name": "API /vendors/:id/statistics",
                    "done": false
                  }
                ]
              },
              "multiTenantFilters": {
                "name": "Filtros Multi-Tenant por Rol",
                "done": false,
                "inProgress": false,
                "tasks": [
                  {
                    "id": "MTF-1",
                    "name": "Filtros SQL por rol",
                    "done": false
                  },
                  {
                    "id": "MTF-2",
                    "name": "Actualizar GET /companies",
                    "done": false
                  },
                  {
                    "id": "MTF-3",
                    "name": "Testing con diferentes roles",
                    "done": false
                  }
                ]
              },
              "vendorStates": {
                "name": "Estados Complejos de Vendedor",
                "done": false,
                "inProgress": false,
                "description": "active, inactive_earning, suspended, terminated",
                "tasks": [
                  {
                    "id": "VS-1",
                    "name": "ENUM vendor_status",
                    "done": false
                  },
                  {
                    "id": "VS-2",
                    "name": "L√≥gica de permisos por estado",
                    "done": false
                  },
                  {
                    "id": "VS-3",
                    "name": "Vista read-only para inactive_earning",
                    "done": false
                  }
                ]
              }
            },
            "completedMigrations": [
              "‚úÖ CREATE TABLE aponnt_staff_roles (26 roles jer√°rquicos) - 2025-01-21",
              "‚úÖ CREATE TABLE aponnt_staff (171 vendedores migrados) - 2025-01-21",
              "‚úÖ REVERT users table staff fields (total isolation) - 2025-01-21"
            ],
            "pendingMigrations": [
              "ALTER TABLE companies - Add vendor FKs and commission fields",
              "CREATE TABLE vendor_statistics",
              "CREATE FUNCTION calculate_pyramid_commission",
              "CREATE FUNCTION refresh_vendor_statistics"
            ],
            "files": [
              "‚úÖ migrations/20250121_create_aponnt_staff_roles.sql",
              "‚úÖ migrations/20250121_create_aponnt_staff_table.sql",
              "‚úÖ migrations/20250121_revert_users_staff_fields.sql",
              "‚úÖ src/models/AponntStaff.js",
              "‚úÖ src/models/AponntStaffRole.js",
              "‚úÖ src/routes/aponntStaffRoutes.js (CRUD completo)",
              "‚úÖ src/routes/aponntStaffAuthRoutes.js (login + backdoor)",
              "‚úÖ public/panel-administrativo.html (tab Vendedores adaptado)",
              "‚úÖ public/panel-administrativo.html (tab Staff con modal unificado + 450 l√≠neas JS)",
              "‚úÖ public/panel-administrativo.html (tab Roles con CRUD i18n + 390 l√≠neas JS)",
              "‚úÖ public/panel-administrativo.html (organigrama jer√°rquico con 26 roles + 300 l√≠neas JS)",
              "src/models/VendorStatistics.js (PENDIENTE)",
              "src/routes/aponntDashboard.js",
              "PARA-BACKEND-IMPLEMENTACION-COMPLETA.md"
            ],
            "tables": [
              "‚úÖ aponnt_staff_roles (26 roles creados)",
              "‚úÖ aponnt_staff (171 vendedores migrados)",
              "vendor_statistics (PENDIENTE)",
              "companies"
            ],
            "dependencies": [
              "companies",
              "notifications",
              "users (isolation verificada)"
            ],
            "knownIssues": [
              "‚úÖ RESUELTO: Sistema duplicado - 171 vendedores migrados a aponnt_staff",
              "M√©tricas de comisiones en 0 (esperando implementaci√≥n de vendor_statistics)",
              "Comisiones USD calculadas en frontend pero no persistidas en BD",
              "Falta implementar workflow de cambio de billetera con confirmaci√≥n"
            ],
            "currentTask": "PC-1: Implementar calculate_pyramid_commission (PostgreSQL function)",
            "designDoc": "PARA-BACKEND-IMPLEMENTACION-COMPLETA.md",
            "lastUpdated": "2025-01-22",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/VendorCommission.js",
                  "lines": "1-200",
                  "description": "Modelo de comisiones piramidales"
                },
                {
                  "file": "src/routes/vendorCommissions.js",
                  "lines": "1-600",
                  "description": "CRUD + c√°lculo comisiones"
                },
                {
                  "file": "src/services/CommissionCalculationService.js",
                  "lines": "1-400",
                  "description": "Motor de c√°lculo piramidal"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-administrativo.html",
                  "lines": "3000-4000",
                  "description": "UI comisiones vendors"
                }
              ]
            },
            "documentation": {
              "status": "completed",
              "file": "docs/modules/VENDORS-COMMISSIONS-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": true,
                "guiaDeUso": true,
                "funcionalidadInterna": true,
                "stackTecnologico": true,
                "diagramasDeFlujo": true,
                "apiRest": true,
                "baseDeDatos": true,
                "ejemplosDeUso": true,
                "troubleshooting": true
              },
              "lastUpdated": "2025-11-22",
              "tasks": [
                {
                  "id": "VENDORSCOMMISSIONS-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": true
                },
                {
                  "id": "VENDORSCOMMISSIONS-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": true
                },
                {
                  "id": "VENDORSCOMMISSIONS-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": true
                },
                {
                  "id": "VENDORSCOMMISSIONS-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": true
                },
                {
                  "id": "VENDORSCOMMISSIONS-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": true
                },
                {
                  "id": "VENDORSCOMMISSIONS-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": true
                },
                {
                  "id": "VENDORSCOMMISSIONS-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": true
                },
                {
                  "id": "VENDORSCOMMISSIONS-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": true
                },
                {
                  "id": "VENDORSCOMMISSIONS-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": true
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.242Z",
              "detectedCount": 7
            }
          },
          {
            "key": "budgets",
            "name": "Sistema de Presupuestos",
            "category": "COMMERCIAL",
            "status": "PLANNED",
            "progress": 0,
            "phase": "DESIGN",
            "description": "Presupuestos versionados con workflow de aprobaci√≥n",
            "plannedFeatures": {
              "budgetCreation": {
                "name": "Creaci√≥n de Presupuestos",
                "description": "Generar presupuesto desde modificaci√≥n de contrato"
              },
              "versioning": {
                "name": "Versionado",
                "description": "Solo un presupuesto vigente, historial completo"
              },
              "approvalWorkflow": {
                "name": "Workflow de Aprobaci√≥n",
                "description": "Cliente aprueba/rechaza, notificaciones autom√°ticas"
              },
              "traceability": {
                "name": "Trazabilidad",
                "description": "Trace_id √∫nico conecta budget ‚Üí contract ‚Üí invoice ‚Üí commissions"
              }
            },
            "plannedTables": [
              "budgets",
              "budget_versions",
              "budget_approvals"
            ],
            "dependencies": [
              "companies",
              "contracts",
              "notifications",
              "vendorsCommissions"
            ],
            "estimatedEffort": "40-60 horas",
            "priority": "HIGH",
            "designDoc": "ARQUITECTURA-COMPLETA-ERP-COMISIONES.md (PENDING)",
            "lastUpdated": "2025-01-19",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/Budget.js",
                  "lines": "1-150",
                  "description": "Modelo de presupuestos"
                },
                {
                  "file": "src/routes/budgets.js",
                  "lines": "1-400",
                  "description": "CRUD presupuestos"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-administrativo.html",
                  "lines": "4000-4500",
                  "description": "UI presupuestos"
                }
              ]
            },
            "documentation": {
              "status": "pending",
              "file": "docs/modules/BUDGETS-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "BUDGETS-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "BUDGETS-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "BUDGETS-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "BUDGETS-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "BUDGETS-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "BUDGETS-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "BUDGETS-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "BUDGETS-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "BUDGETS-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.243Z",
              "detectedCount": 7
            }
          },
          {
            "key": "contracts",
            "name": "Sistema de Contratos",
            "category": "COMMERCIAL",
            "status": "PLANNED",
            "progress": 0,
            "phase": "DESIGN",
            "description": "Contratos con firma digital tipo EULA",
            "plannedFeatures": {
              "contractGeneration": {
                "name": "Generaci√≥n de Contrato",
                "description": "Desde presupuesto aprobado"
              },
              "digitalSignature": {
                "name": "Firma Digital (EULA-style)",
                "description": "Checkbox + timestamp, sin certificado digital"
              },
              "versioning": {
                "name": "Versionado",
                "description": "Solo un contrato vigente, historial completo"
              },
              "deactivation": {
                "name": "Baja de Contrato Vigente",
                "description": "Al generar nuevo contrato, el viejo se marca como inactive"
              },
              "traceability": {
                "name": "Trazabilidad Completa",
                "description": "Budget ‚Üí Contract ‚Üí Invoice ‚Üí Commissions ‚Üí Transfers"
              }
            },
            "plannedTables": [
              "contracts",
              "contract_versions",
              "contract_signatures"
            ],
            "dependencies": [
              "budgets",
              "companies",
              "notifications"
            ],
            "estimatedEffort": "50-70 horas",
            "priority": "HIGH",
            "designDoc": "ARQUITECTURA-COMPLETA-ERP-COMISIONES.md (PENDING)",
            "lastUpdated": "2025-01-19",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/Contract.js",
                  "lines": "1-200",
                  "description": "Modelo de contratos"
                },
                {
                  "file": "src/routes/contracts.js",
                  "lines": "1-400",
                  "description": "Gesti√≥n de contratos"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-administrativo.html",
                  "lines": "4500-5000",
                  "description": "UI contratos"
                }
              ]
            },
            "documentation": {
              "status": "pending",
              "file": "docs/modules/CONTRACTS-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "CONTRACTS-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "CONTRACTS-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "CONTRACTS-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "CONTRACTS-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "CONTRACTS-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "CONTRACTS-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "CONTRACTS-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "CONTRACTS-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "CONTRACTS-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.246Z",
              "detectedCount": 8
            }
          },
          {
            "key": "invoicing",
            "name": "Facturaci√≥n Autom√°tica",
            "category": "COMMERCIAL",
            "status": "PLANNED",
            "progress": 0,
            "phase": "DESIGN",
            "description": "Facturaci√≥n mensual autom√°tica (d√≠a 1 de cada mes)",
            "plannedFeatures": {
              "autoGeneration": {
                "name": "Generaci√≥n Autom√°tica",
                "description": "Cron job d√≠a 1 del mes, busca contratos vigentes"
              },
              "clientNotification": {
                "name": "Notificaci√≥n al Cliente",
                "description": "Email + notificaci√≥n interna con factura"
              },
              "paymentProofUpload": {
                "name": "Carga de Comprobante",
                "description": "Cliente sube comprobante de transferencia/pago"
              },
              "collectionWorkflow": {
                "name": "Workflow de Cobranzas",
                "description": "√Årea de cobranzas confirma pago"
              },
              "traceability": {
                "name": "Trazabilidad",
                "description": "Invoice_id conecta a todo el flujo"
              }
            },
            "plannedTables": [
              "invoices",
              "payment_confirmations"
            ],
            "dependencies": [
              "contracts",
              "cobranzas",
              "notifications"
            ],
            "estimatedEffort": "60-80 horas",
            "priority": "HIGH",
            "designDoc": "ARQUITECTURA-COMPLETA-ERP-COMISIONES.md (PENDING)",
            "lastUpdated": "2025-01-19",
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Multer",
                  "description": "Middleware para upload de archivos multipart/form-data",
                  "icon": "üìÅ"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Multer, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.248Z",
              "detectedCount": 9
            }
          },
          {
            "key": "commissionLiquidation",
            "name": "Liquidaci√≥n de Comisiones",
            "category": "COMMERCIAL",
            "status": "PLANNED",
            "progress": 0,
            "phase": "DESIGN",
            "description": "Liquidaci√≥n mensual de comisiones con trazabilidad completa",
            "plannedFeatures": {
              "autoCalculation": {
                "name": "C√°lculo Autom√°tico",
                "description": "Al confirmar pago de factura, calcular todas las comisiones"
              },
              "pyramidalChain": {
                "name": "Cadena Piramidal",
                "description": "Vendedor ‚Üí L√≠der ‚Üí Supervisor ‚Üí Gerente Regional ‚Üí CEO"
              },
              "digestGeneration": {
                "name": "Digest de Liquidaci√≥n",
                "description": "ID √∫nico, timestamp, deadline para cobranzas"
              },
              "transferManagement": {
                "name": "Gesti√≥n de Transferencias",
                "description": "Registro de transferencias a billeteras"
              },
              "confirmationWorkflow": {
                "name": "Workflow de Confirmaci√≥n",
                "description": "Destinatario confirma recepci√≥n de transferencia"
              },
              "traceability": {
                "name": "Trazabilidad End-to-End",
                "description": "Invoice ‚Üí Liquidation ‚Üí Individual Payments ‚Üí Transfers ‚Üí Confirmations"
              }
            },
            "plannedTables": [
              "commission_liquidations",
              "commission_payments",
              "transfers",
              "transfer_confirmations",
              "traceability_chain"
            ],
            "dependencies": [
              "invoicing",
              "vendorsCommissions",
              "notifications"
            ],
            "estimatedEffort": "80-120 horas",
            "priority": "HIGH",
            "designDoc": "ARQUITECTURA-COMPLETA-ERP-COMISIONES.md (PENDING)",
            "lastUpdated": "2025-01-19",
            "codeLocation": {
              "backend": [
                {
                  "file": "src/models/CommissionLiquidation.js",
                  "lines": "1-200",
                  "description": "Modelo de liquidaciones"
                },
                {
                  "file": "src/routes/commissionLiquidation.js",
                  "lines": "1-400",
                  "description": "Liquidaci√≥n comisiones"
                }
              ],
              "frontend": [
                {
                  "file": "public/panel-administrativo.html",
                  "lines": "5500-6000",
                  "description": "UI liquidaciones"
                }
              ]
            },
            "documentation": {
              "status": "pending",
              "file": "docs/modules/COMMISSION-LIQUIDATION-MODULE.md",
              "templateUsed": "docs/templates/MODULE-DOCUMENTATION-TEMPLATE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": false,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": false,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "lastUpdated": null,
              "tasks": [
                {
                  "id": "COMMISSIONLIQUIDATION-DOC-1",
                  "name": "Crear resumen ejecutivo del m√≥dulo",
                  "done": false
                },
                {
                  "id": "COMMISSIONLIQUIDATION-DOC-2",
                  "name": "Documentar gu√≠a de uso con casos comunes",
                  "done": false
                },
                {
                  "id": "COMMISSIONLIQUIDATION-DOC-3",
                  "name": "Explicar funcionalidad interna y arquitectura",
                  "done": false
                },
                {
                  "id": "COMMISSIONLIQUIDATION-DOC-4",
                  "name": "Listar stack tecnol√≥gico completo",
                  "done": false
                },
                {
                  "id": "COMMISSIONLIQUIDATION-DOC-5",
                  "name": "Crear diagramas de flujo en Mermaid",
                  "done": false
                },
                {
                  "id": "COMMISSIONLIQUIDATION-DOC-6",
                  "name": "Documentar todos los endpoints API REST",
                  "done": false
                },
                {
                  "id": "COMMISSIONLIQUIDATION-DOC-7",
                  "name": "Documentar esquema de base de datos",
                  "done": false
                },
                {
                  "id": "COMMISSIONLIQUIDATION-DOC-8",
                  "name": "Agregar ejemplos de uso pr√°cticos",
                  "done": false
                },
                {
                  "id": "COMMISSIONLIQUIDATION-DOC-9",
                  "name": "Crear secci√≥n de troubleshooting",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: Sequelize ORM, PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.250Z",
              "detectedCount": 8
            }
          },
          {
            "key": "cobranzas",
            "name": "Gesti√≥n de Cobranzas",
            "category": "COMMERCIAL",
            "status": "PLANNED",
            "progress": 0,
            "phase": "DESIGN",
            "description": "√Årea de cobranzas confirma pagos y ejecuta transferencias",
            "plannedFeatures": {
              "paymentConfirmation": {
                "name": "Confirmaci√≥n de Pagos",
                "description": "√Årea de cobranzas confirma que cliente pag√≥"
              },
              "transferExecution": {
                "name": "Ejecuci√≥n de Transferencias",
                "description": "Registro de transferencias a vendedores"
              },
              "deadlineTracking": {
                "name": "Seguimiento de Deadlines",
                "description": "Alertas si no se cumplen plazos"
              },
              "notificationManagement": {
                "name": "Gesti√≥n de Notificaciones",
                "description": "Enviar comprobantes a destinatarios"
              }
            },
            "plannedTables": [
              "collection_confirmations"
            ],
            "dependencies": [
              "invoicing",
              "commissionLiquidation",
              "notifications"
            ],
            "estimatedEffort": "40-60 horas",
            "priority": "MEDIUM",
            "designDoc": "ARQUITECTURA-COMPLETA-ERP-COMISIONES.md (PENDING)",
            "lastUpdated": "2025-01-19",
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "Framework web minimalista y flexible para Node.js",
                  "icon": "‚ö°"
                },
                {
                  "name": "Sequelize ORM",
                  "description": "ORM moderno para PostgreSQL, MySQL, SQLite y SQL Server",
                  "icon": "üóÑÔ∏è"
                }
              ],
              "frontend": [],
              "database": [
                {
                  "name": "PostgreSQL",
                  "description": "Base de datos relacional de c√≥digo abierto m√°s avanzada",
                  "icon": "üêò"
                }
              ],
              "ai": [],
              "apis": [
                {
                  "name": "Axios",
                  "description": "Cliente HTTP basado en promesas",
                  "icon": "üîå"
                },
                {
                  "name": "CORS",
                  "description": "Cross-Origin Resource Sharing middleware",
                  "icon": "üåê"
                }
              ],
              "security": [
                {
                  "name": "bcrypt",
                  "description": "Hashing seguro de contrase√±as con salt",
                  "icon": "üîí"
                },
                {
                  "name": "JWT (JSON Web Tokens)",
                  "description": "Tokens seguros para autenticaci√≥n stateless",
                  "icon": "üîê"
                }
              ],
              "realtime": [],
              "testing": [],
              "technical": "**Backend**: Express.js, Sequelize ORM | **Database**: PostgreSQL | **Security**: bcrypt, JWT (JSON Web Tokens)",
              "marketing": "Seguridad bancaria para sus datos. Autenticaci√≥n segura sin comprometer velocidad.",
              "detectedAt": "2025-11-24T17:16:21.252Z",
              "detectedCount": 7
            }
          }
        ],
        "INTERNAL_TOOLS": [
          {
            "key": "engineering",
            "name": "Engineering Dashboard",
            "category": "INTERNAL_TOOLS",
            "status": "PRODUCTION",
            "progress": 95,
            "phase": "PRODUCTION",
            "description": "Dashboard profesional para visualizaci√≥n de arquitectura, progreso, roadmap, c√≥digo y coherencia del sistema. Permite ver todas las solapas del sistema de manera coherente.",
            "features": {
              "vistaGeneral": {
                "done": true,
                "tested": true,
                "name": "Vista General (Overview)"
              },
              "aplicaciones": {
                "done": true,
                "tested": true,
                "name": "Vista de Aplicaciones (7 apps)"
              },
              "modulos": {
                "done": true,
                "tested": true,
                "name": "Vista de M√≥dulos Backend (22 m√≥dulos)"
              },
              "archivosBackend": {
                "done": true,
                "tested": true,
                "name": "Explorador Archivos Backend"
              },
              "archivosFrontend": {
                "done": true,
                "tested": true,
                "name": "Explorador Archivos Frontend"
              },
              "roadmap": {
                "plugAndPlayDependencyAudit": {
                  "name": "Auditor√≠a de Cadena de Dependencias - Sistema Plug & Play Inteligente",
                  "status": "IN_PROGRESS",
                  "startDate": "2025-11-27",
                  "estimatedCompletion": "2025-12-15",
                  "progress": 5,
                  "priority": "CRITICAL",
                  "lastUpdated": "2025-11-27T20:04:37.405Z",
                  "completedTasks": 0,
                  "totalTasks": 15,
                  "visionDocument": "backend/docs/VISION-SISTEMA-INTELIGENTE-PLUG-AND-PLAY.md",
                  "philosophy": {
                    "principle1": "DATO √öNICO (Single Source of Truth) - Un dato se define en UN SOLO lugar",
                    "principle2": "PLUG & PLAY - Si m√≥dulo existe datos fluyen, si no hay fallback manual",
                    "principle3": "PARAMETRIZACI√ìN INTELIGENTE - RRHH parametriza UNA VEZ, se replica autom√°ticamente",
                    "principle4": "OLLAMA COMO POTENCIADOR - IA sugiere, valida, completa en cada eslab√≥n"
                  },
                  "tasks": [
                    {
                      "id": "PP-1",
                      "name": "Auditar panel-administrativo: Creaci√≥n de Empresa",
                      "description": "Verificar:\n- ¬øSe puede asignar PA√çS a la empresa?\n- ¬øSe puede definir si tiene/no tiene sucursales?\n- ¬øSe pueden seleccionar M√ìDULOS contratados?\n- ¬øSe asigna CALENDARIO por defecto seg√∫n pa√≠s?",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [],
                      "estimatedEffort": "2-3 horas",
                      "auditType": "infraestructure",
                      "expectedOutput": "Lista de campos faltantes/existentes en companies"
                    },
                    {
                      "id": "PP-2",
                      "name": "Auditar m√≥dulo Sucursales (company_branches)",
                      "description": "Verificar:\n- ¬øHeredan PA√çS de empresa o pueden definir propio? (multi-pa√≠s)\n- ¬øTienen CALENDARIO asignable?\n- ¬øTienen PLANTILLA DE LIQUIDACI√ìN default?",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-1"
                      ],
                      "estimatedEffort": "2-3 horas",
                      "auditType": "infraestructure"
                    },
                    {
                      "id": "PP-3",
                      "name": "Auditar m√≥dulo Turnos (shifts)",
                      "description": "Verificar:\n- ¬øHay turnos definidos con horarios?\n- ¬øTienen CALENDARIO asociado (d√≠as que aplica el turno)?\n- ¬øCalculan HORAS NOCTURNAS autom√°ticamente (21:00-06:00)?\n- ¬øDefinen tolerancia entrada/salida para llegadas tarde?\n- ¬øSe pueden asignar a usuarios correctamente?",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-2"
                      ],
                      "estimatedEffort": "3-4 horas",
                      "auditType": "laboral"
                    },
                    {
                      "id": "PP-4",
                      "name": "Auditar ficha de Usuario (users)",
                      "description": "Verificar campos CR√çTICOS para liquidaci√≥n:\n- ¬øTiene campo TURNO asignado? (shift_id o user_shift_assignments)\n- ¬øTiene campo CATEGOR√çA SALARIAL?\n- ¬øTiene campo CONVENIO? (descriptivo)\n- ¬øTiene campo PLANTILLA DE LIQUIDACI√ìN asignada?\n- ¬øTiene campo ROL para herencia de configuraciones?",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-3"
                      ],
                      "estimatedEffort": "3-4 horas",
                      "auditType": "employee"
                    },
                    {
                      "id": "PP-5",
                      "name": "Auditar m√≥dulo Asistencia (attendance)",
                      "description": "Verificar c√°lculos AUTOM√ÅTICOS:\n- ¬øCalcula HORAS TRABAJADAS?\n- ¬øDetecta HORAS EXTRAS (50% y 100%)?\n- ¬øDetecta HORAS NOCTURNAS?\n- ¬øDetecta LLEGADAS TARDE vs turno asignado?\n- ¬øTiene FALLBACK para justificar ausencias si no hay m√≥dulo m√©dico?",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-4"
                      ],
                      "estimatedEffort": "4-5 horas",
                      "auditType": "operativo"
                    },
                    {
                      "id": "PP-6",
                      "name": "Auditar m√≥dulo Dashboard M√©dico",
                      "description": "Verificar flujo completo:\n- ¬øEst√° implementado?\n- ¬øTiene flujo de APROBACI√ìN de certificados?\n- ¬øLos certificados aprobados JUSTIFICAN ausencias autom√°ticamente?\n- ¬øLa justificaci√≥n es DATO √öNICO o est√° duplicada?",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-5"
                      ],
                      "estimatedEffort": "3-4 horas",
                      "auditType": "novedades"
                    },
                    {
                      "id": "PP-7",
                      "name": "Implementar FALLBACK: Justificaci√≥n manual en Asistencia",
                      "description": "Si empresa NO tiene m√≥dulo m√©dico contratado:\n- Agregar campo is_justified en attendance\n- Agregar campo absence_reason\n- Agregar UI para que RRHH justifique manualmente\n- Asegurar que liquidaci√≥n LEE de este campo (DATO √öNICO)",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-6"
                      ],
                      "estimatedEffort": "4-5 horas",
                      "auditType": "fallback"
                    },
                    {
                      "id": "PP-8",
                      "name": "Auditar Plantillas de Liquidaci√≥n (payroll_templates)",
                      "description": "Verificar:\n- ¬øExisten PLANTILLAS de conceptos?\n- ¬øSe pueden asignar por PA√çS ‚Üí EMPRESA ‚Üí SUCURSAL ‚Üí ROL ‚Üí USUARIO?\n- ¬øHay herencia correcta?\n- ¬øTiene CONCEPTOS definidos (haberes, deducciones)?",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-7"
                      ],
                      "estimatedEffort": "3-4 horas",
                      "auditType": "rrhh"
                    },
                    {
                      "id": "PP-9",
                      "name": "Implementar asignaci√≥n de Plantilla por ROL",
                      "description": "Nuevo campo: role_payroll_template_id\n- Cada ROL puede tener plantilla default asignada\n- Usuario hereda de rol si no tiene espec√≠fica\n- UI en configuraci√≥n de roles para asignar plantilla",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-8"
                      ],
                      "estimatedEffort": "4-5 horas",
                      "auditType": "feature"
                    },
                    {
                      "id": "PP-10",
                      "name": "Auditar Convenios Colectivos (labor_agreements)",
                      "description": "Verificar que sean DESCRIPTIVOS:\n- ¬øSe asignan a ROLES?\n- ¬øSe pueden override por USUARIO?\n- ¬øSon solo etiquetas para mostrar en recibos?\n- ¬øLos C√ÅLCULOS vienen de la PLANTILLA, no del convenio?",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-9"
                      ],
                      "estimatedEffort": "2-3 horas",
                      "auditType": "rrhh"
                    },
                    {
                      "id": "PP-11",
                      "name": "Auditar motor de Liquidaci√≥n (PayrollCalculatorService)",
                      "description": "Verificar que VALIDE cadena antes de ejecutar:\n- ¬øVerifica que usuario tiene PLANTILLA?\n- ¬øVerifica que tiene TURNO asignado?\n- ¬øVerifica que tiene CATEGOR√çA?\n- ¬øLee ASISTENCIA correctamente?\n- ¬øLee AUSENCIAS JUSTIFICADAS de fuente √∫nica?\n- ¬øALERTA si falta dato cr√≠tico?",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-10"
                      ],
                      "estimatedEffort": "5-6 horas",
                      "auditType": "liquidacion"
                    },
                    {
                      "id": "PP-12",
                      "name": "Implementar Pre-Validaci√≥n de Liquidaci√≥n",
                      "description": "Antes de liquidar, sistema debe:\n1. Verificar TODOS los empleados a liquidar\n2. Generar reporte de DATOS FALTANTES por empleado\n3. NO permitir liquidar si hay datos cr√≠ticos faltantes\n4. Mostrar UI con checklist de validaci√≥n\n5. Permitir corregir datos antes de reintentar",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-11"
                      ],
                      "estimatedEffort": "6-8 horas",
                      "auditType": "feature"
                    },
                    {
                      "id": "PP-13",
                      "name": "Integrar Ollama en puntos cr√≠ticos",
                      "description": "Agregar sugerencias IA en:\n- Creaci√≥n de empresa: sugerir calendario seg√∫n pa√≠s\n- Asignaci√≥n de turno: sugerir seg√∫n historial del empleado\n- Pre-liquidaci√≥n: alertar anomal√≠as (horas extras excesivas, patrones)\n- Post-liquidaci√≥n: reportar inconsistencias vs mes anterior",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-12"
                      ],
                      "estimatedEffort": "8-10 horas",
                      "auditType": "ia"
                    },
                    {
                      "id": "PP-14",
                      "name": "Documentar circuitos rotos y fallbacks implementados",
                      "description": "Generar documento final con:\n- Lista de todos los m√≥dulos auditados\n- Estado de cada eslab√≥n de la cadena\n- Fallbacks implementados\n- Datos duplicados eliminados\n- Sugerencias de Ollama activas",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-13"
                      ],
                      "estimatedEffort": "3-4 horas",
                      "auditType": "documentacion"
                    },
                    {
                      "id": "PP-15",
                      "name": "Test E2E: Liquidaci√≥n completa de 10 empleados",
                      "description": "Probar flujo completo:\n1. Crear empresa con pa√≠s ARG\n2. Crear turnos con calendario\n3. Crear 10 usuarios con diferentes configuraciones\n4. Generar asistencias de 1 mes\n5. Agregar ausencias (justificadas y no)\n6. Ejecutar liquidaci√≥n\n7. Verificar que NO hay errores\n8. Verificar que c√°lculos son correctos",
                      "done": false,
                      "assignedTo": "Claude session",
                      "dependencies": [
                        "PP-14"
                      ],
                      "estimatedEffort": "6-8 horas",
                      "auditType": "testing"
                    }
                  ],
                  "dependencies": [
                    "medicalAdvancedSalarySystem",
                    "phase4_testing_auditor"
                  ],
                  "files": [
                    "backend/docs/VISION-SISTEMA-INTELIGENTE-PLUG-AND-PLAY.md",
                    "src/services/PayrollCalculatorService.js",
                    "src/routes/payrollRoutes.js",
                    "public/js/modules/payroll-liquidation.js",
                    "public/js/modules/users.js",
                    "public/js/modules/attendance.js"
                  ],
                  "estimatedEffort": "60-80 horas totales",
                  "notes": [
                    "Este roadmap audita TODOS los m√≥dulos que intervienen en liquidaci√≥n",
                    "Cada auditor√≠a genera lista de datos faltantes/existentes",
                    "Se implementan FALLBACKS donde corresponda",
                    "Se eliminan DATOS DUPLICADOS (Single Source of Truth)",
                    "Ollama potencia cada eslab√≥n de la cadena",
                    "Documento de visi√≥n: backend/docs/VISION-SISTEMA-INTELIGENTE-PLUG-AND-PLAY.md"
                  ]
                },
                "done": true,
                "tested": true,
                "name": "Roadmap con Gantt"
              },
              "caminoCritico": {
                "done": true,
                "tested": true,
                "name": "Camino Cr√≠tico (CPM/PERT)"
              },
              "organigrama": {
                "done": true,
                "tested": true,
                "name": "Organigrama Organizacional"
              },
              "database": {
                "done": true,
                "tested": true,
                "name": "Vista Base de Datos (151 tablas)"
              },
              "workflows": {
                "done": true,
                "tested": true,
                "name": "Workflows del Sistema (6+)"
              },
              "codeViewer": {
                "done": true,
                "tested": true,
                "name": "Visor de C√≥digo (VS Code style)"
              },
              "coherenceCheck": {
                "done": false,
                "inProgress": true,
                "name": "Verificaci√≥n de Coherencia entre Solapas"
              },
              "orphanDetection": {
                "done": false,
                "inProgress": true,
                "name": "Detecci√≥n de C√≥digo Hu√©rfano"
              },
              "duplicateDetection": {
                "done": true,
                "tested": false,
                "name": "Detecci√≥n de Duplicados"
              },
              "backupCleanup": {
                "done": false,
                "inProgress": true,
                "name": "Limpieza de Archivos Backup"
              }
            },
            "files": [
              "public/js/modules/engineering-dashboard.js",
              "public/js/modules/critical-path-ui.js",
              "src/routes/engineeringRoutes.js",
              "engineering-metadata.js",
              "scripts/sync-metadata-exhaustive.js",
              "scripts/apply-metadata-updates.js"
            ],
            "codeLocation": {
              "backend": [
                {
                  "file": "src/routes/engineeringRoutes.js",
                  "lines": "1-500",
                  "description": "API REST del dashboard"
                },
                {
                  "file": "engineering-metadata.js",
                  "lines": "1-262000+",
                  "description": "Metadata completa del sistema (9.7MB)"
                }
              ],
              "frontend": [
                {
                  "file": "public/js/modules/engineering-dashboard.js",
                  "lines": "1-3700+",
                  "description": "Dashboard UI con 10 tabs"
                },
                {
                  "file": "public/js/modules/critical-path-ui.js",
                  "lines": "1-800+",
                  "description": "UI del Camino Cr√≠tico CPM"
                }
              ]
            },
            "tables": [],
            "apiEndpoints": [
              "GET /api/engineering/metadata",
              "GET /api/engineering/stats",
              "GET /api/engineering/scan-files",
              "GET /api/engineering/read-file",
              "GET /api/critical-path/analyze",
              "POST /api/critical-path/update-priority"
            ],
            "knownIssues": [
              "Verificaci√≥n de coherencia entre solapas en progreso",
              "Detecci√≥n autom√°tica de hu√©rfanos pendiente",
              "Archivo metadata muy grande (9.7MB) - considerar split"
            ],
            "lastUpdated": "2025-11-25T12:24:44.098Z",
            "documentation": {
              "status": "partial",
              "file": "docs/modules/ENGINEERING-MODULE.md",
              "sections": {
                "resumenEjecutivo": false,
                "guiaDeUso": true,
                "funcionalidadInterna": false,
                "stackTecnologico": false,
                "diagramasDeFlujo": false,
                "apiRest": true,
                "baseDeDatos": false,
                "ejemplosDeUso": false,
                "troubleshooting": false
              },
              "tasks": [
                {
                  "id": "ENGINEERING-DOC-1",
                  "name": "Documentar todas las solapas y su funci√≥n",
                  "done": false
                },
                {
                  "id": "ENGINEERING-DOC-2",
                  "name": "Documentar c√≥mo mantener coherencia",
                  "done": false
                },
                {
                  "id": "ENGINEERING-DOC-3",
                  "name": "Documentar scripts de sincronizaci√≥n",
                  "done": false
                }
              ]
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "API REST para metadata",
                  "icon": "‚ö°"
                },
                {
                  "name": "Node.js fs",
                  "description": "Escaneo de archivos del sistema",
                  "icon": "üìÅ"
                }
              ],
              "frontend": [
                {
                  "name": "Vanilla JS",
                  "description": "Dashboard interactivo sin frameworks",
                  "icon": "üü®"
                },
                {
                  "name": "CSS Grid/Flexbox",
                  "description": "Layouts responsivos",
                  "icon": "üé®"
                }
              ],
              "database": [],
              "ai": [],
              "apis": [],
              "security": [],
              "realtime": [],
              "testing": []
            }
          }
        ],
        "RRHH-PREMIUM": [
          {
            "key": "employee-360",
            "name": "Expediente 360¬∞ Premium - An√°lisis Integral de Empleados",
            "version": "2.0.0",
            "category": "RRHH-PREMIUM",
            "status": "COMPLETE",
            "progress": 100,
            "phase": "PRODUCTION",
            "lastUpdated": "2025-01-25",
            "features": {
              "dashboard": {
                "done": true,
                "tested": true
              },
              "completeDataSheet": {
                "done": true,
                "tested": true,
                "description": "Data Sheet completo: identificaci√≥n, datos personales, laborales, contacto emergencia, autorizaciones, biom√©tricos, roles adicionales"
              },
              "scoring6Dimensions": {
                "done": true,
                "tested": true,
                "description": "Sistema de scoring con 6 dimensiones: Asistencia (20%), Puntualidad (20%), Disciplina (15%), Capacitaci√≥n (15%), Estabilidad (15%), SALUD (15%) + BONUS roles"
              },
              "flightRiskIndex": {
                "done": true,
                "tested": true,
                "description": "√çndice de Riesgo de Fuga (0-100%): 7 factores predictivos + recomendaciones de retenci√≥n + niveles (BAJO, MEDIO, ALTO, CR√çTICO)"
              },
              "behavioralPatterns": {
                "done": true,
                "tested": true,
                "description": "Detecci√≥n de patrones: Tardanzas recurrentes, Fin de semana largo, M√≠nimo esfuerzo, Frecuencia de certificados"
              },
              "additionalRoles": {
                "done": true,
                "tested": true,
                "description": "Sistema de roles adicionales internos con certificaciones y bonus en scoring (hasta +15%)"
              },
              "medicalIntegration": {
                "done": true,
                "tested": true,
                "description": "Integraci√≥n con Dashboard M√©dico y nueva dimensi√≥n Salud en scoring"
              },
              "timeline": {
                "done": true,
                "tested": true,
                "description": "Timeline unificado de todos los eventos del empleado"
              },
              "aiAnalysis": {
                "done": true,
                "tested": true,
                "description": "An√°lisis con Ollama + Llama 3.1 (fortalezas, debilidades, recomendaciones)"
              },
              "comparison": {
                "done": true,
                "tested": true,
                "description": "Comparaci√≥n entre m√∫ltiples empleados"
              },
              "pdfExport": {
                "done": true,
                "tested": true,
                "description": "Exportaci√≥n PDF Premium con todas las secciones (Data Sheet, Flight Risk, Patrones, etc.)"
              },
              "userAuditHistory": {
                "done": true,
                "tested": true,
                "description": "Historial de cambios de datos del usuario"
              }
            },
            "files": [
              "src/services/Employee360Service.js",
              "src/routes/employee360Routes.js",
              "public/js/modules/employee-360.js",
              "src/models/UserAuditLog.js",
              "src/models/AdditionalRoleType.js",
              "migrations/20250125_create_user_audit_logs.sql",
              "migrations/20250125_add_medical_audit_fields.sql",
              "migrations/20250125_create_additional_roles_system.sql"
            ],
            "codeLocation": {
              "backend": [
                {
                  "file": "src/services/Employee360Service.js",
                  "lines": "1-1500+",
                  "description": "Servicio Premium: Data Sheet, 6D Scoring, Flight Risk, Behavior Patterns, AI Analysis"
                },
                {
                  "file": "src/routes/employee360Routes.js",
                  "lines": "1-400",
                  "description": "API REST del m√≥dulo"
                }
              ],
              "frontend": [
                {
                  "file": "public/js/modules/employee-360.js",
                  "lines": "1-2100+",
                  "description": "UI Premium: Tabs, Data Sheet, Flight Risk Meter, Behavior Patterns, PDF Export"
                }
              ]
            },
            "tables": [
              "user_audit_logs",
              "additional_role_types"
            ],
            "apiEndpoints": [
              "GET /api/employee-360/dashboard",
              "GET /api/employee-360/:userId/report",
              "GET /api/employee-360/:userId/summary",
              "GET /api/employee-360/:userId/timeline",
              "GET /api/employee-360/:userId/scoring",
              "POST /api/employee-360/compare",
              "GET /api/employee-360/:userId/export/pdf",
              "GET /api/employee-360/:userId/ai-analysis"
            ],
            "dependencies": [
              "users",
              "attendance"
            ],
            "integratesWith": [
              "attendance",
              "sanctions-management",
              "vacation-management",
              "training-management",
              "medical-dashboard"
            ],
            "knownIssues": [],
            "documentation": {
              "status": "pending",
              "file": "docs/modules/EMPLOYEE-360-MODULE.md"
            },
            "technologies": {
              "backend": [
                {
                  "name": "Express.js",
                  "description": "API REST para expedientes",
                  "icon": "‚ö°"
                },
                {
                  "name": "PostgreSQL",
                  "description": "Almacenamiento de auditor√≠a y datos",
                  "icon": "üêò"
                }
              ],
              "frontend": [
                {
                  "name": "Vanilla JS",
                  "description": "UI del m√≥dulo 360¬∞",
                  "icon": "üü®"
                },
                {
                  "name": "CSS3",
                  "description": "Estilos y animaciones",
                  "icon": "üé®"
                }
              ],
              "database": [
                {
                  "name": "PostgreSQL",
                  "description": "Tabla user_audit_logs",
                  "icon": "üêò"
                }
              ],
              "ai": [
                {
                  "name": "Ollama",
                  "description": "IA local para an√°lisis de empleados",
                  "icon": "üß†"
                },
                {
                  "name": "Llama 3.1",
                  "description": "Modelo de lenguaje para an√°lisis",
                  "icon": "ü¶ô"
                }
              ],
              "apis": [],
              "security": [],
              "realtime": [],
              "testing": []
            },
            "commercial": {
              "basePrice": 150,
              "isCore": false,
              "isPremium": true,
              "rubro": "RRHH Premium"
            }
          }
        ]
      },
      "totalModules": 24
    },
    {
      "title": "Modelo Comercial",
      "coreModules": 9,
      "enterpriseModules": 7,
      "commercialModules": 6
    },
    {
      "title": "Sistema de Vendedores y Comisiones",
      "hierarchy": [
        "CEO",
        "Gerentes",
        "Jefes",
        "Coordinadores",
        "Operativos"
      ],
      "commissionTypes": [
        "ventas",
        "soporte",
        "piramidal"
      ]
    },
    {
      "title": "Flujo Comercial",
      "currentWorkflows": 14,
      "pendingImplementations": [
        "budgets",
        "contracts",
        "invoicing",
        "commissionLiquidation",
        "collections"
      ]
    },
    {
      "title": "Panel Administrativo",
      "tabs": 14,
      "empresasTab": {
        "hasFilters": true,
        "hasExport": true,
        "canAddCompany": true
      }
    },
    {
      "title": "Estructura de Precios",
      "pricingModel": "modules * employees",
      "commissionTracking": true
    },
    {
      "title": "Notificaciones Proactivas",
      "status": "PRODUCTION",
      "channels": [
        "websocket",
        "email",
        "whatsapp",
        "in-app"
      ],
      "commercialEvents": 6
    },
    {
      "title": "Integraciones del Ecosistema",
      "coreIntegrations": 8,
      "commercialIntegrations": 4,
      "hasEngineeringDashboard": true
    },
    {
      "title": "Gaps y Mejoras",
      "pendingModules": 5,
      "empresasTabImprovements": 8
    },
    {
      "title": "Resumen Ejecutivo",
      "totalModules": 24,
      "commercialReadiness": 60,
      "prioritiesCount": 5
    }
  ]
}