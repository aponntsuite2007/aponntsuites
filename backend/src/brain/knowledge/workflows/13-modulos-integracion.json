{
  "version": "1.0.0",
  "generated": "2025-12-27T04:00:00Z",
  "purpose": "Documentaci√≥n de workflows e integraciones de 13 m√≥dulos investigados",
  "modules": {
    "ai-assistant": {
      "moduleKey": "ai-assistant",
      "moduleName": "Asistente IA con Ollama",
      "type": "chat_flotante",
      "frontend": "public/js/modules/ai-assistant-chat.js",
      "backend": "src/routes/assistantRoutes.js",
      "database": ["assistant_knowledge_base", "assistant_conversations"],
      "integration_type": "global_widget",
      "visible_in": ["panel-empresa.html"],

      "workflow": {
        "trigger": "Usuario hace click en bot√≥n flotante ü§ñ",
        "steps": [
          "1. Abrir chat window",
          "2. Usuario escribe pregunta",
          "3. Sistema busca en Knowledge Base (RAG)",
          "4. Si encuentra respuesta similar ‚Üí Retornar desde KB",
          "5. Si NO encuentra ‚Üí Generar con Ollama LLM",
          "6. Guardar pregunta + respuesta en KB (global)",
          "7. Usuario da feedback üëç o üëé",
          "8. Si üëé y no resolvi√≥ ‚Üí Escalar a ticket (user-support)"
        ],
        "technologies": ["Ollama", "Llama 3.1 8B", "RAG", "PostgreSQL JSONB"],
        "cost_monthly": "$0 (100% local)"
      },

      "dependencies": [
        {"module": "knowledge-base", "type": "backend_service", "reason": "Almacena Q&A para RAG"},
        {"module": "user-support", "type": "escalation", "reason": "Escala tickets si no resuelve"}
      ],

      "provides_to": [
        {"module": "ALL", "feature": "Ayuda contextual 24/7"},
        {"module": "user-support", "feature": "Deflecci√≥n de tickets"}
      ],

      "business_value": {
        "roi": "Alto - Reduce tickets de soporte en 30-50%",
        "competitive_advantage": "LLM local sin costos de API",
        "scalability": "Ilimitado - No hay rate limits"
      }
    },

    "auditor": {
      "moduleKey": "auditor",
      "moduleName": "Auditor y Testing Autom√°tico",
      "type": "tab_integrado",
      "frontend": "public/js/modules/engineering-dashboard.js",
      "backend": "src/routes/auditorRoutes.js",
      "database": ["audit_logs", "audit_executions"],
      "integration_type": "tab_in_engineering_dashboard",
      "visible_in": ["panel-administrativo.html#ingenieria"],

      "workflow": {
        "trigger": "Admin ejecuta auditor√≠a completa o de m√≥dulo",
        "steps": [
          "1. Admin selecciona 'Testing' tab en Engineering Dashboard",
          "2. Click en 'Ejecutar Auditor√≠a Completa'",
          "3. Sistema ejecuta tests de: endpoints, database, integraci√≥n, E2E, performance",
          "4. Registra resultados en audit_logs",
          "5. Si hay fallos ‚Üí Genera fixes sugeridos",
          "6. Admin puede aplicar auto-fix o reparar manualmente",
          "7. Brain analiza patterns de fallos para mejorar"
        ],
        "technologies": ["Playwright", "PostgreSQL", "AuditorEngine", "HybridHealer"],
        "test_types": ["endpoint", "database", "integration", "e2e", "performance", "security"]
      },

      "dependencies": [
        {"module": "engineering-dashboard", "type": "parent_container", "reason": "Renderiza UI del auditor"},
        {"module": "testing-metrics-dashboard", "type": "data_consumer", "reason": "Consume m√©tricas del auditor"}
      ],

      "provides_to": [
        {"module": "engineering-dashboard", "feature": "Health monitoring"},
        {"module": "auto-healing-dashboard", "feature": "Data de tests para auto-reparaci√≥n"},
        {"module": "ai-assistant", "feature": "Diagn√≥sticos autom√°ticos"}
      ],

      "business_value": {
        "roi": "Muy Alto - Reduce bugs en producci√≥n en 70%",
        "time_saved": "40 horas/semana de QA manual",
        "quality_improvement": "Coverage 100% con auto-healing"
      }
    },

    "companies": {
      "moduleKey": "companies",
      "moduleName": "Gesti√≥n de Empresas (Multi-Tenant)",
      "type": "modulo_standalone",
      "frontend": "public/js/modules/enterprise-companies-grid.js",
      "backend": "src/routes/aponntDashboard.js",
      "database": ["companies"],
      "integration_type": "admin_panel_section",
      "visible_in": ["panel-administrativo.html#empresas"],

      "workflow": {
        "trigger": "Super Admin gestiona empresas del sistema",
        "steps": [
          "1. Admin navega a #empresas",
          "2. Ve grid con todas las empresas (multi-tenant)",
          "3. CRUD completo: Crear, Editar, Activar/Desactivar",
          "4. Configurar m√≥dulos activos por empresa",
          "5. Configurar pricing y l√≠mites (max_employees, etc)",
          "6. Ver estad√≠sticas de uso por empresa"
        ],
        "fields": ["name", "slug", "contact_email", "phone", "address", "tax_id", "active_modules", "pricing"]
      },

      "dependencies": [],

      "provides_to": [
        {"module": "ALL", "feature": "Multi-tenancy global"},
        {"module": "users", "feature": "Scope de usuarios por empresa"},
        {"module": "attendance", "feature": "Asistencias separadas por empresa"}
      ],

      "business_value": {
        "roi": "Cr√≠tico - Base del sistema multi-tenant",
        "revenue_model": "Facturaci√≥n por empresa + m√≥dulos activos"
      }
    },

    "medical": {
      "moduleKey": "medical",
      "moduleName": "Medical Dashboard (PRE ‚Üí POST)",
      "type": "modulo_standalone",
      "frontend": "public/js/modules/medical-dashboard-professional.js",
      "backend": "src/routes/medicalRoutes.js",
      "database": ["medical_exams", "medical_exam_results", "medical_professionals"],
      "integration_type": "standalone_dashboard",
      "visible_in": ["panel-empresa.html#medical"],

      "workflow": {
        "trigger": "Empleado requiere examen m√©dico (ingreso o peri√≥dico)",
        "steps": [
          "1. RRHH programa examen PRE-ocupacional",
          "2. M√©dico profesional ingresa resultados",
          "3. Sistema genera certificado de aptitud",
          "4. Si NO apto ‚Üí No puede ingresar",
          "5. Si APTO ‚Üí Se asigna a puesto",
          "6. Cada 1-2 a√±os ‚Üí Examen peri√≥dico",
          "7. Al retirarse ‚Üí Examen POST-ocupacional",
          "8. Hist√≥rico m√©dico completo (auditable)"
        ],
        "exam_types": ["PRE-ocupacional", "Peri√≥dico", "POST-ocupacional", "Reintegro"],
        "legal_compliance": ["Ley 19587", "Decreto 1338/96", "Resoluci√≥n SRT"]
      },

      "dependencies": [
        {"module": "users", "type": "data_source", "reason": "Asocia ex√°menes a empleados"},
        {"module": "medical-associates", "type": "submodule", "reason": "Gesti√≥n de m√©dicos y centros m√©dicos"}
      ],

      "provides_to": [
        {"module": "users", "feature": "Estado m√©dico del empleado"},
        {"module": "organizational-structure", "feature": "Aptitud para puesto"},
        {"module": "audit-reports", "feature": "Reportes legales de salud ocupacional"}
      ],

      "business_value": {
        "roi": "Alto - Evita multas por incumplimiento legal",
        "compliance": "100% normativa argentina de salud ocupacional",
        "liability_reduction": "Reduce responsabilidad legal por accidentes"
      }
    },

    "notifications": {
      "moduleKey": "notifications",
      "moduleName": "Centro de Notificaciones con SLA",
      "type": "modulo_standalone",
      "frontend": "public/js/modules/notification-center.js",
      "backend": "src/routes/notificationRoutes.js",
      "database": ["notifications", "notification_sla_tracking"],
      "integration_type": "standalone_module",
      "visible_in": ["panel-empresa.html#notificaciones"],

      "workflow": {
        "trigger": "Sistema genera notificaci√≥n cr√≠tica/importante/info",
        "steps": [
          "1. Evento en sistema genera notificaci√≥n",
          "2. Sistema clasifica: CRITICAL (SLA 5 min), IMPORTANT (SLA 1 hora), INFO (sin SLA)",
          "3. Env√≠a a destinatarios via: UI, Email, SMS (si configurado)",
          "4. Tracking de lectura y confirmaci√≥n",
          "5. Si CRITICAL no le√≠da en 5 min ‚Üí Escala a manager",
          "6. Si manager no lee ‚Üí Escala a director",
          "7. Dashboard SLA muestra m√©tricas en tiempo real"
        ],
        "sla_levels": {
          "CRITICAL": "5 minutos ‚Üí Escala a manager",
          "IMPORTANT": "1 hora ‚Üí Escala a manager",
          "INFO": "Sin SLA"
        }
      },

      "dependencies": [
        {"module": "users", "type": "recipients", "reason": "Env√≠a notificaciones a usuarios"},
        {"module": "organizational-structure", "type": "escalation_chain", "reason": "Escala por jerarqu√≠a"}
      ],

      "provides_to": [
        {"module": "ALL", "feature": "Sistema de notificaciones enterprise"},
        {"module": "attendance", "feature": "Alertas de asistencia"},
        {"module": "medical", "feature": "Recordatorios de ex√°menes vencidos"}
      ],

      "business_value": {
        "roi": "Medio-Alto - Mejora time-to-response en incidentes",
        "sla_compliance": "95%+ de notificaciones cr√≠ticas atendidas a tiempo"
      }
    },

    "user-support": {
      "moduleKey": "user-support",
      "moduleName": "Sistema de Tickets de Soporte",
      "type": "modulo_standalone",
      "frontend": "public/js/modules/user-support-dashboard.js",
      "backend": "src/routes/supportRoutesV2.js",
      "database": ["support_tickets", "support_messages", "support_escalations"],
      "integration_type": "standalone_module",
      "visible_in": ["panel-empresa.html#soporte"],

      "workflow": {
        "trigger": "Usuario crea ticket o AI Assistant escala",
        "steps": [
          "1. Usuario crea ticket (o AI escalate autom√°tico)",
          "2. Sistema asigna a agente disponible",
          "3. Agente responde (conversaci√≥n thread)",
          "4. Si no resuelve en SLA ‚Üí Escala a nivel 2",
          "5. Si resuelve ‚Üí Usuario confirma cierre",
          "6. Rating y feedback del usuario",
          "7. Knowledge Base aprende de resoluciones"
        ],
        "ticket_types": ["Pregunta", "Problema T√©cnico", "Solicitud", "Incidente"],
        "sla_by_priority": {
          "CRITICAL": "30 minutos primera respuesta",
          "HIGH": "2 horas primera respuesta",
          "MEDIUM": "8 horas primera respuesta",
          "LOW": "24 horas primera respuesta"
        }
      },

      "dependencies": [
        {"module": "ai-assistant", "type": "deflection", "reason": "AI intenta resolver antes de crear ticket"},
        {"module": "users", "type": "data_source", "reason": "Usuarios que abren tickets"}
      ],

      "provides_to": [
        {"module": "ai-assistant", "feature": "Aprende de resoluciones de tickets"},
        {"module": "knowledge-base", "feature": "Alimenta KB con soluciones"}
      ],

      "business_value": {
        "roi": "Alto - Mejora satisfacci√≥n de usuarios",
        "efficiency": "30-50% de tickets deflectados por AI Assistant",
        "cost_reduction": "Reduce necesidad de agentes de soporte"
      }
    },

    "vendors": {
      "moduleKey": "vendors",
      "moduleName": "Gesti√≥n de Vendedores y Comisiones",
      "type": "modulo_standalone",
      "frontend": "public/js/modules/vendor-dashboard.js",
      "backend": "src/routes/vendorRoutes.js",
      "database": ["vendors", "vendor_sales", "vendor_commissions"],
      "integration_type": "standalone_crm",
      "visible_in": ["panel-empresa.html#vendedores"],

      "workflow": {
        "trigger": "Vendedor registra venta o cumple objetivo",
        "steps": [
          "1. Vendedor ingresa venta realizada",
          "2. Sistema valida contra company (cliente)",
          "3. Calcula comisi√≥n seg√∫n reglas configuradas",
          "4. Tracking de objetivos mensuales/anuales",
          "5. Dashboard muestra performance vs target",
          "6. Al fin de mes ‚Üí Genera reporte de comisiones",
          "7. Integraci√≥n con payroll para pago autom√°tico"
        ],
        "commission_types": ["Porcentaje fijo", "Escalonado por volumen", "Bono por objetivo cumplido"]
      },

      "dependencies": [
        {"module": "companies", "type": "sales_target", "reason": "Ventas asociadas a empresas cliente"},
        {"module": "users", "type": "vendor_users", "reason": "Vendedores son usuarios del sistema"}
      ],

      "provides_to": [
        {"module": "payroll-liquidation", "feature": "Comisiones para incluir en liquidaci√≥n"}
      ],

      "business_value": {
        "roi": "Medio - Mejora motivaci√≥n de equipo de ventas",
        "automation": "100% de c√°lculo de comisiones automatizado"
      }
    },

    "knowledge-base": {
      "moduleKey": "knowledge-base",
      "moduleName": "Knowledge Base (Backend RAG)",
      "type": "backend_service",
      "frontend": null,
      "backend": "Integrado en ai-assistant",
      "database": ["assistant_knowledge_base"],
      "integration_type": "backend_only",
      "visible_in": [],

      "workflow": {
        "trigger": "AI Assistant necesita buscar respuesta",
        "steps": [
          "1. AI recibe pregunta del usuario",
          "2. Genera embedding vectorial de la pregunta",
          "3. Busca en KB con similitud coseno",
          "4. Si similarity > 0.7 ‚Üí Retorna respuesta cached",
          "5. Si no ‚Üí LLM genera nueva respuesta",
          "6. Nueva respuesta se guarda en KB para futuros usos"
        ],
        "technology": ["PostgreSQL JSONB", "Vector similarity", "RAG"]
      },

      "dependencies": [],

      "provides_to": [
        {"module": "ai-assistant", "feature": "RAG search + response caching"}
      ],

      "business_value": {
        "roi": "Alto - Reduce latencia de respuestas en 80%",
        "learning": "Knowledge base crece autom√°ticamente"
      }
    },

    "kiosks-apk": {
      "moduleKey": "kiosks-apk",
      "moduleName": "Kiosk APK Manager",
      "type": "mobile_app_manager",
      "frontend": "Gesti√≥n en panel-empresa (download manager)",
      "backend": "APK hosting + version control",
      "database": ["kiosk_versions", "kiosk_devices"],
      "integration_type": "hybrid_web_mobile",
      "visible_in": ["panel-empresa.html (download section)"],

      "workflow": {
        "trigger": "Admin sube nueva versi√≥n de APK o dispositivo solicita update",
        "steps": [
          "1. Admin sube nuevo APK a servidor",
          "2. Sistema valida firma y versi√≥n",
          "3. Registra en DB: version, changelog, min SDK",
          "4. Dispositivos kiosko consultan updates",
          "5. Si hay nueva versi√≥n ‚Üí Auto-update o notificaci√≥n",
          "6. Tracking de dispositivos activos y versiones instaladas"
        ]
      },

      "dependencies": [],

      "provides_to": [
        {"module": "attendance", "feature": "Registro desde kiosko biom√©trico"}
      ],

      "business_value": {
        "roi": "Medio - Facilita deployment de updates",
        "operational": "Gesti√≥n centralizada de 100+ kioskos"
      }
    },

    "medical-associates": {
      "moduleKey": "medical-associates",
      "moduleName": "M√©dicos y Centros M√©dicos",
      "type": "submodulo_integrado",
      "frontend": "Tab en medical-dashboard-professional.js",
      "backend": "Integrado en medicalRoutes.js",
      "database": ["medical_professionals", "medical_centers"],
      "integration_type": "tab_in_medical",
      "visible_in": ["panel-empresa.html#medical (tab Asociados)"],

      "workflow": {
        "trigger": "RRHH gestiona m√©dicos y centros m√©dicos",
        "steps": [
          "1. Registrar m√©dico profesional (matr√≠cula, especialidad)",
          "2. Registrar centro m√©dico (nombre, direcci√≥n, convenio)",
          "3. Asignar m√©dicos a centros",
          "4. Al programar examen ‚Üí Seleccionar m√©dico y centro",
          "5. M√©dico ingresa resultados con su firma digital"
        ]
      },

      "dependencies": [
        {"module": "medical", "type": "parent_module", "reason": "Es un tab del m√≥dulo medical"}
      ],

      "provides_to": [
        {"module": "medical", "feature": "Red de m√©dicos para ex√°menes"}
      ],

      "business_value": {
        "roi": "Medio - Facilita gesti√≥n de red m√©dica",
        "compliance": "Trazabilidad de profesionales habilitados"
      }
    },

    "partners": {
      "moduleKey": "partners",
      "moduleName": "Partners y Marketplace",
      "type": "dual_panel",
      "frontend": ["public/js/modules/partners-admin.js", "public/js/modules/partners-marketplace.js"],
      "backend": "src/routes/partnersRoutes.js",
      "database": ["partners", "partner_products", "partner_sales"],
      "integration_type": "admin_and_marketplace",
      "visible_in": ["panel-administrativo.html", "panel-asociados.html"],

      "workflow": {
        "trigger": "Partner registra producto o asociado compra",
        "steps": [
          "1. Admin aprueba partner y productos",
          "2. Partner sube cat√°logo de productos/servicios",
          "3. Asociados ven marketplace en su panel",
          "4. Asociado realiza compra",
          "5. Sistema notifica a partner",
          "6. Partner cumple venta y confirma",
          "7. Sistema calcula comisi√≥n para plataforma"
        ]
      },

      "dependencies": [
        {"module": "users", "type": "buyers", "reason": "Asociados que compran"}
      ],

      "provides_to": [
        {"module": "users", "feature": "Marketplace de beneficios"}
      ],

      "business_value": {
        "roi": "Alto - Nueva fuente de revenue (comisiones)",
        "ecosystem": "Expande ecosistema de partners"
      }
    },

    "temporary-access": {
      "moduleKey": "temporary-access",
      "moduleName": "Accesos Temporales",
      "type": "feature_integrada",
      "frontend": "Dropdown en users.js",
      "backend": "Tokens temporales en authRoutes.js",
      "database": ["temporary_access_tokens"],
      "integration_type": "dropdown_option_in_users",
      "visible_in": ["panel-empresa.html#usuarios (dropdown action)"],

      "workflow": {
        "trigger": "Admin necesita dar acceso temporal a usuario externo",
        "steps": [
          "1. Admin selecciona usuario ‚Üí 'Generar acceso temporal'",
          "2. Define duraci√≥n (1 hora, 1 d√≠a, 1 semana)",
          "3. Define permisos limitados",
          "4. Sistema genera token √∫nico",
          "5. Admin env√≠a link + token a usuario externo",
          "6. Usuario accede con token (sin credenciales)",
          "7. Al vencer tiempo ‚Üí Token se invalida autom√°ticamente"
        ]
      },

      "dependencies": [
        {"module": "users", "type": "parent_module", "reason": "Es una acci√≥n dentro de users"}
      ],

      "provides_to": [
        {"module": "users", "feature": "Accesos temporales seguros"}
      ],

      "business_value": {
        "roi": "Bajo-Medio - Facilita colaboraci√≥n con externos",
        "security": "Accesos limitados y auto-expirantes"
      }
    },

    "testing-metrics-dashboard": {
      "moduleKey": "testing-metrics-dashboard",
      "moduleName": "M√©tricas de Testing",
      "type": "tab_integrado",
      "frontend": "Tab en engineering-dashboard.js",
      "backend": "Consume data de auditor",
      "database": ["audit_logs"],
      "integration_type": "tab_in_engineering_dashboard",
      "visible_in": ["panel-administrativo.html#ingenieria (tab M√©tricas)"],

      "workflow": {
        "trigger": "Admin quiere ver m√©tricas hist√≥ricas de testing",
        "steps": [
          "1. Admin selecciona tab 'M√©tricas' en Engineering Dashboard",
          "2. Sistema muestra gr√°ficos de: coverage, pass rate, time trends",
          "3. Filtros por: m√≥dulo, fecha, tipo de test",
          "4. Export a PDF/Excel para reportes ejecutivos"
        ]
      },

      "dependencies": [
        {"module": "auditor", "type": "data_source", "reason": "Consume data de audit_logs"},
        {"module": "engineering-dashboard", "type": "parent_container", "reason": "Se renderiza como tab"}
      ],

      "provides_to": [
        {"module": "engineering-dashboard", "feature": "M√©tricas visuales de QA"}
      ],

      "business_value": {
        "roi": "Medio - Mejora visibilidad de calidad",
        "reporting": "Reportes ejecutivos autom√°ticos"
      }
    }
  },

  "summary": {
    "total_modules": 13,
    "standalone_modules": 6,
    "integrated_tabs": 3,
    "backend_services": 1,
    "mobile_apps": 1,
    "feature_integrated": 2,
    "high_business_value": ["ai-assistant", "auditor", "medical", "notifications", "user-support"],
    "revenue_generating": ["vendors", "partners"],
    "compliance_critical": ["medical", "companies"]
  }
}
