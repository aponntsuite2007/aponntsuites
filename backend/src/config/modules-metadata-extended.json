{
  "metadata_version": "2.0.0",
  "generated_at": "2025-11-02T21:24:57.934Z",
  "generated_by": "Unified Knowledge Service - Auto-Update",
  "total_modules": 59,
  "modules": {
    "document-expiration": {
      "module_key": "document-expiration",
      "name": "Documentos Vencibles",
      "name_alt": "Sistema de Gesti√≥n de Documentos con Notificaciones Autom√°ticas",
      "icon": "üìÑ",
      "color": "#795548",
      "category": "rrhh",
      "version": "1.0.0",
      "changelog": [
        {
          "version": "1.0.0",
          "date": "2025-10-31",
          "author": "Claude Code",
          "type": "feature",
          "summary": "Implementaci√≥n inicial completa",
          "changes": [
            "Sistema de notificaciones autom√°ticas 30 d√≠as antes del vencimiento",
            "CRUD completo de documentos personales",
            "Integraci√≥n con NotificationEnterpriseService",
            "Scheduler diario a las 10:00 AM timezone Argentina",
            "Frontend con badges de estado (Vigente, Por vencer, Vencido)",
            "Soporte para 6 tipos de documentos",
            "Verificaci√≥n de documentos por RRHH",
            "URLs para documentos escaneados"
          ],
          "files_created": [
            "src/routes/userDocumentsRoutes.js",
            "public/js/modules/document-expiration-manager.js",
            "src/services/DocumentExpirationScheduler.js"
          ],
          "files_modified": [
            "server.js",
            "src/models/UserDocuments.js"
          ],
          "migrations": [],
          "database_impact": {
            "tables_used": [
              "user_documents",
              "users"
            ],
            "new_fields": [],
            "modified_fields": []
          }
        }
      ],
      "description": {
        "short": "Gesti√≥n de documentos personales con fechas de vencimiento y notificaciones autom√°ticas",
        "long": "Sistema completo para gestionar documentos personales de empleados (DNI, pasaportes, licencias, visas, certificados) con notificaciones autom√°ticas 30 d√≠as antes del vencimiento. Incluye validaci√≥n de documentos requeridos seg√∫n funci√≥n del empleado y verificaci√≥n por RRHH.",
        "business_value": "Previene problemas legales por documentaci√≥n vencida, asegura cumplimiento normativo, reduce riesgos laborales y mejora gesti√≥n de RRHH.",
        "use_cases": [
          "Empleados que viajan al exterior ‚Üí pasaporte obligatorio y vigente",
          "Conductores de veh√≠culos ‚Üí licencia vigente obligatoria",
          "Extranjeros ‚Üí visa de trabajo vigente",
          "Certificados de antecedentes seg√∫n regulaci√≥n local"
        ]
      },
      "subm√≥dulos": [
        {
          "key": "documentos-vencibles",
          "name": "Gesti√≥n de Documentos",
          "description": "CRUD completo de documentos personales con validaciones",
          "icon": "üìã",
          "campos": [
            {
              "key": "document_type",
              "label": "Tipo de Documento",
              "type": "ENUM",
              "required": true,
              "values": [
                "dni",
                "pasaporte",
                "licencia_conducir",
                "visa",
                "certificado_antecedentes",
                "otro"
              ],
              "labels": {
                "dni": "DNI / Documento Nacional de Identidad",
                "pasaporte": "Pasaporte",
                "licencia_conducir": "Licencia de Conducir",
                "visa": "Visa de Trabajo",
                "certificado_antecedentes": "Certificado de Antecedentes",
                "otro": "Otro Documento"
              },
              "help_text": "Seleccione el tipo de documento personal. Algunos documentos son obligatorios seg√∫n la funci√≥n del empleado.",
              "tooltip": "Tipos de documentos: DNI (obligatorio para todos), Pasaporte (obligatorio si viaja), Licencia (obligatorio si conduce), Visa (obligatorio para extranjeros)",
              "business_rules": [
                {
                  "id": "BR-DOC-001",
                  "condition": "user.job_function.requires_international_travel === true",
                  "action": "REQUIRE_VALUE",
                  "value": "pasaporte",
                  "message": "‚ùó Pasaporte obligatorio: Su funci√≥n requiere viajes al exterior",
                  "severity": "error",
                  "auto_notify": true,
                  "notification_template": "passport_required"
                },
                {
                  "id": "BR-DOC-002",
                  "condition": "user.job_function.drives_company_vehicle === true",
                  "action": "REQUIRE_VALUE",
                  "value": "licencia_conducir",
                  "message": "‚ùó Licencia de conducir obligatoria: Su funci√≥n requiere conducir veh√≠culos de la empresa",
                  "severity": "error",
                  "auto_notify": true,
                  "notification_template": "license_required"
                },
                {
                  "id": "BR-DOC-003",
                  "condition": "user.nationality !== 'AR' && user.employment_status === 'active'",
                  "action": "REQUIRE_VALUE",
                  "value": "visa",
                  "message": "‚ùó Visa de trabajo obligatoria: Empleados extranjeros deben tener visa vigente",
                  "severity": "error",
                  "auto_notify": true,
                  "notification_template": "visa_required"
                }
              ],
              "validations": [
                {
                  "type": "required",
                  "message": "Debe seleccionar un tipo de documento"
                },
                {
                  "type": "enum",
                  "allowed_values": [
                    "dni",
                    "pasaporte",
                    "licencia_conducir",
                    "visa",
                    "certificado_antecedentes",
                    "otro"
                  ],
                  "message": "Tipo de documento no v√°lido"
                }
              ]
            },
            {
              "key": "document_number",
              "label": "N√∫mero de Documento",
              "type": "STRING",
              "required": false,
              "max_length": 50,
              "help_text": "N√∫mero o c√≥digo del documento (ej: 12345678, ABC123456)",
              "tooltip": "Ingrese el n√∫mero del documento tal como aparece en el mismo",
              "validations": [
                {
                  "type": "alphanumeric",
                  "message": "Solo se permiten n√∫meros y letras"
                }
              ]
            },
            {
              "key": "issue_date",
              "label": "Fecha de Emisi√≥n",
              "type": "DATE",
              "required": false,
              "help_text": "Fecha en que se emiti√≥ el documento",
              "tooltip": "Fecha de emisi√≥n del documento",
              "validations": [
                {
                  "type": "past_date",
                  "message": "La fecha de emisi√≥n no puede ser futura"
                },
                {
                  "type": "logical_sequence",
                  "before": "expiration_date",
                  "message": "La fecha de emisi√≥n debe ser anterior a la fecha de vencimiento"
                }
              ]
            },
            {
              "key": "expiration_date",
              "label": "Fecha de Vencimiento",
              "type": "DATE",
              "required": false,
              "help_text": "Fecha de vencimiento del documento (dejar vac√≠o si no vence)",
              "tooltip": "‚ö†Ô∏è Importante: Recibir√° notificaci√≥n 30 d√≠as antes del vencimiento. Algunos documentos nunca vencen (ej: DNI argentino)",
              "alert_thresholds": {
                "urgent": 7,
                "high": 15,
                "medium": 30
              },
              "validations": [
                {
                  "type": "future_or_null",
                  "message": "La fecha de vencimiento debe ser futura o vac√≠a"
                }
              ]
            },
            {
              "key": "is_verified",
              "label": "Verificado por RRHH",
              "type": "BOOLEAN",
              "default": false,
              "help_text": "Indica si el documento fue verificado f√≠sicamente por RRHH",
              "tooltip": "‚úì Verificado: RRHH confirm√≥ la autenticidad del documento original",
              "requires_permission": "rrhh_admin"
            }
          ],
          "ui_config": {
            "table": {
              "default_sort": "expiration_date ASC NULLS LAST",
              "columns": [
                "document_type",
                "document_number",
                "issue_date",
                "expiration_date",
                "status",
                "actions"
              ],
              "badges": {
                "vigente": {
                  "color": "success",
                  "icon": "‚úì",
                  "days_min": 31
                },
                "por_vencer": {
                  "color": "warning",
                  "icon": "‚ö†Ô∏è",
                  "days_min": 8,
                  "days_max": 30
                },
                "vence_pronto": {
                  "color": "danger",
                  "icon": "‚ùó",
                  "days_min": 1,
                  "days_max": 7
                },
                "vencido": {
                  "color": "danger",
                  "icon": "‚úñ",
                  "days_max": 0
                }
              }
            },
            "modal": {
              "size": "lg",
              "sections": [
                {
                  "title": "Informaci√≥n del Documento",
                  "fields": [
                    "document_type",
                    "document_number"
                  ]
                },
                {
                  "title": "Fechas",
                  "fields": [
                    "issue_date",
                    "expiration_date"
                  ]
                },
                {
                  "title": "Detalles Adicionales",
                  "fields": [
                    "issuing_authority",
                    "file_url",
                    "notes"
                  ]
                },
                {
                  "title": "Verificaci√≥n",
                  "fields": [
                    "is_verified"
                  ],
                  "visible_for_roles": [
                    "admin",
                    "rrhh"
                  ]
                }
              ]
            }
          }
        }
      ],
      "endpoints": {
        "base_path": "/api/v1",
        "routes": [
          {
            "method": "GET",
            "path": "/users/:userId/documents",
            "description": "Obtener todos los documentos de un usuario",
            "auth": "required",
            "permissions": [
              "read_own_documents",
              "read_all_documents"
            ],
            "response_type": "array",
            "response_example": "[{id: 1, document_type: 'pasaporte', ...}]"
          },
          {
            "method": "GET",
            "path": "/users/:userId/documents/:documentId",
            "description": "Obtener un documento espec√≠fico",
            "auth": "required",
            "permissions": [
              "read_own_documents",
              "read_all_documents"
            ]
          },
          {
            "method": "POST",
            "path": "/users/:userId/documents",
            "description": "Crear nuevo documento",
            "auth": "required",
            "permissions": [
              "create_own_documents",
              "create_all_documents"
            ],
            "triggers_notification": true,
            "notification_condition": "if expiration_date within 30 days"
          },
          {
            "method": "PUT",
            "path": "/users/:userId/documents/:documentId",
            "description": "Actualizar documento existente",
            "auth": "required",
            "permissions": [
              "update_own_documents",
              "update_all_documents"
            ],
            "triggers_notification": true,
            "notification_condition": "if expiration_date changed"
          },
          {
            "method": "DELETE",
            "path": "/users/:userId/documents/:documentId",
            "description": "Eliminar documento",
            "auth": "required",
            "permissions": [
              "delete_own_documents",
              "delete_all_documents"
            ]
          },
          {
            "method": "GET",
            "path": "/documents/expiring",
            "description": "Obtener documentos que vencen pronto (dashboard)",
            "auth": "required",
            "permissions": [
              "view_dashboard"
            ],
            "query_params": {
              "days": "n√∫mero de d√≠as (default: 30)"
            }
          }
        ]
      },
      "database": {
        "tables": [
          {
            "name": "user_documents",
            "model": "UserDocuments",
            "primary_key": "id",
            "fields_used": [
              "id",
              "user_id",
              "company_id",
              "document_type",
              "document_number",
              "issue_date",
              "expiration_date",
              "issuing_authority",
              "file_url",
              "notes",
              "is_verified",
              "created_at",
              "updated_at"
            ],
            "indexes": [
              "idx_user_documents_user_id",
              "idx_user_documents_company_id",
              "idx_user_documents_expiration_date"
            ],
            "relations": [
              {
                "type": "belongsTo",
                "model": "User",
                "foreign_key": "user_id"
              }
            ]
          }
        ]
      },
      "files": {
        "backend": [
          {
            "path": "src/routes/userDocumentsRoutes.js",
            "type": "route",
            "lines": 300,
            "description": "API REST completa para documentos vencibles",
            "exports": "router"
          },
          {
            "path": "src/services/DocumentExpirationScheduler.js",
            "type": "service",
            "lines": 230,
            "description": "Scheduler para notificaciones autom√°ticas",
            "cron": "0 10 * * *",
            "timezone": "America/Argentina/Buenos_Aires"
          }
        ],
        "frontend": [
          {
            "path": "public/js/modules/document-expiration-manager.js",
            "type": "manager",
            "lines": 400,
            "description": "Manager frontend con CRUD completo",
            "class": "DocumentExpirationManager",
            "methods": [
              "init",
              "loadDocuments",
              "showAddModal",
              "editDocument",
              "deleteDocument"
            ]
          }
        ],
        "models": [
          {
            "path": "src/models/UserDocuments.js",
            "type": "model",
            "sequelize": true,
            "table": "user_documents"
          }
        ]
      },
      "integrations": [
        {
          "module": "notifications-enterprise",
          "type": "OPTIONAL",
          "auto_detect": true,
          "detection_method": "Check SystemModule.isActive for 'notifications-enterprise'",
          "adapts_behavior": {
            "if_active": {
              "description": "Env√≠a notificaciones proactivas v√≠a email/SMS/push",
              "features": [
                "Notificaci√≥n 30 d√≠as antes del vencimiento",
                "Escalamiento autom√°tico (30 d√≠as, 15 d√≠as, 7 d√≠as, vencido)",
                "Copia a supervisor y RRHH",
                "Requiere confirmaci√≥n de recepci√≥n",
                "Trackeo de lectura y respuesta"
              ],
              "notification_templates": [
                "document_expiring_30days",
                "document_expiring_15days",
                "document_expiring_7days",
                "document_expired",
                "document_required_missing"
              ]
            },
            "if_inactive": {
              "description": "Solo muestra alertas visuales en UI",
              "features": [
                "Badges de estado en tabla",
                "Alertas en modal de edici√≥n",
                "Dashboard con documentos pr√≥ximos a vencer"
              ]
            }
          }
        },
        {
          "module": "users",
          "type": "REQUIRED",
          "provides": "Agrega subm√≥dulo de documentos en perfil de usuario",
          "extends_ui": "panel-empresa.html ‚Üí secci√≥n Empleados ‚Üí Tab Documentos"
        },
        {
          "module": "medical-exams",
          "type": "RELATED",
          "relationship": "Complementario - ambos gestionan documentaci√≥n personal"
        }
      ],
      "notifications": {
        "enabled": true,
        "requires_module": "notifications-enterprise",
        "templates": [
          {
            "key": "document_expiring_30days",
            "title": "‚ö†Ô∏è Documento pr√≥ximo a vencer - 30 d√≠as",
            "priority": "medium",
            "requires_response": false,
            "copy_to": [
              "supervisor",
              "rrhh"
            ],
            "channels": [
              "email",
              "push"
            ],
            "message_template": "Su {{document_type}} vence el {{expiration_date}}. Por favor renueve el documento a la brevedad."
          },
          {
            "key": "document_expiring_7days",
            "title": "‚ùó URGENTE: Documento vence en 7 d√≠as",
            "priority": "high",
            "requires_response": true,
            "copy_to": [
              "supervisor",
              "rrhh",
              "legal"
            ],
            "channels": [
              "email",
              "sms",
              "push"
            ],
            "message_template": "URGENTE: Su {{document_type}} vence el {{expiration_date}}. Debe renovarlo INMEDIATAMENTE para evitar problemas legales."
          },
          {
            "key": "document_expired",
            "title": "üö® CR√çTICO: Documento VENCIDO",
            "priority": "urgent",
            "requires_response": true,
            "copy_to": [
              "supervisor",
              "rrhh",
              "legal",
              "admin"
            ],
            "channels": [
              "email",
              "sms",
              "push",
              "in_app"
            ],
            "message_template": "CR√çTICO: Su {{document_type}} VENCI√ì el {{expiration_date}}. Su situaci√≥n laboral puede verse afectada. Contacte a RRHH INMEDIATAMENTE."
          }
        ]
      },
      "metrics": {
        "tracked": [
          "documents_total",
          "documents_expiring_30days",
          "documents_expiring_7days",
          "documents_expired",
          "documents_verified_percentage",
          "avg_time_to_renewal"
        ],
        "dashboards": [
          {
            "name": "Documentaci√≥n Vencible",
            "charts": [
              {
                "type": "gauge",
                "metric": "documents_verified_percentage",
                "title": "% Documentos Verificados",
                "thresholds": {
                  "red": 60,
                  "yellow": 80,
                  "green": 90
                }
              },
              {
                "type": "bar",
                "metric": "documents_by_type",
                "title": "Documentos por Tipo"
              },
              {
                "type": "timeline",
                "metric": "expiration_timeline",
                "title": "L√≠nea de tiempo de vencimientos"
              }
            ]
          }
        ]
      },
      "health_indicators": {
        "critical": [
          {
            "id": "HI-DOC-001",
            "metric": "documents_expired_count",
            "threshold": 0,
            "operator": ">",
            "severity": "critical",
            "message": "Hay documentos vencidos - riesgo legal ALTO"
          }
        ],
        "warnings": [
          {
            "id": "HI-DOC-002",
            "metric": "documents_expiring_7days_count",
            "threshold": 5,
            "operator": ">",
            "severity": "warning",
            "message": "M√°s de 5 documentos vencen en 7 d√≠as"
          }
        ]
      },
      "testing": {
        "test_coverage": 0,
        "test_files": [],
        "test_scenarios": [
          "Crear documento con fecha de vencimiento",
          "Crear documento sin fecha de vencimiento",
          "Actualizar fecha de vencimiento ‚Üí debe disparar notificaci√≥n",
          "Verificar scheduler ejecuta a las 10:00 AM",
          "Validar business rules (pasaporte si viaja)",
          "Verificar consolidaci√≥n de notificaciones por usuario"
        ]
      },
      "known_issues": [],
      "todo": [
        "Agregar upload de archivos directo (no solo URL)",
        "OCR para extraer datos del documento escaneado",
        "Integraci√≥n con RENAPER para validaci√≥n de DNI argentino",
        "Recordatorios autom√°ticos para renovaci√≥n",
        "Workflow de aprobaci√≥n para documentos cr√≠ticos"
      ],
      "_source": "extended_json",
      "_loaded_at": "2025-11-02T21:24:57.131Z"
    },
    "medical-exams": {
      "module_key": "medical-exams",
      "name": "Ex√°menes M√©dicos",
      "name_alt": "Sistema de Gesti√≥n de Ex√°menes M√©dicos Ocupacionales con Periodicidad Autom√°tica",
      "icon": "üè•",
      "color": "#4CAF50",
      "category": "rrhh",
      "version": "1.0.0",
      "changelog": [
        {
          "version": "1.0.0",
          "date": "2025-01-31",
          "author": "Claude Code",
          "type": "feature",
          "summary": "Implementaci√≥n inicial completa de sistema m√©dico ocupacional",
          "changes": [
            "5 tipos de ex√°menes m√©dicos (preocupacional, peri√≥dico, reingreso, retiro, especial)",
            "C√°lculo autom√°tico de pr√≥ximo examen v√≠a trigger SQL",
            "Periodicidad configurable (mensual, trimestral, semestral, anual, bienal, personalizado)",
            "Notificaciones autom√°ticas 30 d√≠as antes del pr√≥ximo examen",
            "Scheduler diario a las 11:00 AM timezone Argentina",
            "Frontend con secciones condicionales seg√∫n tipo de examen",
            "Integraci√≥n con NotificationEnterpriseService",
            "Tracking de aptitud laboral (apto, apto con observaciones, no apto, pendiente)",
            "Soporte para certificados m√©dicos digitales",
            "Validaci√≥n de centros m√©dicos y doctores"
          ],
          "files_created": [
            "src/routes/userMedicalExamsRoutes.js",
            "public/js/modules/medical-exams-manager.js",
            "src/services/MedicalExamExpirationScheduler.js",
            "migrations/20251031_add_medical_exam_frequency_fields.sql"
          ],
          "files_modified": [
            "server.js",
            "src/models/UserMedicalExams.js"
          ],
          "migrations": [
            "20251031_add_medical_exam_frequency_fields"
          ],
          "database_impact": {
            "tables_used": [
              "user_medical_exams",
              "users"
            ],
            "new_fields": [
              "exam_frequency",
              "frequency_months",
              "auto_calculate_next_exam"
            ],
            "modified_fields": [],
            "triggers_created": [
              "calculate_next_medical_exam"
            ]
          }
        }
      ],
      "description": {
        "short": "Gesti√≥n completa de ex√°menes m√©dicos ocupacionales con periodicidad autom√°tica y notificaciones proactivas",
        "long": "Sistema profesional para gesti√≥n de ex√°menes m√©dicos laborales seg√∫n Ley de Riesgos del Trabajo. Incluye 5 tipos de ex√°menes (preocupacional, peri√≥dico, reingreso, retiro, especial), c√°lculo autom√°tico de pr√≥ximo examen basado en periodicidad configurable, notificaciones 30 d√≠as antes, tracking de aptitud laboral y certificados m√©dicos digitales.",
        "business_value": "Asegura cumplimiento legal de la Ley 24.557 de Riesgos del Trabajo, previene sanciones por incumplimiento, protege la salud de empleados, reduce riesgos laborales y automatiza procesos de RRHH.",
        "use_cases": [
          "Examen preocupacional antes de contratar ‚Üí asegura aptitud para el puesto",
          "Ex√°menes peri√≥dicos seg√∫n exposici√≥n a riesgos ‚Üí anual para oficina, semestral para riesgos medios, mensual para alto riesgo",
          "Examen de reingreso despu√©s de licencias prolongadas ‚Üí valida condici√≥n actual",
          "Examen de retiro ‚Üí documenta estado de salud al finalizar relaci√≥n laboral",
          "Ex√°menes especiales ‚Üí cambio de puesto, incidente laboral, exposici√≥n accidental"
        ]
      },
      "subm√≥dulos": [
        {
          "key": "examenes-medicos",
          "name": "Gesti√≥n de Ex√°menes M√©dicos",
          "description": "CRUD completo de ex√°menes m√©dicos ocupacionales con validaciones legales",
          "icon": "ü©∫",
          "campos": [
            {
              "key": "exam_type",
              "label": "Tipo de Examen",
              "type": "ENUM",
              "required": true,
              "values": [
                "preocupacional",
                "periodico",
                "reingreso",
                "retiro",
                "especial"
              ],
              "labels": {
                "preocupacional": "Preocupacional (Ingreso)",
                "periodico": "Peri√≥dico (Rutina)",
                "reingreso": "Reingreso (Post-Licencia)",
                "retiro": "Retiro (Egreso)",
                "especial": "Especial (Incidente/Cambio)"
              },
              "help_text": "Tipo de examen seg√∫n Ley 24.557 de Riesgos del Trabajo. Preocupacional es obligatorio antes de contratar, peri√≥dico se repite seg√∫n riesgo del puesto.",
              "tooltip": "üìã Tipos legales: Preocupacional (antes de contratar), Peri√≥dico (seg√∫n riesgo: bajo=anual, medio=semestral, alto=mensual), Reingreso (licencias >60 d√≠as), Retiro (fin de relaci√≥n laboral), Especial (cambio de puesto, incidente)",
              "business_rules": [
                {
                  "id": "BR-MED-001",
                  "condition": "user.employment_status === 'applicant'",
                  "action": "REQUIRE_VALUE",
                  "value": "preocupacional",
                  "message": "‚ùó Examen preocupacional obligatorio: No se puede contratar sin examen m√©dico de ingreso",
                  "severity": "error",
                  "auto_notify": true,
                  "notification_template": "preoccupational_exam_required",
                  "blocks_action": "No permite cambiar status a 'active' sin examen aprobado"
                },
                {
                  "id": "BR-MED-002",
                  "condition": "user.job_risk_level === 'high' && exam_type === 'periodico'",
                  "action": "SET_VALUE",
                  "target_field": "exam_frequency",
                  "value": "mensual",
                  "message": "‚ö†Ô∏è Alto riesgo detectado: Frecuencia mensual recomendada",
                  "severity": "warning",
                  "auto_notify": false
                },
                {
                  "id": "BR-MED-003",
                  "condition": "user.leave_days > 60 && leave_type === 'medical'",
                  "action": "REQUIRE_VALUE",
                  "value": "reingreso",
                  "message": "‚ùó Examen de reingreso obligatorio: Licencias m√©dicas >60 d√≠as requieren examen de reincorporaci√≥n",
                  "severity": "error",
                  "auto_notify": true,
                  "notification_template": "reentry_exam_required"
                },
                {
                  "id": "BR-MED-004",
                  "condition": "result === 'no_apto'",
                  "action": "TRIGGER_WORKFLOW",
                  "workflow": "medical_inaptitude_process",
                  "message": "üö® CR√çTICO: Empleado NO APTO para el puesto. Se debe iniciar proceso de ART y reubicaci√≥n",
                  "severity": "critical",
                  "auto_notify": true,
                  "notification_template": "employee_not_fit_for_duty",
                  "copy_to": [
                    "rrhh",
                    "legal",
                    "art_manager",
                    "supervisor"
                  ],
                  "requires_immediate_action": true
                }
              ],
              "validations": [
                {
                  "type": "required",
                  "message": "Debe seleccionar un tipo de examen m√©dico"
                },
                {
                  "type": "enum",
                  "allowed_values": [
                    "preocupacional",
                    "periodico",
                    "reingreso",
                    "retiro",
                    "especial"
                  ],
                  "message": "Tipo de examen no v√°lido seg√∫n Ley 24.557"
                }
              ],
              "ui_adaptations": {
                "if_exam_type": {
                  "periodico": {
                    "show_fields": [
                      "exam_frequency",
                      "frequency_months",
                      "auto_calculate_next_exam"
                    ],
                    "help_text": "üí° Examen peri√≥dico: Configure la frecuencia seg√∫n el nivel de riesgo del puesto"
                  },
                  "preocupacional": {
                    "show_fields": [
                      "result"
                    ],
                    "help_text": "‚ö†Ô∏è Preocupacional: El resultado APTO es obligatorio para contratar",
                    "result_required": true
                  },
                  "retiro": {
                    "show_fields": [
                      "observations"
                    ],
                    "help_text": "üìù Retiro: Documente el estado de salud al finalizar la relaci√≥n laboral",
                    "auto_set_next_exam": false
                  },
                  "especial": {
                    "show_fields": [
                      "observations"
                    ],
                    "help_text": "üîç Especial: Indique el motivo en Observaciones (cambio de puesto, incidente, etc.)",
                    "observations_required": true
                  }
                }
              }
            },
            {
              "key": "exam_date",
              "label": "Fecha del Examen",
              "type": "DATE",
              "required": true,
              "help_text": "Fecha en que se realiz√≥ el examen m√©dico",
              "tooltip": "üìÖ Fecha real del examen. A partir de esta fecha se calcular√° el pr√≥ximo examen si es peri√≥dico",
              "validations": [
                {
                  "type": "past_or_today",
                  "message": "La fecha del examen no puede ser futura"
                },
                {
                  "type": "not_too_old",
                  "max_days_ago": 180,
                  "message": "‚ö†Ô∏è Examen con m√°s de 6 meses de antig√ºedad. Verifique si sigue siendo v√°lido",
                  "severity": "warning"
                }
              ]
            },
            {
              "key": "result",
              "label": "Resultado",
              "type": "ENUM",
              "required": false,
              "values": [
                "apto",
                "apto_con_observaciones",
                "no_apto",
                "pendiente"
              ],
              "labels": {
                "apto": "‚úÖ Apto para el puesto",
                "apto_con_observaciones": "‚ö†Ô∏è Apto con observaciones",
                "no_apto": "‚ùå No apto para el puesto",
                "pendiente": "üïê Pendiente de resultado"
              },
              "help_text": "Resultado del examen m√©dico emitido por el profesional. El resultado 'No apto' requiere acci√≥n inmediata de RRHH.",
              "tooltip": "ü©∫ Resultados: APTO (sin restricciones), APTO CON OBSERVACIONES (restricciones parciales), NO APTO (no puede realizar tareas del puesto), PENDIENTE (esperando dictamen)",
              "badge_config": {
                "apto": {
                  "color": "success",
                  "icon": "‚úÖ"
                },
                "apto_con_observaciones": {
                  "color": "warning",
                  "icon": "‚ö†Ô∏è"
                },
                "no_apto": {
                  "color": "danger",
                  "icon": "‚ùå",
                  "requires_action": true
                },
                "pendiente": {
                  "color": "secondary",
                  "icon": "üïê"
                }
              },
              "triggers_action": {
                "no_apto": {
                  "notification": "employee_not_fit_for_duty",
                  "workflow": "medical_inaptitude_process",
                  "escalate_to": [
                    "rrhh_manager",
                    "legal",
                    "art_manager"
                  ]
                },
                "apto_con_observaciones": {
                  "notification": "medical_restrictions_alert",
                  "requires_field": "observations",
                  "message": "Debe documentar las restricciones en Observaciones"
                }
              },
              "validations": [
                {
                  "type": "required_if",
                  "condition": "exam_type === 'preocupacional'",
                  "message": "El resultado es obligatorio para ex√°menes preocupacionales"
                },
                {
                  "type": "enum",
                  "allowed_values": [
                    "apto",
                    "apto_con_observaciones",
                    "no_apto",
                    "pendiente"
                  ],
                  "message": "Resultado no v√°lido"
                }
              ]
            },
            {
              "key": "observations",
              "label": "Observaciones",
              "type": "TEXT",
              "required": false,
              "help_text": "Observaciones m√©dicas, restricciones, recomendaciones. OBLIGATORIO si el resultado es 'Apto con observaciones' o 'No apto'.",
              "tooltip": "üìù Detalle restricciones m√©dicas (ej: 'No levantar m√°s de 10kg', 'Evitar alturas', 'Trabajo sedentario √∫nicamente'). Informaci√≥n confidencial protegida por secreto m√©dico.",
              "placeholder": "Ej: No levantar cargas mayores a 10kg. Evitar exposici√≥n a ruidos superiores a 85dB.",
              "validations": [
                {
                  "type": "required_if",
                  "condition": "result === 'apto_con_observaciones' || result === 'no_apto' || exam_type === 'especial'",
                  "message": "Las observaciones son obligatorias para este tipo de resultado/examen"
                },
                {
                  "type": "min_length",
                  "value": 10,
                  "if": "result === 'no_apto'",
                  "message": "Debe documentar detalladamente las razones de inaptitud (m√≠nimo 10 caracteres)"
                }
              ]
            },
            {
              "key": "exam_frequency",
              "label": "Frecuencia del Examen",
              "type": "ENUM",
              "required": false,
              "values": [
                "mensual",
                "trimestral",
                "semestral",
                "anual",
                "bienal",
                "personalizado"
              ],
              "labels": {
                "mensual": "Mensual (alto riesgo)",
                "trimestral": "Trimestral (cada 3 meses)",
                "semestral": "Semestral (cada 6 meses)",
                "anual": "Anual (bajo riesgo)",
                "bienal": "Bienal (cada 2 a√±os)",
                "personalizado": "Personalizado (indicar meses)"
              },
              "help_text": "Frecuencia con la que debe repetirse el examen peri√≥dico. Seg√∫n Ley 24.557, la frecuencia depende del nivel de riesgo del puesto.",
              "tooltip": "üîÑ Frecuencia recomendada por nivel de riesgo: ALTO=Mensual, MEDIO=Semestral, BAJO=Anual. Si selecciona 'Personalizado', indique cantidad de meses en el campo siguiente.",
              "visible_if": "exam_type === 'periodico'",
              "auto_suggestions": {
                "if_job_risk_level": {
                  "high": "mensual",
                  "medium": "semestral",
                  "low": "anual",
                  "very_low": "bienal"
                }
              },
              "validations": [
                {
                  "type": "required_if",
                  "condition": "exam_type === 'periodico' && auto_calculate_next_exam === true",
                  "message": "Debe seleccionar una frecuencia para c√°lculo autom√°tico del pr√≥ximo examen"
                }
              ]
            },
            {
              "key": "frequency_months",
              "label": "Frecuencia Personalizada (Meses)",
              "type": "INTEGER",
              "required": false,
              "min": 1,
              "max": 120,
              "help_text": "Si seleccion√≥ 'Personalizado', indique cada cu√°ntos meses debe repetirse el examen (1 a 120 meses = 10 a√±os).",
              "tooltip": "üìä Cantidad de meses entre ex√°menes. Ej: 3 meses, 6 meses, 12 meses. M√°ximo 120 meses (10 a√±os).",
              "visible_if": "exam_frequency === 'personalizado'",
              "validations": [
                {
                  "type": "required_if",
                  "condition": "exam_frequency === 'personalizado'",
                  "message": "Debe especificar la cantidad de meses para frecuencia personalizada"
                },
                {
                  "type": "range",
                  "min": 1,
                  "max": 120,
                  "message": "La frecuencia debe estar entre 1 y 120 meses"
                }
              ]
            },
            {
              "key": "auto_calculate_next_exam",
              "label": "Calcular Pr√≥ximo Examen Autom√°ticamente",
              "type": "BOOLEAN",
              "default": true,
              "help_text": "Si est√° activado, el sistema calcular√° autom√°ticamente la fecha del pr√≥ximo examen bas√°ndose en la frecuencia configurada.",
              "tooltip": "‚ú® C√°lculo autom√°tico: El trigger SQL calcular√° next_exam_date = exam_date + frecuencia. Recibir√° notificaci√≥n 30 d√≠as antes.",
              "visible_if": "exam_type === 'periodico'"
            },
            {
              "key": "next_exam_date",
              "label": "Pr√≥ximo Examen",
              "type": "DATE",
              "required": false,
              "read_only": true,
              "calculated_by": "SQL trigger: calculate_next_medical_exam",
              "help_text": "Fecha del pr√≥ximo examen m√©dico (calculada autom√°ticamente si activ√≥ el c√°lculo autom√°tico).",
              "tooltip": "üîÆ Campo calculado autom√°ticamente. El sistema enviar√° notificaci√≥n 30 d√≠as antes. Si necesita modificarlo, desactive el c√°lculo autom√°tico.",
              "alert_thresholds": {
                "urgent": 7,
                "high": 15,
                "medium": 30
              }
            },
            {
              "key": "medical_center",
              "label": "Centro M√©dico",
              "type": "STRING",
              "required": false,
              "max_length": 255,
              "help_text": "Nombre del centro m√©dico donde se realiz√≥ el examen",
              "tooltip": "üè• Instituci√≥n m√©dica que realiz√≥ el examen (debe estar habilitada por la ART si corresponde)",
              "placeholder": "Ej: Cl√≠nica San Juan, Centro M√©dico Galeno, ART Provincia"
            },
            {
              "key": "examining_doctor",
              "label": "M√©dico Examinador",
              "type": "STRING",
              "required": false,
              "max_length": 255,
              "help_text": "Nombre del m√©dico que realiz√≥ el examen",
              "tooltip": "üë®‚Äç‚öïÔ∏è Profesional m√©dico que emiti√≥ el certificado (nombre completo y matr√≠cula si es posible)",
              "placeholder": "Ej: Dr. Juan P√©rez - Mat. 12345"
            },
            {
              "key": "certificate_url",
              "label": "Certificado M√©dico (URL)",
              "type": "TEXT",
              "required": false,
              "help_text": "URL al certificado m√©dico escaneado o digitalizado",
              "tooltip": "üîó Enlace al documento PDF/imagen del certificado m√©dico. Informaci√≥n confidencial protegida.",
              "placeholder": "https://...",
              "validations": [
                {
                  "type": "url",
                  "message": "Debe ser una URL v√°lida"
                }
              ]
            }
          ],
          "ui_config": {
            "table": {
              "default_sort": "exam_date DESC",
              "columns": [
                "exam_type",
                "exam_date",
                "result",
                "next_exam_date",
                "medical_center",
                "status",
                "actions"
              ],
              "badges": {
                "apto": {
                  "color": "success",
                  "icon": "‚úÖ"
                },
                "apto_con_observaciones": {
                  "color": "warning",
                  "icon": "‚ö†Ô∏è"
                },
                "no_apto": {
                  "color": "danger",
                  "icon": "‚ùå"
                },
                "pendiente": {
                  "color": "secondary",
                  "icon": "üïê"
                },
                "proximo_examen_urgente": {
                  "color": "danger",
                  "icon": "‚ùó",
                  "days_max": 7
                },
                "proximo_examen_pronto": {
                  "color": "warning",
                  "icon": "‚ö†Ô∏è",
                  "days_min": 8,
                  "days_max": 30
                },
                "vigente": {
                  "color": "success",
                  "icon": "‚úì",
                  "days_min": 31
                }
              }
            },
            "modal": {
              "size": "lg",
              "sections": [
                {
                  "title": "Informaci√≥n del Examen",
                  "fields": [
                    "exam_type",
                    "exam_date",
                    "result"
                  ]
                },
                {
                  "title": "Periodicidad (Solo Ex√°menes Peri√≥dicos)",
                  "fields": [
                    "exam_frequency",
                    "frequency_months",
                    "auto_calculate_next_exam",
                    "next_exam_date"
                  ],
                  "visible_if": "exam_type === 'periodico'",
                  "collapsible": true
                },
                {
                  "title": "Datos del Centro M√©dico",
                  "fields": [
                    "medical_center",
                    "examining_doctor"
                  ]
                },
                {
                  "title": "Observaciones y Restricciones",
                  "fields": [
                    "observations"
                  ],
                  "highlight_if": "result === 'apto_con_observaciones' || result === 'no_apto'"
                },
                {
                  "title": "Certificado M√©dico",
                  "fields": [
                    "certificate_url"
                  ]
                }
              ]
            }
          }
        }
      ],
      "endpoints": {
        "base_path": "/api/v1",
        "routes": [
          {
            "method": "GET",
            "path": "/users/:userId/medical-exams",
            "description": "Obtener todos los ex√°menes m√©dicos de un usuario",
            "auth": "required",
            "permissions": [
              "read_own_medical_exams",
              "read_all_medical_exams"
            ],
            "response_type": "array",
            "response_example": "[{id: 1, exam_type: 'periodico', result: 'apto', ...}]"
          },
          {
            "method": "GET",
            "path": "/users/:userId/medical-exams/latest",
            "description": "Obtener el examen m√©dico m√°s reciente de un usuario",
            "auth": "required",
            "permissions": [
              "read_own_medical_exams",
              "read_all_medical_exams"
            ],
            "business_use": "Verificar aptitud actual antes de asignar tareas o cambiar puesto"
          },
          {
            "method": "GET",
            "path": "/users/:userId/medical-exams/:examId",
            "description": "Obtener un examen m√©dico espec√≠fico",
            "auth": "required",
            "permissions": [
              "read_own_medical_exams",
              "read_all_medical_exams"
            ]
          },
          {
            "method": "POST",
            "path": "/users/:userId/medical-exams",
            "description": "Crear nuevo examen m√©dico",
            "auth": "required",
            "permissions": [
              "create_medical_exams"
            ],
            "triggers_sql": "calculate_next_medical_exam trigger",
            "triggers_notification": true,
            "notification_condition": "if next_exam_date within 30 days",
            "auto_reload": true,
            "auto_reload_reason": "El trigger SQL calcula next_exam_date, necesitamos recargar para obtenerlo"
          },
          {
            "method": "PUT",
            "path": "/users/:userId/medical-exams/:examId",
            "description": "Actualizar examen m√©dico existente",
            "auth": "required",
            "permissions": [
              "update_medical_exams"
            ],
            "triggers_sql": "calculate_next_medical_exam trigger",
            "triggers_notification": true,
            "notification_condition": "if result changed to 'no_apto'",
            "auto_reload": true
          },
          {
            "method": "DELETE",
            "path": "/users/:userId/medical-exams/:examId",
            "description": "Eliminar examen m√©dico",
            "auth": "required",
            "permissions": [
              "delete_medical_exams"
            ]
          },
          {
            "method": "GET",
            "path": "/medical-exams/expiring",
            "description": "Obtener ex√°menes pr√≥ximos a vencer (dashboard)",
            "auth": "required",
            "permissions": [
              "view_dashboard"
            ],
            "query_params": {
              "days": "n√∫mero de d√≠as (default: 30)"
            }
          }
        ]
      },
      "database": {
        "tables": [
          {
            "name": "user_medical_exams",
            "model": "UserMedicalExams",
            "primary_key": "id",
            "fields_used": [
              "id",
              "user_id",
              "company_id",
              "exam_type",
              "exam_date",
              "result",
              "observations",
              "next_exam_date",
              "medical_center",
              "examining_doctor",
              "certificate_url",
              "exam_frequency",
              "frequency_months",
              "auto_calculate_next_exam",
              "created_at",
              "updated_at"
            ],
            "indexes": [
              "idx_user_medical_exams_user_id",
              "idx_user_medical_exams_company_id",
              "idx_user_medical_exams_next_exam_date",
              "idx_user_medical_exams_exam_type"
            ],
            "relations": [
              {
                "type": "belongsTo",
                "model": "User",
                "foreign_key": "user_id"
              }
            ],
            "triggers": [
              {
                "name": "calculate_next_medical_exam",
                "type": "BEFORE INSERT OR UPDATE",
                "description": "Calcula autom√°ticamente next_exam_date bas√°ndose en exam_date + frecuencia",
                "logic": "Si exam_type='periodico' AND auto_calculate_next_exam=true: next_exam_date = exam_date + frecuencia (en meses)",
                "migration": "migrations/20251031_add_medical_exam_frequency_fields.sql"
              }
            ]
          }
        ]
      },
      "files": {
        "backend": [
          {
            "path": "src/routes/userMedicalExamsRoutes.js",
            "type": "route",
            "lines": 340,
            "description": "API REST completa para ex√°menes m√©dicos con auto-reload despu√©s de save",
            "exports": "router",
            "special_features": [
              "auto_reload after save para obtener next_exam_date calculado por trigger"
            ]
          },
          {
            "path": "src/services/MedicalExamExpirationScheduler.js",
            "type": "service",
            "lines": 240,
            "description": "Scheduler para notificaciones autom√°ticas de pr√≥ximos ex√°menes",
            "cron": "0 11 * * *",
            "timezone": "America/Argentina/Buenos_Aires"
          }
        ],
        "frontend": [
          {
            "path": "public/js/modules/medical-exams-manager.js",
            "type": "manager",
            "lines": 650,
            "description": "Manager frontend con secciones condicionales seg√∫n tipo de examen",
            "class": "MedicalExamsManager",
            "methods": [
              "init",
              "loadExams",
              "showAddModal",
              "editExam",
              "deleteExam",
              "onExamTypeChange"
            ],
            "special_features": [
              "Conditional UI sections",
              "Auto-hide frequency config if not periodic"
            ]
          }
        ],
        "models": [
          {
            "path": "src/models/UserMedicalExams.js",
            "type": "model",
            "sequelize": true,
            "table": "user_medical_exams"
          }
        ],
        "migrations": [
          {
            "path": "migrations/20251031_add_medical_exam_frequency_fields.sql",
            "description": "Agrega campos de frecuencia y trigger para c√°lculo autom√°tico de pr√≥ximo examen",
            "adds_fields": [
              "exam_frequency",
              "frequency_months",
              "auto_calculate_next_exam"
            ],
            "creates_trigger": "calculate_next_medical_exam"
          }
        ]
      },
      "integrations": [
        {
          "module": "notifications-enterprise",
          "type": "OPTIONAL",
          "auto_detect": true,
          "detection_method": "Check SystemModule.isActive for 'notifications-enterprise'",
          "adapts_behavior": {
            "if_active": {
              "description": "Env√≠a notificaciones proactivas de pr√≥ximos ex√°menes y resultados cr√≠ticos",
              "features": [
                "Notificaci√≥n 30 d√≠as antes del pr√≥ximo examen",
                "Escalamiento autom√°tico (30 d√≠as, 15 d√≠as, 7 d√≠as, vencido)",
                "Alerta CR√çTICA si resultado = 'no_apto' ‚Üí copia a RRHH, Legal, ART",
                "Alerta ALTA si resultado = 'apto_con_observaciones' ‚Üí copia a supervisor",
                "Trackeo de lectura y confirmaci√≥n",
                "Requiere confirmaci√≥n en casos cr√≠ticos"
              ],
              "notification_templates": [
                "medical_exam_expiring_30days",
                "medical_exam_expiring_7days",
                "medical_exam_overdue",
                "employee_not_fit_for_duty",
                "medical_restrictions_alert",
                "preoccupational_exam_required"
              ]
            },
            "if_inactive": {
              "description": "Solo muestra alertas visuales en UI",
              "features": [
                "Badges de estado en tabla",
                "Alertas en modal de edici√≥n",
                "Dashboard con pr√≥ximos ex√°menes"
              ]
            }
          }
        },
        {
          "module": "users",
          "type": "REQUIRED",
          "provides": "Agrega subm√≥dulo de ex√°menes m√©dicos en perfil de usuario",
          "extends_ui": "panel-empresa.html ‚Üí secci√≥n Empleados ‚Üí Tab Ex√°menes M√©dicos",
          "business_logic": "El resultado del √∫ltimo examen define la aptitud laboral actual del empleado"
        },
        {
          "module": "document-expiration",
          "type": "RELATED",
          "relationship": "Complementario - ambos gestionan documentaci√≥n personal y vencimientos"
        },
        {
          "module": "attendance",
          "type": "INTEGRATION",
          "relationship": "Si empleado = 'no_apto', no deber√≠a registrar asistencia hasta resoluci√≥n m√©dica",
          "business_rule": "Validar aptitud antes de permitir check-in si el sistema detecta inaptitud m√©dica"
        }
      ],
      "notifications": {
        "enabled": true,
        "requires_module": "notifications-enterprise",
        "templates": [
          {
            "key": "medical_exam_expiring_30days",
            "title": "‚ö†Ô∏è Pr√≥ximo examen m√©dico en 30 d√≠as",
            "priority": "medium",
            "requires_response": false,
            "copy_to": [
              "supervisor",
              "rrhh"
            ],
            "channels": [
              "email",
              "push"
            ],
            "message_template": "Su pr√≥ximo examen m√©dico est√° programado para el {{next_exam_date}}. Por favor coordine con RRHH para agendar turno en {{medical_center}}."
          },
          {
            "key": "medical_exam_expiring_7days",
            "title": "‚ùó URGENTE: Examen m√©dico en 7 d√≠as",
            "priority": "high",
            "requires_response": true,
            "copy_to": [
              "supervisor",
              "rrhh"
            ],
            "channels": [
              "email",
              "sms",
              "push"
            ],
            "message_template": "URGENTE: Su examen m√©dico vence el {{next_exam_date}}. Debe agendar turno INMEDIATAMENTE. Contacte a RRHH."
          },
          {
            "key": "medical_exam_overdue",
            "title": "üö® CR√çTICO: Examen m√©dico VENCIDO",
            "priority": "urgent",
            "requires_response": true,
            "copy_to": [
              "supervisor",
              "rrhh",
              "legal"
            ],
            "channels": [
              "email",
              "sms",
              "push",
              "in_app"
            ],
            "message_template": "CR√çTICO: Su examen m√©dico VENCI√ì el {{next_exam_date}}. Incumplimiento de Ley 24.557. Contacte a RRHH INMEDIATAMENTE."
          },
          {
            "key": "employee_not_fit_for_duty",
            "title": "üö® ALERTA CR√çTICA: Empleado NO APTO",
            "priority": "urgent",
            "requires_response": true,
            "copy_to": [
              "rrhh_manager",
              "legal",
              "art_manager",
              "supervisor"
            ],
            "channels": [
              "email",
              "sms",
              "push",
              "in_app"
            ],
            "message_template": "ALERTA CR√çTICA: {{employee_name}} ({{employee_id}}) fue declarado NO APTO en examen {{exam_type}} del {{exam_date}}. Observaciones: {{observations}}. Requiere acci√≥n inmediata de ART y reubicaci√≥n.",
            "escalation_required": true,
            "blocks_attendance": true
          },
          {
            "key": "medical_restrictions_alert",
            "title": "‚ö†Ô∏è Empleado APTO con restricciones",
            "priority": "high",
            "requires_response": true,
            "copy_to": [
              "supervisor",
              "rrhh"
            ],
            "channels": [
              "email",
              "push"
            ],
            "message_template": "{{employee_name}} fue declarado APTO CON OBSERVACIONES. Restricciones: {{observations}}. Debe adaptar tareas seg√∫n indicaci√≥n m√©dica."
          },
          {
            "key": "preoccupational_exam_required",
            "title": "‚ùó Examen preocupacional obligatorio",
            "priority": "high",
            "requires_response": true,
            "copy_to": [
              "rrhh"
            ],
            "channels": [
              "email"
            ],
            "message_template": "El candidato {{candidate_name}} requiere examen preocupacional antes de la contrataci√≥n. Coordine turno en centro m√©dico habilitado."
          }
        ]
      },
      "metrics": {
        "tracked": [
          "exams_total",
          "exams_by_type",
          "exams_by_result",
          "exams_expiring_30days",
          "employees_not_fit",
          "employees_with_restrictions",
          "compliance_rate",
          "avg_days_to_next_exam"
        ],
        "dashboards": [
          {
            "name": "Estado M√©dico de la Empresa",
            "charts": [
              {
                "type": "gauge",
                "metric": "compliance_rate",
                "title": "% Cumplimiento Ex√°menes M√©dicos",
                "description": "Porcentaje de empleados con examen m√©dico vigente",
                "thresholds": {
                  "red": 80,
                  "yellow": 90,
                  "green": 95
                }
              },
              {
                "type": "donut",
                "metric": "exams_by_result",
                "title": "Resultados de Ex√°menes",
                "legend": true
              },
              {
                "type": "bar",
                "metric": "exams_by_type",
                "title": "Ex√°menes por Tipo"
              },
              {
                "type": "timeline",
                "metric": "upcoming_exams_timeline",
                "title": "Pr√≥ximos Ex√°menes (30 d√≠as)",
                "alert_on": "critical_count > 5"
              },
              {
                "type": "list",
                "metric": "employees_not_fit",
                "title": "üö® Empleados NO APTOS (Requiere Acci√≥n)",
                "color": "danger",
                "show_details": [
                  "name",
                  "exam_date",
                  "observations"
                ]
              }
            ]
          }
        ]
      },
      "health_indicators": {
        "critical": [
          {
            "id": "HI-MED-001",
            "metric": "employees_not_fit_count",
            "threshold": 0,
            "operator": ">",
            "severity": "critical",
            "message": "Hay empleados NO APTOS trabajando - riesgo legal CR√çTICO y seguridad laboral comprometida"
          },
          {
            "id": "HI-MED-002",
            "metric": "overdue_exams_count",
            "threshold": 0,
            "operator": ">",
            "severity": "critical",
            "message": "Hay ex√°menes m√©dicos vencidos - incumplimiento Ley 24.557 - riesgo de sanciones"
          }
        ],
        "warnings": [
          {
            "id": "HI-MED-003",
            "metric": "exams_expiring_7days_count",
            "threshold": 5,
            "operator": ">",
            "severity": "warning",
            "message": "M√°s de 5 ex√°menes m√©dicos vencen en 7 d√≠as - coordinar turnos urgente"
          },
          {
            "id": "HI-MED-004",
            "metric": "compliance_rate",
            "threshold": 90,
            "operator": "<",
            "severity": "warning",
            "message": "Cumplimiento de ex√°menes m√©dicos por debajo del 90% - riesgo de auditor√≠a ART"
          }
        ]
      },
      "legal_compliance": {
        "laws": [
          {
            "name": "Ley 24.557 - Ley de Riesgos del Trabajo",
            "article": "Art. 9 - Ex√°menes m√©dicos en salud",
            "requirement": "Ex√°menes m√©dicos preocupacionales, peri√≥dicos, posteriores a ausencias prolongadas y previos a la terminaci√≥n de la relaci√≥n laboral",
            "penalty_if_not_compliant": "Multas de hasta 30 salarios m√≠nimos seg√∫n gravedad",
            "compliance_check": "All active employees must have valid periodic exam"
          },
          {
            "name": "Decreto 658/96",
            "article": "Art. 1 - Ex√°menes m√©dicos obligatorios",
            "requirement": "Los ex√°menes m√©dicos deben realizarse por profesionales de la salud habilitados",
            "compliance_check": "medical_center must be ART-approved facility"
          }
        ]
      },
      "testing": {
        "test_coverage": 0,
        "test_files": [],
        "test_scenarios": [
          "Crear examen peri√≥dico con frecuencia anual ‚Üí verificar next_exam_date calculado",
          "Crear examen con resultado 'no_apto' ‚Üí verificar notificaci√≥n urgente enviada",
          "Actualizar exam_date ‚Üí verificar recalculo de next_exam_date",
          "Verificar scheduler ejecuta a las 11:00 AM",
          "Validar business rule: preocupacional obligatorio antes de contratar",
          "Validar trigger SQL calcula correctamente frecuencias (mensual=1, anual=12, bienal=24)",
          "Verificar auto_calculate_next_exam=false no calcula next_exam_date"
        ]
      },
      "known_issues": [],
      "todo": [
        "Agregar upload de certificados m√©dicos directo (no solo URL)",
        "Integraci√≥n con ART para validar centros m√©dicos habilitados",
        "Workflow completo para empleados no aptos (ART + reubicaci√≥n)",
        "Dashboard de cumplimiento legal por √°rea/departamento",
        "Alertas predictivas ML: predecir qu√© empleados pueden resultar no aptos",
        "OCR para extraer datos del certificado m√©dico escaneado",
        "Integraci√≥n con calendario para agendar turnos autom√°ticamente"
      ],
      "_source": "extended_json",
      "_loaded_at": "2025-11-02T21:24:57.131Z"
    },
    "work-history": {
      "module_key": "work-history",
      "name": "Historial Laboral",
      "name_alt": "Sistema Integral de Historial Laboral con Gesti√≥n de Desvinculaci√≥n, Indemnizaciones y Litigios",
      "icon": "üìã",
      "color": "#FF9800",
      "category": "rrhh",
      "version": "1.0.0",
      "changelog": [
        {
          "version": "1.0.0",
          "date": "2025-01-31",
          "author": "Claude Code",
          "type": "feature",
          "summary": "Sistema completo de gesti√≥n de antecedentes laborales con tracking legal exhaustivo",
          "changes": [
            "CRUD completo de historial laboral con validaciones",
            "9 tipos de desvinculaci√≥n (renuncia, despido con/sin causa, jubilaci√≥n, mutual, fin contrato, abandono, fallecimiento, otro)",
            "Sistema de indemnizaciones con breakdown detallado y recibos",
            "Acuerdos extrajudiciales (conciliatorio, transaccional, homologaci√≥n ministerial)",
            "Tracking completo de litigios con status, montos, sentencias y apelaciones",
            "Documentaci√≥n legal completa (carta despido, certificado trabajo, liquidaci√≥n)",
            "Elegibilidad para recontrataci√≥n con razones documentadas",
            "Endpoints analytics: litigios activos, estad√≠sticas desvinculaci√≥n, indemnizaciones pagadas",
            "SQL functions para an√°lisis empresarial",
            "Frontend con 6 secciones colapsables y validaciones cruzadas"
          ],
          "files_created": [
            "src/routes/userWorkHistoryRoutes.js",
            "public/js/modules/work-history-manager.js",
            "migrations/20251031_add_termination_details_to_work_history.sql"
          ],
          "files_modified": [
            "server.js",
            "src/models/UserWorkHistory.js"
          ],
          "migrations": [
            "20251031_add_termination_details_to_work_history"
          ],
          "database_impact": {
            "tables_used": [
              "user_work_history",
              "users"
            ],
            "new_fields": [
              "termination_type",
              "termination_subcategory",
              "termination_date",
              "received_severance",
              "severance_amount",
              "severance_currency",
              "has_settlement_agreement",
              "settlement_date",
              "settlement_type",
              "has_litigation",
              "litigation_status",
              "litigation_court",
              "termination_letter_url",
              "work_certificate_url",
              "internal_notes",
              "eligible_for_rehire",
              "rehire_ineligibility_reason"
            ],
            "modified_fields": [],
            "sql_functions_created": [
              "get_termination_stats_by_company(company_id)",
              "get_active_litigations(company_id)"
            ]
          }
        }
      ],
      "description": {
        "short": "Sistema integral de gesti√≥n de historial laboral con tracking exhaustivo de desvinculaciones, indemnizaciones, acuerdos extrajudiciales y litigios",
        "long": "Sistema profesional de RRHH para gesti√≥n completa del ciclo de vida laboral de empleados, incluyendo antecedentes, experiencia, desvinculaci√≥n con todas sus modalidades legales, c√°lculo y pago de indemnizaciones, gesti√≥n de acuerdos extrajudiciales, tracking de litigios judiciales, documentaci√≥n legal completa y an√°lisis de elegibilidad para recontrataci√≥n. Cumple con requerimientos de la Ley de Contrato de Trabajo (LCT 20.744) y normativas laborales argentinas.",
        "business_value": "Protege legalmente a la empresa en casos de desvinculaci√≥n, previene litigios mediante documentaci√≥n exhaustiva, asegura cumplimiento de la LCT, facilita auditor√≠as laborales, reduce riesgos de demandas, centraliza informaci√≥n legal de ex-empleados y permite an√°lisis de rotaci√≥n y costos de indemnizaciones.",
        "use_cases": [
          "Renuncia voluntaria ‚Üí documentar preaviso, liquidaci√≥n, certificado trabajo",
          "Despido con/sin causa ‚Üí documentar causales, carta despido, pago indemnizaci√≥n legal",
          "Litigio judicial ‚Üí tracking completo del caso, audiencias, montos reclamados/otorgados",
          "Acuerdo extrajudicial ‚Üí homologaci√≥n ministerial, t√©rminos del acuerdo, montos transaccionales",
          "Re-contrataci√≥n ‚Üí verificar elegibilidad, motivos de inelegibilidad previa",
          "Auditor√≠a laboral ‚Üí estad√≠sticas de desvinculaci√≥n, indemnizaciones pagadas, litigios activos"
        ]
      },
      "subm√≥dulos": [],
      "endpoints": {
        "base_path": "/api/v1",
        "routes": [
          {
            "method": "GET",
            "path": "/users/:userId/work-history",
            "description": "Obtener todo el historial laboral de un usuario",
            "auth": "required",
            "permissions": [
              "read_own_work_history",
              "read_all_work_history"
            ]
          },
          {
            "method": "POST",
            "path": "/users/:userId/work-history",
            "description": "Crear nuevo registro de historial laboral",
            "auth": "required",
            "permissions": [
              "create_work_history"
            ]
          },
          {
            "method": "GET",
            "path": "/work-history/active-litigations",
            "description": "Obtener litigios activos de la empresa",
            "auth": "required",
            "permissions": [
              "view_dashboard",
              "legal_manager"
            ]
          },
          {
            "method": "GET",
            "path": "/work-history/termination-stats",
            "description": "Obtener estad√≠sticas de desvinculaci√≥n de la empresa",
            "auth": "required",
            "permissions": [
              "view_dashboard",
              "rrhh_manager"
            ]
          }
        ]
      },
      "database": {
        "tables": [
          {
            "name": "user_work_history",
            "model": "UserWorkHistory",
            "primary_key": "id",
            "fields_count": 50,
            "complexity": "very_high"
          }
        ]
      },
      "files": {
        "backend": [
          {
            "path": "src/routes/userWorkHistoryRoutes.js",
            "type": "route",
            "lines": 450,
            "description": "API REST exhaustiva con endpoints analytics para litigios y estad√≠sticas"
          }
        ],
        "frontend": [
          {
            "path": "public/js/modules/work-history-manager.js",
            "type": "manager",
            "lines": 1200,
            "description": "Manager frontend m√°s complejo con 6 secciones colapsables"
          }
        ]
      },
      "integrations": [
        {
          "module": "users",
          "type": "REQUIRED",
          "provides": "Agrega subm√≥dulo de historial laboral en perfil de usuario"
        },
        {
          "module": "notifications-enterprise",
          "type": "OPTIONAL",
          "auto_detect": true,
          "detection_method": "Check SystemModule.isActive for 'notifications-enterprise'",
          "adapts_behavior": {
            "if_active": {
              "description": "Env√≠a notificaciones cr√≠ticas de litigios activos, indemnizaciones pendientes y alertas legales",
              "features": [
                "Alerta CR√çTICA cuando se crea litigio activo ‚Üí copia a Legal, Finanzas, Seguros, CEO",
                "Alerta de indemnizaci√≥n pendiente de pago",
                "Alerta de falta de certificado Art. 80 (riesgo de multa)",
                "Alerta de litigio de alto impacto (monto > $1M)"
              ],
              "notification_templates": [
                "active_litigation_alert",
                "high_impact_litigation_alert",
                "severance_payment_required",
                "art_80_certificate_missing"
              ]
            },
            "if_inactive": {
              "description": "Solo muestra alertas visuales en UI",
              "features": [
                "Badges de estado en tabla",
                "Alertas en modal de edici√≥n",
                "Dashboard con litigios activos"
              ]
            }
          }
        }
      ],
      "notifications": {
        "enabled": true,
        "requires_module": "notifications-enterprise",
        "templates": [
          {
            "key": "active_litigation_alert",
            "title": "üö® CR√çTICO: Nuevo Litigio Judicial Activo",
            "priority": "urgent",
            "requires_response": true,
            "copy_to": [
              "legal_manager",
              "cfo",
              "insurance_manager",
              "ceo"
            ],
            "channels": [
              "email",
              "sms",
              "push",
              "in_app"
            ]
          },
          {
            "key": "high_impact_litigation_alert",
            "title": "üö® ALERTA M√ÅXIMA: Litigio de ALTO IMPACTO",
            "priority": "critical",
            "requires_response": true,
            "copy_to": [
              "ceo",
              "board_of_directors",
              "legal_manager",
              "cfo"
            ],
            "channels": [
              "email",
              "sms",
              "push",
              "in_app",
              "whatsapp"
            ]
          }
        ]
      },
      "metrics": {
        "tracked": [
          "total_work_history_records",
          "terminations_by_type",
          "total_severance_paid",
          "avg_severance_amount",
          "litigation_count",
          "active_litigations_count",
          "litigation_rate"
        ],
        "dashboards": [
          {
            "name": "An√°lisis de Rotaci√≥n y Desvinculaci√≥n",
            "charts": [
              {
                "type": "bar",
                "metric": "terminations_by_type",
                "title": "Desvinculaciones por Tipo"
              },
              {
                "type": "gauge",
                "metric": "litigation_rate",
                "title": "% de Litigiosidad",
                "thresholds": {
                  "green": 5,
                  "yellow": 15,
                  "red": 25
                }
              }
            ]
          }
        ]
      },
      "health_indicators": {
        "critical": [
          {
            "id": "HI-WH-001",
            "metric": "active_litigations_count",
            "threshold": 0,
            "operator": ">",
            "severity": "critical",
            "message": "Hay litigios judiciales activos - requiere seguimiento legal, provisi√≥n contable y gesti√≥n de riesgo"
          }
        ]
      },
      "legal_compliance": {
        "laws": [
          {
            "name": "Ley 20.744 - Ley de Contrato de Trabajo (LCT)",
            "articles": [
              "Art. 240 - Renuncia del trabajador",
              "Art. 242 - Despido con justa causa",
              "Art. 245 - Indemnizaci√≥n por despido sin causa",
              "Art. 80 - Certificado de trabajo (obligatorio)"
            ],
            "requirement": "Documentaci√≥n exhaustiva de desvinculaci√≥n, pago de indemnizaciones en plazo, entrega de certificados",
            "penalty_if_not_compliant": "Multas Art. 80 (3x mejor remuneraci√≥n), intereses moratorios"
          }
        ]
      },
      "testing": {
        "test_coverage": 0,
        "test_files": [],
        "test_scenarios": [
          "Crear desvinculaci√≥n tipo 'despido_sin_causa' ‚Üí validar que requiere severance_amount",
          "Crear litigio activo ‚Üí verificar notificaci√≥n cr√≠tica a Legal/Finanzas/CEO",
          "Verificar SQL function get_termination_stats_by_company() retorna stats correctas"
        ]
      },
      "known_issues": [],
      "todo": [
        "Integraci√≥n con sistema de n√≥mina para calcular indemnizaciones autom√°ticamente",
        "Workflow completo de gesti√≥n de litigios con calendario de audiencias",
        "Dashboard predictivo: ML para predecir probabilidad de litigio seg√∫n tipo de desvinculaci√≥n",
        "Calculadora de indemnizaci√≥n seg√∫n LCT (Art. 245) con validaci√≥n autom√°tica"
      ],
      "_source": "extended_json",
      "_loaded_at": "2025-11-02T21:24:57.131Z"
    },
    "inbox": {
      "module_key": "inbox",
      "name": "Bandeja Notificaciones",
      "name_alt": "Sistema de Notificaciones con Hilos de Conversaci√≥n Tipo Chat",
      "icon": "üì¨",
      "color": "#2196F3",
      "category": "communication",
      "version": "3.0.1",
      "pricing": 7,
      "changelog": [
        {
          "version": "3.0.1",
          "date": "2025-11-02",
          "author": "System Auto-Update",
          "type": "architecture",
          "summary": "Refactorizaci√≥n COMPLETA: Sistema de Carga Din√°mica Unificado",
          "changes": [
            "UnifiedKnowledgeService inicializado en server.js",
            "Endpoint /api/modules/active creado",
            "Eliminado SWITCH hardcodeado de 40+ casos",
            "Implementada carga din√°mica en panel-empresa.html",
            "A√±adida carga de activeModules en handleLogin",
            "Estandarizada exportaci√≥n de 6 m√≥dulos CORE",
            "Convenci√≥n unificada window.Modules[moduleKey]"
          ],
          "files_modified": [
            "server.js",
            "src/routes/modulesRoutes.js",
            "public/panel-empresa.html",
            "public/js/modules/users.js",
            "public/js/modules/departments.js",
            "public/js/modules/attendance.js",
            "public/js/modules/notifications-enterprise.js",
            "public/js/modules/shifts.js",
            "public/js/modules/inbox.js",
            "src/config/modules-metadata-extended.json"
          ],
          "migrations": [],
          "database_impact": {}
        },
        {
          "version": "3.0.0",
          "date": "2025-10-19",
          "author": "Claude Code",
          "type": "feature",
          "summary": "Sistema completo de bandeja de notificaciones con hilos/conversaciones",
          "changes": [
            "Notificaciones agrupadas en conversaciones/hilos tipo chat",
            "Primera notificaci√≥n crea hilo, respuestas se agregan secuencialmente",
            "Cierre de conversaciones cuando se resuelven",
            "Vista cronol√≥gica ordenada por √∫ltimo mensaje",
            "Contador de mensajes no le√≠dos por hilo",
            "Marcado autom√°tico como le√≠do al abrir hilo",
            "Filtros por status (open, pending, closed) y prioridad",
            "Estad√≠sticas de inbox (no le√≠dos, pendientes, overdue)"
          ],
          "files_created": [
            "src/routes/inbox.js",
            "src/services/inboxService.js"
          ],
          "files_modified": [
            "server.js"
          ],
          "migrations": [
            "20251019_create_notifications_enterprise"
          ],
          "database_impact": {
            "tables_used": [
              "notification_groups",
              "notification_messages",
              "notification_audit_log"
            ],
            "new_fields": [],
            "modified_fields": []
          }
        }
      ],
      "description": {
        "short": "Sistema de notificaciones con hilos de conversaci√≥n tipo chat para agrupar mensajes relacionados",
        "long": "Bandeja de entrada inteligente que agrupa notificaciones en conversaciones/hilos similares a un chat. La primera notificaci√≥n crea un hilo nuevo, y todas las respuestas y mensajes relacionados se agregan al mismo hilo de forma secuencial. Cada hilo muestra el √∫ltimo mensaje, cantidad de mensajes totales, contador de no le√≠dos y se puede cerrar cuando se resuelve. Vista cronol√≥gica que permite seguir la historia completa de cada notificaci√≥n.",
        "business_value": "Organiza las notificaciones de forma inteligente evitando la sobrecarga de mensajes sueltos, facilita el seguimiento de conversaciones complejas, mejora la trazabilidad de procesos que requieren m√∫ltiples interacciones, y permite cerrar hilos resueltos manteniendo la bandeja ordenada.",
        "use_cases": [
          "Solicitud de vacaciones ‚Üí hilo con: solicitud del empleado + respuesta del manager + notificaci√≥n a RRHH + cierre",
          "Documento pr√≥ximo a vencer ‚Üí hilo con: alerta 30 d√≠as + recordatorio 15 d√≠as + alerta 7 d√≠as + confirmaci√≥n renovaci√≥n",
          "Aprobaci√≥n de workflow ‚Üí hilo con: solicitud + aprobaci√≥n nivel 1 + aprobaci√≥n nivel 2 + confirmaci√≥n final",
          "Incidente m√©dico ‚Üí hilo con: reporte inicial + examen m√©dico + resultado + acciones tomadas"
        ]
      },
      "endpoints": {
        "base_path": "/api",
        "routes": [
          {
            "method": "GET",
            "path": "/inbox",
            "description": "Obtener bandeja de entrada con grupos de notificaciones",
            "auth": "required",
            "permissions": [
              "read_inbox"
            ],
            "query_params": {
              "status": "all | open | pending | closed",
              "priority": "all | low | medium | high | urgent",
              "limit": "n√∫mero de grupos a retornar (default: 50)",
              "offset": "offset para paginaci√≥n (default: 0)"
            },
            "response_type": "object",
            "response_example": "{groups: [], total: 10, limit: 50, offset: 0, has_more: false}"
          },
          {
            "method": "GET",
            "path": "/inbox/stats",
            "description": "Obtener estad√≠sticas del inbox (no le√≠dos, pendientes, overdue)",
            "auth": "required",
            "permissions": [
              "read_inbox"
            ],
            "response_example": "{open_groups: 5, pending_groups: 3, unread_messages: 8, pending_responses: 2, overdue_messages: 1}"
          },
          {
            "method": "GET",
            "path": "/inbox/group/:group_id",
            "description": "Obtener mensajes de un grupo/hilo espec√≠fico (vista de conversaci√≥n)",
            "auth": "required",
            "permissions": [
              "read_inbox"
            ],
            "side_effects": "Marca mensajes como le√≠dos autom√°ticamente",
            "response_example": "{group: {...}, messages: [{sequence_number: 1, ...}, {sequence_number: 2, ...}]}"
          },
          {
            "method": "POST",
            "path": "/inbox/group",
            "description": "Crear nuevo grupo/conversaci√≥n",
            "auth": "required",
            "permissions": [
              "create_notification_group"
            ],
            "required_fields": [
              "group_type",
              "initiator_type",
              "initiator_id",
              "subject"
            ]
          },
          {
            "method": "POST",
            "path": "/inbox/group/:group_id/message",
            "description": "Enviar mensaje a un grupo/hilo (agrega mensaje secuencial)",
            "auth": "required",
            "permissions": [
              "send_notification_message"
            ],
            "required_fields": [
              "sender_type",
              "sender_id",
              "recipient_type",
              "recipient_id",
              "message_type",
              "content"
            ],
            "auto_increments": "sequence_number",
            "generates": "message_hash (SHA-256 para integridad)"
          },
          {
            "method": "PUT",
            "path": "/inbox/group/:group_id/read",
            "description": "Marcar mensajes como le√≠dos",
            "auth": "required",
            "permissions": [
              "read_inbox"
            ],
            "optional_fields": [
              "message_ids (array)"
            ]
          },
          {
            "method": "PUT",
            "path": "/inbox/group/:group_id/close",
            "description": "Cerrar un grupo/conversaci√≥n (marca como resuelto)",
            "auth": "required",
            "permissions": [
              "close_notification_group"
            ]
          }
        ]
      },
      "database": {
        "tables": [
          {
            "name": "notification_groups",
            "description": "Cabecera de cada hilo/conversaci√≥n",
            "primary_key": "id",
            "fields_key": [
              "id",
              "group_type",
              "initiator_type",
              "initiator_id",
              "subject",
              "status",
              "priority",
              "created_at",
              "closed_at",
              "closed_by",
              "metadata",
              "company_id"
            ],
            "indexes": [
              "idx_notification_groups_company",
              "idx_notification_groups_status"
            ]
          },
          {
            "name": "notification_messages",
            "description": "Mensajes individuales dentro de cada hilo (secuenciados)",
            "primary_key": "id",
            "fields_key": [
              "id",
              "group_id",
              "sequence_number",
              "sender_type",
              "sender_id",
              "recipient_type",
              "recipient_id",
              "message_type",
              "subject",
              "content",
              "created_at",
              "delivered_at",
              "read_at",
              "responded_at",
              "requires_response",
              "deadline_at",
              "message_hash",
              "channels",
              "attachments",
              "company_id"
            ],
            "indexes": [
              "idx_notification_messages_group",
              "idx_notification_messages_recipient_read"
            ],
            "special_features": [
              "sequence_number se auto-incrementa por grupo (1, 2, 3...) para ordenar cronol√≥gicamente",
              "message_hash SHA-256 para verificar integridad del mensaje"
            ]
          },
          {
            "name": "notification_audit_log",
            "description": "Log de auditor√≠a de acciones sobre notificaciones",
            "primary_key": "id",
            "fields_key": [
              "id",
              "group_id",
              "message_id",
              "action",
              "actor_type",
              "actor_id",
              "metadata",
              "created_at"
            ]
          }
        ]
      },
      "files": {
        "backend": [
          {
            "path": "src/routes/inbox.js",
            "type": "route",
            "lines": 225,
            "description": "API REST completa para bandeja de notificaciones con hilos"
          },
          {
            "path": "src/services/inboxService.js",
            "type": "service",
            "lines": 374,
            "description": "Servicio con l√≥gica de negocio para gesti√≥n de hilos de notificaciones"
          }
        ],
        "frontend": [],
        "models": []
      },
      "integrations": [
        {
          "module": "notifications-enterprise",
          "type": "COMPLEMENTARY",
          "relationship": "inbox provee vista de hilos, notifications-enterprise provee workflows y env√≠o multi-canal. Comparten tablas de BD."
        }
      ],
      "business_flows": {
        "create_and_follow_thread": [
          "1. Sistema/usuario crea grupo (POST /inbox/group)",
          "2. Sistema env√≠a primer mensaje (POST /inbox/group/:id/message) ‚Üí sequence_number = 1",
          "3. Destinatario ve notificaci√≥n en inbox (GET /inbox)",
          "4. Destinatario abre hilo (GET /inbox/group/:id) ‚Üí marca como le√≠do autom√°ticamente",
          "5. Destinatario responde (POST /inbox/group/:id/message) ‚Üí sequence_number = 2",
          "6. Sistema env√≠a mensaje adicional (ej: aprobaci√≥n) ‚Üí sequence_number = 3",
          "7. Cuando se resuelve, se cierra hilo (PUT /inbox/group/:id/close)"
        ]
      },
      "help": {
        "quickStart": "Vista de bandeja de entrada con hilos agrupados. Click en un hilo para ver la conversaci√≥n completa en orden cronol√≥gico.",
        "commonIssues": [
          {
            "symptom": "No aparecen hilos en la bandeja",
            "cause": "No hay grupos creados para este usuario",
            "fix": "Crear primer grupo con POST /inbox/group o esperar que el sistema genere notificaciones autom√°ticas"
          },
          {
            "symptom": "Mensajes aparecen desordenados",
            "cause": "sequence_number incorrecto",
            "fix": "El sequence_number se calcula autom√°ticamente en el servicio, no intentar setearlo manualmente"
          },
          {
            "symptom": "No se puede cerrar un hilo",
            "cause": "Sin permisos o grupo ya cerrado",
            "fix": "Verificar permissions y status del grupo"
          }
        ]
      },
      "testing": {
        "test_coverage": 0,
        "test_files": [],
        "test_scenarios": [
          "Crear grupo ‚Üí enviar 3 mensajes ‚Üí verificar sequence_number (1, 2, 3)",
          "Obtener inbox ‚Üí verificar contador de no le√≠dos",
          "Abrir grupo ‚Üí verificar que marca mensajes como le√≠dos autom√°ticamente",
          "Cerrar grupo ‚Üí verificar que status cambia a 'closed'",
          "Verificar message_hash SHA-256 se genera correctamente"
        ]
      },
      "known_issues": [],
      "todo": [
        "Frontend dedicado para vista de inbox (actualmente solo API)",
        "Notificaciones push en tiempo real cuando llega nuevo mensaje a hilo",
        "Buscar/filtrar mensajes dentro de un hilo",
        "Attachments/archivos adjuntos en mensajes",
        "Reacciones emoji a mensajes espec√≠ficos"
      ],
      "_source": "extended_json",
      "_loaded_at": "2025-11-02T21:24:57.131Z",
      "commercial": {
        "basePrice": 7,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 0,
        "rubro": "General",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "notifications-enterprise": {
      "module_key": "notifications-enterprise",
      "name": "Notificaciones Enterprise",
      "name_alt": "Sistema Completo de Notificaciones Avanzadas con Workflows y Multi-Canal",
      "icon": "üîî",
      "color": "#FF5722",
      "category": "communication",
      "version": "3.0.1",
      "pricing": 12,
      "changelog": [
        {
          "version": "3.0.1",
          "date": "2025-11-02",
          "author": "System Auto-Update",
          "type": "architecture",
          "summary": "Refactorizaci√≥n COMPLETA: Sistema de Carga Din√°mica Unificado",
          "changes": [
            "UnifiedKnowledgeService inicializado en server.js",
            "Endpoint /api/modules/active creado",
            "Eliminado SWITCH hardcodeado de 40+ casos",
            "Implementada carga din√°mica en panel-empresa.html",
            "A√±adida carga de activeModules en handleLogin",
            "Estandarizada exportaci√≥n de 6 m√≥dulos CORE",
            "Convenci√≥n unificada window.Modules[moduleKey]"
          ],
          "files_modified": [
            "server.js",
            "src/routes/modulesRoutes.js",
            "public/panel-empresa.html",
            "public/js/modules/users.js",
            "public/js/modules/departments.js",
            "public/js/modules/attendance.js",
            "public/js/modules/notifications-enterprise.js",
            "public/js/modules/shifts.js",
            "public/js/modules/inbox.js",
            "src/config/modules-metadata-extended.json"
          ],
          "migrations": [],
          "database_impact": {}
        },
        {
          "version": "3.0.0",
          "date": "2025-10-19",
          "author": "Claude Code",
          "type": "feature",
          "summary": "Sistema enterprise completo de notificaciones con workflows y multi-canal",
          "changes": [
            "Dashboard profesional con estad√≠sticas en tiempo real",
            "Workflows visuales con aprobaciones multi-nivel",
            "Countdown de deadlines con alertas progresivas",
            "Filtros inteligentes (m√≥dulo, prioridad, categor√≠a, requires_action)",
            "Templates reutilizables con placeholders din√°micos",
            "Escalamiento autom√°tico de notificaciones no atendidas",
            "Multi-canal (app, email, whatsapp, SMS) con tracking",
            "Recordatorios programados autom√°ticos",
            "Metadata contextual para integraciones",
            "Frontend con animaciones suaves y dise√±o profesional"
          ],
          "files_created": [
            "public/js/modules/notifications-enterprise.js"
          ],
          "files_modified": [
            "server.js",
            "public/panel-empresa.html"
          ],
          "migrations": [
            "20251019_create_notifications_enterprise"
          ],
          "database_impact": {
            "tables_used": [
              "notifications",
              "notification_workflows",
              "notification_templates",
              "notification_actions_log"
            ],
            "new_fields": [],
            "modified_fields": []
          }
        }
      ],
      "description": {
        "short": "Sistema enterprise de notificaciones avanzadas con workflows de aprobaci√≥n, multi-canal y dashboard profesional",
        "long": "Sistema completo y profesional para gesti√≥n de notificaciones empresariales con soporte para workflows de aprobaci√≥n multi-nivel, env√≠o por m√∫ltiples canales (app, email, WhatsApp, SMS), templates reutilizables con placeholders, escalamiento autom√°tico de notificaciones no atendidas, recordatorios programados, deadlines con countdown, metadata contextual para integraciones con otros m√≥dulos, y dashboard profesional con estad√≠sticas en tiempo real. Incluye tracking completo de entrega, lectura y respuesta por cada canal.",
        "business_value": "Automatiza procesos de aprobaci√≥n empresariales, asegura que las notificaciones cr√≠ticas lleguen por el canal correcto, reduce tiempo de respuesta con escalamiento autom√°tico, mejora compliance con tracking de confirmaci√≥n de lectura, facilita auditor√≠as con trazabilidad completa de acciones, y permite workflows personalizados por tipo de notificaci√≥n.",
        "use_cases": [
          "Workflow de aprobaci√≥n de gastos ‚Üí Empleado solicita ‚Üí Manager aprueba ‚Üí Finanzas confirma ‚Üí Contabilidad registra",
          "Alerta cr√≠tica de seguridad ‚Üí Env√≠a por SMS + Email + Push simult√°neamente, requiere confirmaci√≥n en 1 hora, escala a supervisor si no hay respuesta",
          "Recordatorio de examen m√©dico ‚Üí 30 d√≠as antes: email, 15 d√≠as: email+push, 7 d√≠as: email+SMS+push, vencido: SMS urgente",
          "Notificaci√≥n legal ‚Üí Requiere confirmaci√≥n de lectura firmada digitalmente, se archiva para auditor√≠a"
        ]
      },
      "endpoints": {
        "base_path": "/api",
        "routes": [
          {
            "method": "GET",
            "path": "/notifications",
            "description": "Obtener notificaciones con filtros",
            "auth": "required",
            "permissions": [
              "read_notifications"
            ],
            "query_params": {
              "module": "filtrar por m√≥dulo origen",
              "priority": "low | medium | high | urgent",
              "category": "info | warning | error | success",
              "requires_action": "true | false",
              "unread_only": "true | false",
              "limit": "cantidad (default: 50)",
              "offset": "offset para paginaci√≥n"
            }
          },
          {
            "method": "GET",
            "path": "/notifications/stats",
            "description": "Obtener estad√≠sticas para dashboard",
            "auth": "required",
            "permissions": [
              "read_notifications"
            ],
            "response_example": "{total: 100, unread: 15, high_priority: 5, requires_action: 8, overdue: 2}"
          },
          {
            "method": "POST",
            "path": "/notifications",
            "description": "Crear nueva notificaci√≥n (con workflow si aplica)",
            "auth": "required",
            "permissions": [
              "create_notification"
            ],
            "triggers_workflow": "Si notification_type tiene workflow asociado, se ejecuta autom√°ticamente",
            "sends_multicanal": "Env√≠a por todos los canales configurados (app, email, whatsapp, SMS)"
          },
          {
            "method": "PUT",
            "path": "/notifications/:id/read",
            "description": "Marcar notificaci√≥n como le√≠da",
            "auth": "required",
            "permissions": [
              "read_notifications"
            ]
          },
          {
            "method": "POST",
            "path": "/notifications/:id/action",
            "description": "Ejecutar acci√≥n sobre notificaci√≥n (aprobar, rechazar, responder)",
            "auth": "required",
            "permissions": [
              "action_on_notification"
            ],
            "triggers_workflow": "Si es parte de workflow, avanza al siguiente paso",
            "logs_action": "Registra en notification_actions_log"
          }
        ]
      },
      "database": {
        "tables": [
          {
            "name": "notifications",
            "description": "Tabla principal con 50+ campos para notificaciones completas",
            "primary_key": "id",
            "fields_count": 50,
            "complexity": "very_high",
            "special_features": [
              "Multi-destinatario (user, role, department, shift, broadcast)",
              "Multi-canal (app, email, whatsapp, SMS) con timestamps independientes",
              "Workflow de acciones (requires_action, action_status, action_deadline)",
              "Escalamiento (escalation_level, escalated_from/to)",
              "Metadata JSONB para integraciones",
              "Soft delete",
              "√çndices GIN para b√∫squeda en metadata"
            ]
          },
          {
            "name": "notification_workflows",
            "description": "Definiciones de workflows de aprobaci√≥n",
            "primary_key": "id",
            "fields_key": [
              "id",
              "workflow_key",
              "workflow_name",
              "module",
              "steps",
              "activation_conditions",
              "on_approval_actions",
              "on_rejection_actions",
              "company_id"
            ],
            "special_features": [
              "steps es JSONB con array ordenado de pasos",
              "activation_conditions define cu√°ndo se activa el workflow",
              "Acciones autom√°ticas al aprobar/rechazar"
            ]
          },
          {
            "name": "notification_templates",
            "description": "Templates reutilizables con placeholders",
            "primary_key": "id",
            "fields_key": [
              "id",
              "template_key",
              "template_name",
              "module",
              "title_template",
              "message_template",
              "email_template",
              "available_variables",
              "default_send_email",
              "default_send_whatsapp",
              "company_id"
            ],
            "special_features": [
              "Placeholders din√°micos {{variable_name}}",
              "Templates globales (company_id NULL) y por empresa"
            ]
          },
          {
            "name": "notification_actions_log",
            "description": "Historial completo de acciones sobre notificaciones",
            "primary_key": "id",
            "fields_key": [
              "id",
              "notification_id",
              "company_id",
              "action",
              "action_by",
              "action_at",
              "previous_status",
              "new_status",
              "notes",
              "metadata",
              "ip_address",
              "user_agent"
            ]
          }
        ]
      },
      "files": {
        "backend": [],
        "frontend": [
          {
            "path": "public/js/modules/notifications-enterprise.js",
            "type": "module",
            "lines": 1500,
            "description": "Frontend completo con dashboard profesional, workflows visuales, filtros inteligentes y animaciones suaves",
            "object": "NotificationsEnterprise",
            "methods": [
              "init",
              "renderDashboard",
              "loadDashboardData",
              "showNotificationDetail",
              "handleAction",
              "renderWorkflowSteps"
            ],
            "special_features": [
              "Dashboard con cards animados y estad√≠sticas",
              "Countdown visual de deadlines",
              "Workflow steps con progress bar",
              "Filtros inteligentes m√∫ltiples",
              "Responsive design"
            ]
          }
        ],
        "models": []
      },
      "integrations": [
        {
          "module": "inbox",
          "type": "COMPLEMENTARY",
          "relationship": "notifications-enterprise provee workflows y multi-canal, inbox provee vista de hilos. Comparten tablas de BD."
        },
        {
          "module": "document-expiration",
          "type": "PROVIDES_NOTIFICATIONS",
          "description": "document-expiration usa notifications-enterprise para enviar alertas de vencimiento"
        },
        {
          "module": "medical-exams",
          "type": "PROVIDES_NOTIFICATIONS",
          "description": "medical-exams usa notifications-enterprise para alertas de pr√≥ximos ex√°menes y resultados cr√≠ticos"
        },
        {
          "module": "work-history",
          "type": "PROVIDES_NOTIFICATIONS",
          "description": "work-history usa notifications-enterprise para alertas de litigios activos"
        }
      ],
      "business_flows": {
        "workflow_approval": [
          "1. Sistema crea notificaci√≥n con requires_action=true",
          "2. Busca workflow asociado al notification_type",
          "3. Ejecuta primer paso del workflow (ej: env√≠a a Manager)",
          "4. Manager recibe notificaci√≥n multi-canal seg√∫n urgencia",
          "5. Manager aprueba (POST /notifications/:id/action {action: 'approve'})",
          "6. Sistema registra acci√≥n en notification_actions_log",
          "7. Sistema ejecuta on_approval_actions del workflow",
          "8. Sistema avanza al siguiente paso del workflow (ej: env√≠a a Finanzas)",
          "9. Repite hasta completar todos los pasos",
          "10. Al finalizar, marca notificaci√≥n como completed"
        ],
        "escalation": [
          "1. Sistema crea notificaci√≥n con action_deadline",
          "2. Si no hay respuesta antes del deadline, escalation_level++",
          "3. Sistema crea nueva notificaci√≥n escalada (escalated_to_notification_id)",
          "4. Nueva notificaci√≥n se env√≠a a nivel superior (ej: supervisor del supervisor)",
          "5. Prioridad aumenta autom√°ticamente (medium ‚Üí high ‚Üí urgent)",
          "6. Canales adicionales se activan (ej: agrega SMS en escalation_level >= 2)"
        ]
      },
      "help": {
        "quickStart": "Dashboard con estad√≠sticas y lista de notificaciones. Usa filtros para encontrar notificaciones espec√≠ficas. Click en una notificaci√≥n para ver detalle y ejecutar acciones.",
        "commonIssues": [
          {
            "symptom": "Workflow no avanza al siguiente paso",
            "cause": "Falta configurar on_approval_actions en el workflow",
            "fix": "Revisar notification_workflows y configurar acciones autom√°ticas"
          },
          {
            "symptom": "Email no llega aunque sent_via_email=true",
            "cause": "EmailWorker no est√° corriendo o SMTP mal configurado",
            "fix": "Verificar logs del EmailWorker y configuraci√≥n SMTP en .env"
          },
          {
            "symptom": "Notificaciones no escalan autom√°ticamente",
            "cause": "action_deadline no est√° configurado o ya pas√≥",
            "fix": "Configurar action_deadline al crear la notificaci√≥n"
          }
        ]
      },
      "testing": {
        "test_coverage": 0,
        "test_files": [],
        "test_scenarios": [
          "Crear notificaci√≥n ‚Üí verificar aparece en dashboard",
          "Crear notificaci√≥n con workflow ‚Üí verificar ejecuta primer paso autom√°ticamente",
          "Aprobar notificaci√≥n ‚Üí verificar avanza al siguiente paso del workflow",
          "Verificar escalamiento autom√°tico cuando pasa deadline",
          "Verificar multi-canal: crear con sent_via_email=true ‚Üí verificar email en email_queue",
          "Aplicar filtros ‚Üí verificar resultados correctos"
        ]
      },
      "known_issues": [],
      "todo": [
        "Integraci√≥n con WhatsApp Business API",
        "Env√≠o de SMS v√≠a Twilio",
        "Push notifications con Firebase",
        "Builder visual de workflows (drag & drop)",
        "Editor de templates con preview en tiempo real",
        "Dashboard predictivo: ML para predecir qu√© notificaciones tendr√°n mayor engagement"
      ],
      "_source": "extended_json",
      "_loaded_at": "2025-11-02T21:24:57.131Z",
      "commercial": {
        "basePrice": 1,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 55,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "attendance",
        "medical",
        "vacation",
        "legal"
      ],
      "providesTo": [
        "ALL"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "biometric-consent": {
      "commercial": {
        "basePrice": 0,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 0,
        "rubro": "General",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "professional-biometric-registration": {
      "commercial": {
        "basePrice": 0,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 0,
        "rubro": "General",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "real-biometric-enterprise": {
      "commercial": {
        "basePrice": 0,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 0,
        "rubro": "General",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "facial-biometric": {
      "commercial": {
        "basePrice": 0,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 0,
        "rubro": "General",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "users": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 1,
        "rubro": "Sistema Base",
        "availableIn": "both"
      },
      "features": [
        "Registro y gesti√≥n de empleados",
        "Perfiles de usuario personalizables",
        "Control de roles y permisos",
        "Informaci√≥n de contacto",
        "Historial de empleados"
      ],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [
        "departments",
        "shifts",
        "biometric-enterprise"
      ],
      "providesTo": [
        "attendance",
        "medical",
        "vacation",
        "legal",
        "reports"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.337Z",
      "changelog": [
        {
          "version": "1.0.1",
          "date": "2025-11-02",
          "author": "System Auto-Update",
          "type": "architecture",
          "summary": "Refactorizaci√≥n COMPLETA: Sistema de Carga Din√°mica Unificado",
          "changes": [
            "UnifiedKnowledgeService inicializado en server.js",
            "Endpoint /api/modules/active creado",
            "Eliminado SWITCH hardcodeado de 40+ casos",
            "Implementada carga din√°mica en panel-empresa.html",
            "A√±adida carga de activeModules en handleLogin",
            "Estandarizada exportaci√≥n de 6 m√≥dulos CORE",
            "Convenci√≥n unificada window.Modules[moduleKey]"
          ],
          "files_modified": [
            "server.js",
            "src/routes/modulesRoutes.js",
            "public/panel-empresa.html",
            "public/js/modules/users.js",
            "public/js/modules/departments.js",
            "public/js/modules/attendance.js",
            "public/js/modules/notifications-enterprise.js",
            "public/js/modules/shifts.js",
            "public/js/modules/inbox.js",
            "src/config/modules-metadata-extended.json"
          ],
          "migrations": [],
          "database_impact": {}
        }
      ],
      "version": "1.0.1"
    },
    "companies": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 2,
        "rubro": "General",
        "availableIn": "admin"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "ALL"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "settings": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 3,
        "rubro": "Sistema Base",
        "availableIn": "both"
      },
      "features": [
        "Configuraciones generales",
        "Personalizaci√≥n de interfaz",
        "Par√°metros del sistema",
        "Backup y restauraci√≥n",
        "Logs del sistema"
      ],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "ALL"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "dashboard": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 4,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "attendance",
        "medical",
        "vacation"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "support-base": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 5,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [
        "knowledge-base"
      ],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "legal-dashboard": {
      "commercial": {
        "basePrice": 15,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 10,
        "rubro": "Legal y Normativo",
        "availableIn": "both"
      },
      "features": [
        "Cumplimiento normativo",
        "Gesti√≥n de contratos",
        "Documentaci√≥n legal",
        "Auditor√≠as de cumplimiento",
        "Reportes legales"
      ],
      "requirements": [
        "users",
        "document-management"
      ],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "attendance": {
      "commercial": {
        "basePrice": 5,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 10,
        "rubro": "Sistema Base",
        "availableIn": "company"
      },
      "features": [
        "Registro de entrada y salida",
        "C√°lculo de horas trabajadas",
        "Control de tardanzas",
        "Reportes de asistencia",
        "Integraci√≥n con turnos"
      ],
      "requirements": [
        "users",
        "shifts"
      ],
      "bundledModules": [
        "kiosks",
        "kiosks-apk"
      ],
      "integratesWith": [
        "medical",
        "vacation",
        "legal"
      ],
      "providesTo": [
        "payroll-liquidation",
        "reports"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.337Z",
      "changelog": [
        {
          "version": "1.0.1",
          "date": "2025-11-02",
          "author": "System Auto-Update",
          "type": "architecture",
          "summary": "Refactorizaci√≥n COMPLETA: Sistema de Carga Din√°mica Unificado",
          "changes": [
            "UnifiedKnowledgeService inicializado en server.js",
            "Endpoint /api/modules/active creado",
            "Eliminado SWITCH hardcodeado de 40+ casos",
            "Implementada carga din√°mica en panel-empresa.html",
            "A√±adida carga de activeModules en handleLogin",
            "Estandarizada exportaci√≥n de 6 m√≥dulos CORE",
            "Convenci√≥n unificada window.Modules[moduleKey]"
          ],
          "files_modified": [
            "server.js",
            "src/routes/modulesRoutes.js",
            "public/panel-empresa.html",
            "public/js/modules/users.js",
            "public/js/modules/departments.js",
            "public/js/modules/attendance.js",
            "public/js/modules/notifications-enterprise.js",
            "public/js/modules/shifts.js",
            "public/js/modules/inbox.js",
            "src/config/modules-metadata-extended.json"
          ],
          "migrations": [],
          "database_impact": {}
        }
      ],
      "version": "1.0.1"
    },
    "kiosks": {
      "commercial": {
        "basePrice": 0,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 11,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [
        "M√∫ltiples kioscos por empresa",
        "Validaci√≥n GPS autom√°tica",
        "Autorizaci√≥n por empleado",
        "Configuraci√≥n remota"
      ],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [
        "biometric-enterprise"
      ],
      "providesTo": [
        "attendance"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "kiosks-apk": {
      "commercial": {
        "basePrice": 0,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 12,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "attendance"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "biometric-dashboard": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 20,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "medical-dashboard": {
      "commercial": {
        "basePrice": 3,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 20,
        "rubro": "Salud Ocupacional",
        "availableIn": "company"
      },
      "features": [
        "Historiales m√©dicos",
        "Certificados m√©dicos",
        "Seguimiento de salud",
        "Reportes m√©dicos",
        "Integraci√≥n con ART"
      ],
      "requirements": [
        "users"
      ],
      "bundledModules": [
        "medical"
      ],
      "integratesWith": [
        "art-management"
      ],
      "providesTo": [
        "legal",
        "attendance"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "medical": {
      "commercial": {
        "basePrice": 0,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 21,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "art-management",
        "notifications-enterprise"
      ],
      "providesTo": [
        "legal",
        "attendance"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.337Z"
    },
    "support-ai": {
      "commercial": {
        "basePrice": 2,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 30,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "support-base"
      ],
      "bundledModules": [
        "ai-assistant"
      ],
      "integratesWith": [
        "support-base"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "vacation-management": {
      "commercial": {
        "basePrice": 90,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 30,
        "rubro": "Sistema Base",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "ai-assistant": {
      "commercial": {
        "basePrice": 0,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 31,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "support-ai"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "google-maps-integration": {
      "commercial": {
        "basePrice": 120,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 35,
        "rubro": "Sistema Base",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "notifications-enterprise": {
      "commercial": {
        "basePrice": 75,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 40,
        "rubro": "Sistema Base",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "partners-medical": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 40,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "medical"
      ],
      "bundledModules": [
        "temporary-access"
      ],
      "integratesWith": [
        "notifications-enterprise"
      ],
      "providesTo": [
        "medical-dashboard"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "temporary-access": {
      "commercial": {
        "basePrice": 0,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 41,
        "rubro": "General",
        "availableIn": "admin"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "partners-medical"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "permissions-test": {
      "commercial": {
        "basePrice": 70,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 44,
        "rubro": "Sistema Base",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "network": {
      "commercial": {
        "basePrice": 110,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 45,
        "rubro": "Sistema Base",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "departments": {
      "commercial": {
        "basePrice": 1,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 50,
        "rubro": "Sistema Base",
        "availableIn": "company"
      },
      "features": [
        "Creaci√≥n de departamentos",
        "Jerarqu√≠a organizacional",
        "Asignaci√≥n de empleados",
        "Configuraci√≥n por ubicaci√≥n"
      ],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "users",
        "attendance"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z",
      "changelog": [
        {
          "version": "1.0.1",
          "date": "2025-11-02",
          "author": "System Auto-Update",
          "type": "architecture",
          "summary": "Refactorizaci√≥n COMPLETA: Sistema de Carga Din√°mica Unificado",
          "changes": [
            "UnifiedKnowledgeService inicializado en server.js",
            "Endpoint /api/modules/active creado",
            "Eliminado SWITCH hardcodeado de 40+ casos",
            "Implementada carga din√°mica en panel-empresa.html",
            "A√±adida carga de activeModules en handleLogin",
            "Estandarizada exportaci√≥n de 6 m√≥dulos CORE",
            "Convenci√≥n unificada window.Modules[moduleKey]"
          ],
          "files_modified": [
            "server.js",
            "src/routes/modulesRoutes.js",
            "public/panel-empresa.html",
            "public/js/modules/users.js",
            "public/js/modules/departments.js",
            "public/js/modules/attendance.js",
            "public/js/modules/notifications-enterprise.js",
            "public/js/modules/shifts.js",
            "public/js/modules/inbox.js",
            "src/config/modules-metadata-extended.json"
          ],
          "migrations": [],
          "database_impact": {}
        }
      ],
      "version": "1.0.1"
    },
    "shifts": {
      "commercial": {
        "basePrice": 2,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 51,
        "rubro": "Sistema Base",
        "availableIn": "company"
      },
      "features": [
        "Configuraci√≥n de turnos flexibles",
        "Horarios rotativos",
        "Excepciones y feriados",
        "Turnos por departamento"
      ],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "attendance"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z",
      "changelog": [
        {
          "version": "1.0.1",
          "date": "2025-11-02",
          "author": "System Auto-Update",
          "type": "architecture",
          "summary": "Refactorizaci√≥n COMPLETA: Sistema de Carga Din√°mica Unificado",
          "changes": [
            "UnifiedKnowledgeService inicializado en server.js",
            "Endpoint /api/modules/active creado",
            "Eliminado SWITCH hardcodeado de 40+ casos",
            "Implementada carga din√°mica en panel-empresa.html",
            "A√±adida carga de activeModules en handleLogin",
            "Estandarizada exportaci√≥n de 6 m√≥dulos CORE",
            "Convenci√≥n unificada window.Modules[moduleKey]"
          ],
          "files_modified": [
            "server.js",
            "src/routes/modulesRoutes.js",
            "public/panel-empresa.html",
            "public/js/modules/users.js",
            "public/js/modules/departments.js",
            "public/js/modules/attendance.js",
            "public/js/modules/notifications-enterprise.js",
            "public/js/modules/shifts.js",
            "public/js/modules/inbox.js",
            "src/config/modules-metadata-extended.json"
          ],
          "migrations": [],
          "database_impact": {}
        }
      ],
      "version": "1.0.1"
    },
    "biometric-enterprise": {
      "commercial": {
        "basePrice": 4,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 52,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "kiosks"
      ],
      "providesTo": [
        "attendance",
        "access-control"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "vacation": {
      "commercial": {
        "basePrice": 1.5,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 53,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "attendance",
        "medical"
      ],
      "providesTo": [
        "payroll-liquidation"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "legal": {
      "commercial": {
        "basePrice": 2.5,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 54,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "medical",
        "attendance"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "payroll-liquidation": {
      "commercial": {
        "basePrice": 3,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 56,
        "rubro": "Recursos Humanos",
        "availableIn": "company"
      },
      "features": [
        "C√°lculo autom√°tico de sueldos",
        "Gesti√≥n de conceptos",
        "Liquidaciones finales",
        "Integraci√≥n con asistencia",
        "Reportes de n√≥mina"
      ],
      "requirements": [
        "users",
        "attendance"
      ],
      "bundledModules": [],
      "integratesWith": [
        "vacation"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "art-management": {
      "commercial": {
        "basePrice": 2,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 60,
        "rubro": "Salud Ocupacional",
        "availableIn": "company"
      },
      "features": [
        "Gesti√≥n de ART m√∫ltiples",
        "Reportes de accidentes",
        "Seguimiento de casos",
        "Documentaci√≥n legal",
        "Integraci√≥n con medicina laboral"
      ],
      "requirements": [
        "users",
        "medical"
      ],
      "bundledModules": [],
      "integratesWith": [
        "medical-dashboard"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "document-management": {
      "commercial": {
        "basePrice": 1.5,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 61,
        "rubro": "Legal y Normativo",
        "availableIn": "company"
      },
      "features": [
        "Almacenamiento de documentos",
        "Versionado de archivos",
        "Categorizaci√≥n",
        "B√∫squeda avanzada",
        "Control de acceso por documento"
      ],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "medical",
        "legal"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "training-management": {
      "commercial": {
        "basePrice": 1.5,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 62,
        "rubro": "Funcionalidades Extra",
        "availableIn": "company"
      },
      "features": [
        "Cat√°logo de cursos",
        "Seguimiento de progreso",
        "Certificaciones",
        "Evaluaciones",
        "Reportes de capacitaci√≥n"
      ],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "compliance-dashboard": {
      "commercial": {
        "basePrice": 2,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 63,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "legal",
        "attendance"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "visitors": {
      "commercial": {
        "basePrice": 1,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 64,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "access-control",
        "biometric-enterprise"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "access-control": {
      "commercial": {
        "basePrice": 2.5,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 65,
        "rubro": "Sistema Base",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "biometric-enterprise",
        "visitors"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "clientes": {
      "commercial": {
        "basePrice": 2,
        "isCore": false,
        "isActive": true,
        "minEmployees": 5,
        "maxEmployees": null,
        "displayOrder": 70,
        "rubro": "Funcionalidades Extra",
        "availableIn": "company"
      },
      "features": [
        "Gesti√≥n de clientes",
        "Categor√≠as comerciales",
        "Condiciones IVA",
        "Historial comercial",
        "Sesiones concurrentes"
      ],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "facturacion"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "facturacion": {
      "commercial": {
        "basePrice": 3,
        "isCore": false,
        "isActive": true,
        "minEmployees": 5,
        "maxEmployees": null,
        "displayOrder": 71,
        "rubro": "Funcionalidades Extra",
        "availableIn": "company"
      },
      "features": [
        "Facturaci√≥n completa",
        "Sesiones temporales",
        "Aislamiento de datos",
        "20+ usuarios concurrentes",
        "Confirmaci√≥n de facturas"
      ],
      "requirements": [
        "users",
        "clientes"
      ],
      "bundledModules": [],
      "integratesWith": [
        "plantillas-fiscales"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "plantillas-fiscales": {
      "commercial": {
        "basePrice": 1,
        "isCore": false,
        "isActive": true,
        "minEmployees": 3,
        "maxEmployees": null,
        "displayOrder": 72,
        "rubro": "Funcionalidades Extra",
        "availableIn": "company"
      },
      "features": [
        "Plantillas por pa√≠s",
        "Condiciones IVA",
        "Conceptos impositivos",
        "Al√≠cuotas",
        "Configuraci√≥n fiscal"
      ],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "facturacion"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "vendors": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 80,
        "rubro": "General",
        "availableIn": "admin"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "partners": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 81,
        "rubro": "General",
        "availableIn": "admin"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "auditor": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 82,
        "rubro": "General",
        "availableIn": "admin"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "knowledge-base": {
      "commercial": {
        "basePrice": 0,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 90,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "support-base"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "emotional-analysis": {
      "commercial": {
        "basePrice": 2,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 91,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users",
        "biometric-enterprise"
      ],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "psychological-assessment": {
      "commercial": {
        "basePrice": 2,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 92,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "employee-map": {
      "commercial": {
        "basePrice": 1.5,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 93,
        "rubro": "Funcionalidades Extra",
        "availableIn": "company"
      },
      "features": [
        "Seguimiento GPS en tiempo real",
        "Historial de ubicaciones",
        "Geofencing",
        "Rutas de trabajo",
        "Reportes de movilidad"
      ],
      "requirements": [
        "users",
        "attendance"
      ],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "job-postings": {
      "commercial": {
        "basePrice": 1,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 94,
        "rubro": "Funcionalidades Extra",
        "availableIn": "company"
      },
      "features": [
        "Publicaci√≥n de ofertas",
        "Gesti√≥n de candidatos",
        "Proceso de selecci√≥n",
        "Evaluaciones",
        "Reportes de reclutamiento"
      ],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "sanctions-management": {
      "commercial": {
        "basePrice": 1,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 95,
        "rubro": "Sistema Base",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "legal",
        "attendance"
      ],
      "providesTo": [
        "legal"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "licensing-management": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 96,
        "rubro": "Sistema Base",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [
        "ALL"
      ],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "sla-tracking": {
      "commercial": {
        "basePrice": 1.5,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 97,
        "rubro": "General",
        "availableIn": "both"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "notifications-enterprise"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "resource-center": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 98,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "audit-reports": {
      "commercial": {
        "basePrice": 2,
        "isCore": false,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 99,
        "rubro": "General",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [
        "users"
      ],
      "bundledModules": [],
      "integratesWith": [
        "legal",
        "compliance-dashboard"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "terms-conditions": {
      "commercial": {
        "basePrice": 0,
        "isCore": true,
        "isActive": true,
        "minEmployees": null,
        "maxEmployees": null,
        "displayOrder": 100,
        "rubro": "Sistema Base",
        "availableIn": "company"
      },
      "features": [],
      "requirements": [],
      "bundledModules": [],
      "integratesWith": [
        "legal"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-11-02T21:24:57.338Z"
    },
    "employee-360": {
      "module_key": "employee-360",
      "name": "Expediente 360¬∞",
      "name_alt": "An√°lisis Integral de Empleados con IA",
      "icon": "üéØ",
      "color": "#9b59b6",
      "category": "rrhh-premium",
      "version": "1.0.0",
      "frontend_file": "/js/modules/employee-360.js",
      "init_function": "showEmployee360Content",
      "changelog": [
        {
          "version": "1.0.0",
          "date": "2025-01-25",
          "author": "Claude Code",
          "type": "feature",
          "summary": "Implementaci√≥n inicial completa del m√≥dulo Expediente 360¬∞",
          "changes": [
            "Dashboard con selector de empleados",
            "Scoring integral con 5 categor√≠as (Asistencia, Puntualidad, Disciplina, Capacitaci√≥n, Estabilidad)",
            "Timeline unificado de todos los eventos del empleado",
            "An√°lisis con IA usando Ollama + Llama 3.1",
            "Comparaci√≥n entre m√∫ltiples empleados (hasta 10)",
            "Exportaci√≥n PDF profesional",
            "Tabs: Resumen, Asistencia, Disciplina, Capacitaciones, M√©dico, Timeline, An√°lisis IA",
            "Sistema multi-tenant completo"
          ],
          "files_created": [
            "src/services/Employee360Service.js",
            "src/routes/employee360Routes.js",
            "public/js/modules/employee-360.js"
          ],
          "files_modified": [
            "server.js"
          ]
        }
      ],
      "description": {
        "short": "An√°lisis integral de empleados con IA, scoring y timeline unificado",
        "long": "M√≥dulo premium que consolida TODA la informaci√≥n de un empleado en un solo lugar: asistencia, puntualidad, sanciones, vacaciones, capacitaciones, historial m√©dico, auditor√≠a de cambios. Incluye an√°lisis con Inteligencia Artificial (Ollama + Llama 3.1), sistema de scoring ponderado, timeline cronol√≥gico de eventos, comparaci√≥n entre empleados y exportaci√≥n PDF profesional.",
        "business_value": "Proporciona a gerentes de RRHH una visi√≥n 360¬∞ objetiva de cada empleado. Ideal para evaluaciones de desempe√±o, promociones, renovaciones de contrato y toma de decisiones basadas en datos.",
        "use_cases": [
          "Evaluaci√≥n de desempe√±o anual ‚Üí Score integral + an√°lisis IA",
          "Decisi√≥n de promoci√≥n ‚Üí Comparar candidatos lado a lado",
          "Renovaci√≥n de contrato ‚Üí Expediente completo con historial",
          "Auditor√≠a interna ‚Üí Timeline de todos los eventos del empleado",
          "Informe para gerencia ‚Üí Exportaci√≥n PDF profesional"
        ]
      },
      "commercial": {
        "basePrice": 150,
        "isCore": false,
        "isActive": true,
        "isPremium": true,
        "minEmployees": 10,
        "maxEmployees": null,
        "displayOrder": 15,
        "rubro": "RRHH Premium",
        "availableIn": "company"
      },
      "features": [
        "Scoring integral de 5 categor√≠as",
        "An√°lisis con IA (Ollama + Llama 3.1)",
        "Timeline unificado de eventos",
        "Comparaci√≥n entre empleados",
        "Exportaci√≥n PDF profesional",
        "Multi-tenant completo"
      ],
      "requirements": [
        "users",
        "attendance"
      ],
      "bundledModules": [],
      "integratesWith": [
        "attendance",
        "sanctions-management",
        "vacation-management",
        "training-management",
        "medical-dashboard",
        "user-audit-logs"
      ],
      "providesTo": [],
      "_db_synced_at": "2025-01-25T00:00:00.000Z"
    }
  }
}