/**
 * ============================================================================
 * RECRUITMENT WORKFLOW - AUTO-GENERATED
 * ============================================================================
 *
 * ⚠️ ARCHIVO AUTO-GENERADO - NO EDITAR MANUALMENTE
 *
 * Este archivo es regenerado automáticamente por UniversalWorkflowGenerator
 * cuando cambia el código de los servicios relacionados.
 *
 * FUENTES:
 * * - RecruitmentService.js
 * * - JobPostingService.js
 * * - CandidateService.js
 *
 * Brain detecta este archivo via LIVE_CODE_SCAN y extrae los STAGES.
 * Cualquier cambio en los servicios fuente regenerará este archivo.
 *
 * Generado: 2025-12-15T17:51:00.592Z
 * Versión: 2.0.20251215-auto
 * Módulo: recruitment
 *
 * ESTADÍSTICAS:
 * - Total stages: 7
 * - Core: 4
 * - Existentes: 0
 * - Auto-generados: 0
 * - Estados finales: 3
 *
 * ============================================================================
 */

class RecruitmentWorkflowGenerated {
    /**
     * STAGES - Detectados automáticamente por Brain via LIVE_CODE_SCAN
     */
    static STAGES = {
        JOB_POSTED: {
            name: 'Puesto Publicado',
            order: 1,
            category: 'intake',
            description: 'Stage core de Recruitment Workflow',
            transitions_to: [],
            isCore: true,
        },

        APPLICATIONS_RECEIVED: {
            name: 'Postulaciones Recibidas',
            order: 2,
            category: 'process',
            description: 'Stage core de Recruitment Workflow',
            transitions_to: [],
            isCore: true,
        },

        INTERVIEWS: {
            name: 'Entrevistas',
            order: 3,
            category: 'evaluation',
            description: 'Stage core de Recruitment Workflow',
            transitions_to: [],
            isCore: true,
        },

        HIRING_DECISION: {
            name: 'Decisión de Contratación',
            order: 4,
            category: 'outcome',
            description: 'Stage core de Recruitment Workflow',
            transitions_to: [],
            isCore: true,
        },

        CANDIDATE_HIRED: {
            name: 'Candidato Contratado',
            order: 5,
            category: 'success',
            description: 'Estado final',
            transitions_to: [],
            is_final: true,
            is_success: true,
        },

        CANDIDATE_REJECTED: {
            name: 'Candidato Rechazado',
            order: 6,
            category: 'rejection',
            description: 'Estado final',
            transitions_to: [],
            is_final: true,
            is_rejection: true,
        },

        POSITION_CLOSED: {
            name: 'Posición Cerrada',
            order: 7,
            category: 'final',
            description: 'Estado final',
            transitions_to: [],
            is_final: true,
        },

    };

    /**
     * WORKFLOW METADATA
     */
    static WORKFLOW_METADATA = {
        name: 'Recruitment Workflow',
        module: 'recruitment',
        version: '2.0.20251215-auto',
        isAutoGenerated: true,
        generatedAt: '2025-12-15T17:51:00.592Z',
        sourceFiles: ["RecruitmentService.js","JobPostingService.js","CandidateService.js"],
        entry_point: 'JOB_POSTED',
        final_states: {
            success: ["CANDIDATE_HIRED"],
            rejection: ["CANDIDATE_REJECTED"]
        },
        stats: {"total":7,"core":4,"existing":0,"autoGenerated":0,"outcomes":3}
    };

    /**
     * Obtener stages en orden
     */
    static getStagesInOrder() {
        return Object.entries(this.STAGES)
            .map(([key, stage]) => ({ key, ...stage }))
            .sort((a, b) => (a.order || 999) - (b.order || 999));
    }

    /**
     * Obtener stages finales
     */
    static getFinalStages() {
        return Object.entries(this.STAGES)
            .filter(([_, stage]) => stage.is_final)
            .map(([key, stage]) => ({ key, ...stage }));
    }

    /**
     * Validar transición
     */
    static isValidTransition(fromStage, toStage) {
        const from = this.STAGES[fromStage];
        if (!from || !from.transitions_to) return false;
        return from.transitions_to.includes(toStage);
    }

    /**
     * Obtener siguiente stage sugerido
     */
    static getNextSuggestedStage(currentStage) {
        const current = this.STAGES[currentStage];
        if (!current || !current.transitions_to || current.transitions_to.length === 0) return null;
        return current.transitions_to[0];
    }

    /**
     * Obtener tutorial steps para este workflow
     */
    static getTutorialSteps() {
        return this.getStagesInOrder()
            .filter(s => !s.is_final)
            .map((stage, index) => ({
                step: index + 1,
                stageId: stage.key,
                title: stage.name,
                description: stage.description || '',
                category: stage.category,
                validations: stage.validations || [],
                nextStages: stage.transitions_to || []
            }));
    }
}

module.exports = RecruitmentWorkflowGenerated;
