{
  "timestamp": "2025-12-08T16:21:20.573Z",
  "companyId": 11,
  "categories": [
    {
      "category": "critical_tables",
      "tests": [
        {
          "test": "table_users_exists",
          "passed": true,
          "details": "âœ… Tabla users existe"
        },
        {
          "test": "table_attendances_exists",
          "passed": true,
          "details": "âœ… Tabla attendances existe"
        },
        {
          "test": "table_departments_exists",
          "passed": true,
          "details": "âœ… Tabla departments existe"
        },
        {
          "test": "table_shifts_exists",
          "passed": true,
          "details": "âœ… Tabla shifts existe"
        },
        {
          "test": "table_user_shift_assignments_exists",
          "passed": true,
          "details": "âœ… Tabla user_shift_assignments existe"
        },
        {
          "test": "table_medical_certificates_exists",
          "passed": true,
          "details": "âœ… Tabla medical_certificates existe"
        },
        {
          "test": "table_absence_cases_exists",
          "passed": true,
          "details": "âœ… Tabla absence_cases existe"
        },
        {
          "test": "table_user_medical_exams_exists",
          "passed": true,
          "details": "âœ… Tabla user_medical_exams existe"
        },
        {
          "test": "table_user_work_restrictions_exists",
          "passed": true,
          "details": "âœ… Tabla user_work_restrictions existe"
        },
        {
          "test": "table_vacation_requests_exists",
          "passed": true,
          "details": "âœ… Tabla vacation_requests existe"
        },
        {
          "test": "table_notifications_exists",
          "passed": true,
          "details": "âœ… Tabla notifications existe"
        }
      ],
      "passed": true
    },
    {
      "category": "company_data",
      "tests": [
        {
          "test": "company_exists",
          "passed": true,
          "details": "âœ… Empresa: ISI (isi)"
        },
        {
          "test": "has_active_employees",
          "passed": true,
          "details": "ğŸ“Š 998 empleados activos"
        },
        {
          "test": "has_departments",
          "passed": true,
          "details": "ğŸ“Š 20 departamentos"
        },
        {
          "test": "has_shift_assignments",
          "passed": true,
          "details": "ğŸ“Š 1000 asignaciones de turno"
        }
      ],
      "passed": true
    },
    {
      "category": "absence_endpoint",
      "tests": [
        {
          "test": "absence_calculation_via_ssot",
          "passed": true,
          "details": "âœ… CÃ¡lculo de ausentes SSOT correcto",
          "metrics": {
            "expectedToWork": 998,
            "present": 2,
            "absent": 997,
            "absenceRate": "99.90%"
          }
        },
        {
          "test": "shift_assignments_table_used",
          "passed": true,
          "details": "âœ… Usando user_shift_assignments como SSOT (1000 registros)"
        }
      ],
      "passed": true
    },
    {
      "category": "medical_endpoint",
      "tests": [
        {
          "test": "medical_query_corrected",
          "passed": true,
          "details": "âœ… Query mÃ©dica corregida funciona (10 empleados)"
        },
        {
          "test": "uses_medical_certificates_table",
          "passed": true,
          "details": "âœ… Usa tabla medical_certificates en lugar de user_documents"
        },
        {
          "test": "case_status_values_valid",
          "passed": true,
          "details": "âœ… Todos los case_status en BD son vÃ¡lidos"
        }
      ],
      "passed": true
    },
    {
      "category": "referential_integrity",
      "tests": [
        {
          "test": "users_have_valid_department",
          "passed": true,
          "details": "âœ… Todos los usuarios tienen departamento vÃ¡lido"
        },
        {
          "test": "attendances_have_valid_user",
          "passed": true,
          "details": "âœ… Todas las asistencias tienen usuario vÃ¡lido"
        },
        {
          "test": "medical_certificates_have_valid_user",
          "passed": true,
          "details": "âœ… Todos los certificados mÃ©dicos tienen usuario vÃ¡lido"
        },
        {
          "test": "absence_cases_have_valid_user",
          "passed": true,
          "details": "âœ… Todos los casos de ausencia tienen usuario vÃ¡lido"
        }
      ],
      "passed": true
    }
  ],
  "totalTests": 24,
  "passed": 24,
  "failed": 0,
  "successRate": "100.0"
}